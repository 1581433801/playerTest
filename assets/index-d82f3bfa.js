import{B as da,a as ha,C as ga,E as va,F as pa,K as ma,R as ya,S as ba,b as Sa,T as Ea,c as Ca,d as Ta,e as xa,V as Ia,f as wa,g as Pa,h as ka,i as Oa,j as Aa,k as Da,l as La,m as oi,n as Ra,o as bo,p as jt,q as ot,r as it,s as Ma,t as Na,u as Fa,v as _a,w as Ba,x as Ha,y as Ua,z as Qn,A as ja,D as Ga,G as Ei,H as Va,I as Wa,J as Ka,L as za,M as $a,N as Ya,O as Xa,P as Ja,Q as Za,U as Qa,W as qa,X as es,Y as ts,Z as ns,_ as is,$ as rs,a0 as os,a1 as as,a2 as ss,a3 as ls,a4 as us,a5 as cs,a6 as fs,a7 as ds,a8 as hs,a9 as gs,aa as vs,ab as ps,ac as ms,ad as ys,ae as bs,af as Ss,ag as Es,ah as Cs,ai as So,aj as qn,ak as Ts,al as Eo,am as xs,an as Is,ao as ws,ap as Ps,aq as ks,ar as Os,as as Rn,at as As,au as Ds,av as Ls,aw as Rs,ax as Co,ay as Ms,az as tt,aA as To,aB as Ns,aC as Fs,aD as xo,aE as _s,aF as Bs,aG as Hs,aH as Ge,aI as Us,aJ as js,aK as Gs,aL as Vs,aM as Ws,aN as Ks,aO as zs,aP as $s,aQ as Ys,aR as Xs,aS as Js,aT as Zs,aU as Qs,aV as qs,aW as el,aX as tl,aY as nl,aZ as il,a_ as Qi,a$ as rl,b0 as ol,b1 as al,b2 as sl,b3 as Ci,b4 as ll,b5 as ul,b6 as cl,b7 as an,b8 as fl,b9 as dl,ba as hl,bb as gl,bc as vl,bd as pl,be as ml,bf as yl,bg as bl,bh as Sl,bi as El,bj as Cl,bk as qi,bl as Tl,bm as xl,bn as dr,bo as Il,bp as wl,bq as Pl,br as kl,bs as Io,bt as Ol,bu as er,bv as Al,bw as Dl,bx as Ll,by as Rl,bz as hr,bA as gr}from"./index-d2525ec3.js";const Ml=()=>{},Nl=Object.freeze(Object.defineProperty({__proto__:null,BaseTransition:da,BaseTransitionPropsValidators:ha,Comment:ga,EffectScope:va,Fragment:pa,KeepAlive:ma,ReactiveEffect:ya,Static:ba,Suspense:Sa,Teleport:Ea,Text:Ca,Transition:Ta,TransitionGroup:xa,VueElement:Ia,assertNumber:wa,callWithAsyncErrorHandling:Pa,callWithErrorHandling:ka,camelize:Oa,capitalize:Aa,cloneVNode:Da,compatUtils:La,compile:Ml,computed:oi,createApp:Ra,createBlock:bo,createCommentVNode:jt,createElementBlock:ot,createElementVNode:it,createHydrationRenderer:Ma,createPropsRestProxy:Na,createRenderer:Fa,createSSRApp:_a,createSlots:Ba,createStaticVNode:Ha,createTextVNode:Ua,createVNode:Qn,customRef:ja,defineAsyncComponent:Ga,defineComponent:Ei,defineCustomElement:Va,defineEmits:Wa,defineExpose:Ka,defineModel:za,defineOptions:$a,defineProps:Ya,defineSSRCustomElement:Xa,defineSlots:Ja,get devtools(){return Za},effect:Qa,effectScope:qa,getCurrentInstance:es,getCurrentScope:ts,getTransitionRawChildren:ns,guardReactiveProps:is,h:rs,handleError:os,hasInjectionContext:as,hydrate:ss,initCustomFormatter:ls,initDirectivesForSSR:us,inject:cs,isMemoSame:fs,isProxy:ds,isReactive:hs,isReadonly:gs,isRef:vs,isRuntimeOnly:ps,isShallow:ms,isVNode:ys,markRaw:bs,mergeDefaults:Ss,mergeModels:Es,mergeProps:Cs,nextTick:So,normalizeClass:qn,normalizeProps:Ts,normalizeStyle:Eo,onActivated:xs,onBeforeMount:Is,onBeforeUnmount:ws,onBeforeUpdate:Ps,onDeactivated:ks,onErrorCaptured:Os,onMounted:Rn,onRenderTracked:As,onRenderTriggered:Ds,onScopeDispose:Ls,onServerPrefetch:Rs,onUnmounted:Co,onUpdated:Ms,openBlock:tt,popScopeId:To,provide:Ns,proxyRefs:Fs,pushScopeId:xo,queuePostFlushCb:_s,reactive:Bs,readonly:Hs,ref:Ge,registerRuntimeCompiler:Us,render:js,renderList:Gs,renderSlot:Vs,resolveComponent:Ws,resolveDirective:Ks,resolveDynamicComponent:zs,resolveFilter:$s,resolveTransitionHooks:Ys,setBlockTracking:Xs,setDevtoolsHook:Js,setTransitionHooks:Zs,shallowReactive:Qs,shallowReadonly:qs,shallowRef:el,ssrContextKey:tl,ssrUtils:nl,stop:il,toDisplayString:Qi,toHandlerKey:rl,toHandlers:ol,toRaw:al,toRef:sl,toRefs:Ci,toValue:ll,transformVNodeArgs:ul,triggerRef:cl,unref:an,useAttrs:fl,useCssModule:dl,useCssVars:hl,useModel:gl,useSSRContext:vl,useSlots:pl,useTransitionState:ml,vModelCheckbox:yl,vModelDynamic:bl,vModelRadio:Sl,vModelSelect:El,vModelText:Cl,vShow:qi,version:Tl,warn:xl,watch:dr,watchEffect:Il,watchPostEffect:wl,watchSyncEffect:Pl,withAsyncContext:kl,withCtx:Io,withDefaults:Ol,withDirectives:er,withKeys:Al,withMemo:Dl,withModifiers:Ll,withScopeId:Rl},Symbol.toStringTag,{value:"Module"})),Fl={class:"father"},_l={key:1,class:"description"},Bl={class:"description"},Hl={key:0,class:"iconfont icon-tuodong"},Ul=Ei({__name:"PlaylistItem",props:{item:Object,isPlaying:Boolean,index:Number,isDetail:Boolean,isLastPoint:Boolean,isFirstPoint:Boolean},emits:["click","mousedown"],setup(s,{emit:a}){const r=s,{customLayerIndex:t,player:e,playingIndex:i,currentPlayingItem:n,currInRemain:o,currentVideoId:l,fileList:u}=Ci(hr());let c=0;const f=Ge(0),d=Ge("0%");dr(n,()=>{f.value++,So(()=>{d.value="0%"})},{deep:!0}),e.value.on("timeupdate",()=>{var p;if(console.log("item中的舰艇"),i.value!==-1&&((p=n.value)!=null&&p.pointId)){let m=n.value.timestamps.start,y=n.value.timestamps.duration;o.value&&(m=-(u.value.find(b=>b.videoId===l.value-1).dur-n.value.timestamps.start),y=n.value.timestamps.duration),c=(e.value.currentTime-m)/y,d.value=(c*100).toFixed(2)+"%"}}),r.index;const h=()=>a("click"),g=p=>a("mousedown",p);return(p,m)=>{var y,b,S,E,I,T,D;return tt(),ot("div",Fl,[it("li",{onClick:m[0]||(m[0]=_=>{var k;return(k=s.item)!=null&&k.description||s.isDetail?h():null}),class:qn(["pointItem",{"first-point":s.isFirstPoint,"last-point":s.isLastPoint,noBorder:s.isDetail,"hover-effect":(y=s.item)==null?void 0:y.description,playing:s.isPlaying,next:s.index===an(t)+1}])},[(tt(),ot("div",{key:f.value},[s.isPlaying&&((b=s.item)!=null&&b.description)?(tt(),ot("div",{key:0,class:"mask",style:Eo({width:d.value})},null,4)):jt("",!0)])),s.isDetail?(tt(),ot("div",{key:0,class:"unPlay includBack",onMousedown:g,style:{height:"100%"}},[(S=s.item)!=null&&S.description?jt("",!0):(tt(),ot("p",{key:0,style:{"text-align":"center","font-size":"16px",color:"#4e5969","font-weight":"bold"},class:qn({back_button:!((E=s.item)!=null&&E.description)})},null,2)),(I=s.item)!=null&&I.description?(tt(),ot("p",_l,Qi((T=s.item)==null?void 0:T.description),1)):jt("",!0)],32)):(tt(),ot("div",{key:1,class:"unPlay",onMousedown:g},[it("p",Bl,Qi((D=s.item)==null?void 0:D.description),1)],32))],2),it("div",{class:qn(["ringtOther",{"first-point":s.isFirstPoint,"last-point":s.isLastPoint,handle:s.isPlaying}])},[s.isPlaying&&!s.isDetail?(tt(),ot("span",Hl)):jt("",!0)],2)])}}});const Rr=gr(Ul,[["__scopeId","data-v-7268881b"]]);var wo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ti(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}function Po(s){if(s.__esModule)return s;var a=s.default;if(typeof a=="function"){var r=function t(){return this instanceof t?Reflect.construct(a,arguments,this.constructor):a.apply(this,arguments)};r.prototype=a.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(s).forEach(function(t){var e=Object.getOwnPropertyDescriptor(s,t);Object.defineProperty(r,t,e.get?e:{enumerable:!0,get:function(){return s[t]}})}),r}var ko={exports:{}};const jl=Po(Nl);/**!
 * Sortable 1.14.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function Mr(s,a){var r=Object.keys(s);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(s);a&&(t=t.filter(function(e){return Object.getOwnPropertyDescriptor(s,e).enumerable})),r.push.apply(r,t)}return r}function yt(s){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?Mr(Object(r),!0).forEach(function(t){Gl(s,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(r)):Mr(Object(r)).forEach(function(t){Object.defineProperty(s,t,Object.getOwnPropertyDescriptor(r,t))})}return s}function ei(s){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ei=function(a){return typeof a}:ei=function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},ei(s)}function Gl(s,a,r){return a in s?Object.defineProperty(s,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):s[a]=r,s}function at(){return at=Object.assign||function(s){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(s[t]=r[t])}return s},at.apply(this,arguments)}function Vl(s,a){if(s==null)return{};var r={},t=Object.keys(s),e,i;for(i=0;i<t.length;i++)e=t[i],!(a.indexOf(e)>=0)&&(r[e]=s[e]);return r}function Wl(s,a){if(s==null)return{};var r=Vl(s,a),t,e;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(s);for(e=0;e<i.length;e++)t=i[e],!(a.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(s,t)&&(r[t]=s[t])}return r}function Kl(s){return zl(s)||$l(s)||Yl(s)||Xl()}function zl(s){if(Array.isArray(s))return tr(s)}function $l(s){if(typeof Symbol<"u"&&s[Symbol.iterator]!=null||s["@@iterator"]!=null)return Array.from(s)}function Yl(s,a){if(s){if(typeof s=="string")return tr(s,a);var r=Object.prototype.toString.call(s).slice(8,-1);if(r==="Object"&&s.constructor&&(r=s.constructor.name),r==="Map"||r==="Set")return Array.from(s);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return tr(s,a)}}function tr(s,a){(a==null||a>s.length)&&(a=s.length);for(var r=0,t=new Array(a);r<a;r++)t[r]=s[r];return t}function Xl(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Jl="1.14.0";function Tt(s){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(s)}var It=Tt(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Nn=Tt(/Edge/i),Nr=Tt(/firefox/i),kn=Tt(/safari/i)&&!Tt(/chrome/i)&&!Tt(/android/i),Oo=Tt(/iP(ad|od|hone)/i),Zl=Tt(/chrome/i)&&Tt(/android/i),Ao={capture:!1,passive:!1};function fe(s,a,r){s.addEventListener(a,r,!It&&Ao)}function ue(s,a,r){s.removeEventListener(a,r,!It&&Ao)}function ai(s,a){if(a){if(a[0]===">"&&(a=a.substring(1)),s)try{if(s.matches)return s.matches(a);if(s.msMatchesSelector)return s.msMatchesSelector(a);if(s.webkitMatchesSelector)return s.webkitMatchesSelector(a)}catch{return!1}return!1}}function Ql(s){return s.host&&s!==document&&s.host.nodeType?s.host:s.parentNode}function ft(s,a,r,t){if(s){r=r||document;do{if(a!=null&&(a[0]===">"?s.parentNode===r&&ai(s,a):ai(s,a))||t&&s===r)return s;if(s===r)break}while(s=Ql(s))}return null}var Fr=/\s+/g;function Pe(s,a,r){if(s&&a)if(s.classList)s.classList[r?"add":"remove"](a);else{var t=(" "+s.className+" ").replace(Fr," ").replace(" "+a+" "," ");s.className=(t+(r?" "+a:"")).replace(Fr," ")}}function W(s,a,r){var t=s&&s.style;if(t){if(r===void 0)return document.defaultView&&document.defaultView.getComputedStyle?r=document.defaultView.getComputedStyle(s,""):s.currentStyle&&(r=s.currentStyle),a===void 0?r:r[a];!(a in t)&&a.indexOf("webkit")===-1&&(a="-webkit-"+a),t[a]=r+(typeof r=="string"?"":"px")}}function Gt(s,a){var r="";if(typeof s=="string")r=s;else do{var t=W(s,"transform");t&&t!=="none"&&(r=t+" "+r)}while(!a&&(s=s.parentNode));var e=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return e&&new e(r)}function Do(s,a,r){if(s){var t=s.getElementsByTagName(a),e=0,i=t.length;if(r)for(;e<i;e++)r(t[e],e);return t}return[]}function mt(){var s=document.scrollingElement;return s||document.documentElement}function we(s,a,r,t,e){if(!(!s.getBoundingClientRect&&s!==window)){var i,n,o,l,u,c,f;if(s!==window&&s.parentNode&&s!==mt()?(i=s.getBoundingClientRect(),n=i.top,o=i.left,l=i.bottom,u=i.right,c=i.height,f=i.width):(n=0,o=0,l=window.innerHeight,u=window.innerWidth,c=window.innerHeight,f=window.innerWidth),(a||r)&&s!==window&&(e=e||s.parentNode,!It))do if(e&&e.getBoundingClientRect&&(W(e,"transform")!=="none"||r&&W(e,"position")!=="static")){var d=e.getBoundingClientRect();n-=d.top+parseInt(W(e,"border-top-width")),o-=d.left+parseInt(W(e,"border-left-width")),l=n+i.height,u=o+i.width;break}while(e=e.parentNode);if(t&&s!==window){var h=Gt(e||s),g=h&&h.a,p=h&&h.d;h&&(n/=p,o/=g,f/=g,c/=p,l=n+c,u=o+f)}return{top:n,left:o,bottom:l,right:u,width:f,height:c}}}function _r(s,a,r){for(var t=Dt(s,!0),e=we(s)[a];t;){var i=we(t)[r],n=void 0;if(r==="top"||r==="left"?n=e>=i:n=e<=i,!n)return t;if(t===mt())break;t=Dt(t,!1)}return!1}function un(s,a,r,t){for(var e=0,i=0,n=s.children;i<n.length;){if(n[i].style.display!=="none"&&n[i]!==Q.ghost&&(t||n[i]!==Q.dragged)&&ft(n[i],r.draggable,s,!1)){if(e===a)return n[i];e++}i++}return null}function vr(s,a){for(var r=s.lastElementChild;r&&(r===Q.ghost||W(r,"display")==="none"||a&&!ai(r,a));)r=r.previousElementSibling;return r||null}function De(s,a){var r=0;if(!s||!s.parentNode)return-1;for(;s=s.previousElementSibling;)s.nodeName.toUpperCase()!=="TEMPLATE"&&s!==Q.clone&&(!a||ai(s,a))&&r++;return r}function Br(s){var a=0,r=0,t=mt();if(s)do{var e=Gt(s),i=e.a,n=e.d;a+=s.scrollLeft*i,r+=s.scrollTop*n}while(s!==t&&(s=s.parentNode));return[a,r]}function ql(s,a){for(var r in s)if(s.hasOwnProperty(r)){for(var t in a)if(a.hasOwnProperty(t)&&a[t]===s[r][t])return Number(r)}return-1}function Dt(s,a){if(!s||!s.getBoundingClientRect)return mt();var r=s,t=!1;do if(r.clientWidth<r.scrollWidth||r.clientHeight<r.scrollHeight){var e=W(r);if(r.clientWidth<r.scrollWidth&&(e.overflowX=="auto"||e.overflowX=="scroll")||r.clientHeight<r.scrollHeight&&(e.overflowY=="auto"||e.overflowY=="scroll")){if(!r.getBoundingClientRect||r===document.body)return mt();if(t||a)return r;t=!0}}while(r=r.parentNode);return mt()}function eu(s,a){if(s&&a)for(var r in a)a.hasOwnProperty(r)&&(s[r]=a[r]);return s}function Ai(s,a){return Math.round(s.top)===Math.round(a.top)&&Math.round(s.left)===Math.round(a.left)&&Math.round(s.height)===Math.round(a.height)&&Math.round(s.width)===Math.round(a.width)}var On;function Lo(s,a){return function(){if(!On){var r=arguments,t=this;r.length===1?s.call(t,r[0]):s.apply(t,r),On=setTimeout(function(){On=void 0},a)}}}function tu(){clearTimeout(On),On=void 0}function Ro(s,a,r){s.scrollLeft+=a,s.scrollTop+=r}function pr(s){var a=window.Polymer,r=window.jQuery||window.Zepto;return a&&a.dom?a.dom(s).cloneNode(!0):r?r(s).clone(!0)[0]:s.cloneNode(!0)}function Hr(s,a){W(s,"position","absolute"),W(s,"top",a.top),W(s,"left",a.left),W(s,"width",a.width),W(s,"height",a.height)}function Di(s){W(s,"position",""),W(s,"top",""),W(s,"left",""),W(s,"width",""),W(s,"height","")}var We="Sortable"+new Date().getTime();function nu(){var s=[],a;return{captureAnimationState:function(){if(s=[],!!this.options.animation){var t=[].slice.call(this.el.children);t.forEach(function(e){if(!(W(e,"display")==="none"||e===Q.ghost)){s.push({target:e,rect:we(e)});var i=yt({},s[s.length-1].rect);if(e.thisAnimationDuration){var n=Gt(e,!0);n&&(i.top-=n.f,i.left-=n.e)}e.fromRect=i}})}},addAnimationState:function(t){s.push(t)},removeAnimationState:function(t){s.splice(ql(s,{target:t}),1)},animateAll:function(t){var e=this;if(!this.options.animation){clearTimeout(a),typeof t=="function"&&t();return}var i=!1,n=0;s.forEach(function(o){var l=0,u=o.target,c=u.fromRect,f=we(u),d=u.prevFromRect,h=u.prevToRect,g=o.rect,p=Gt(u,!0);p&&(f.top-=p.f,f.left-=p.e),u.toRect=f,u.thisAnimationDuration&&Ai(d,f)&&!Ai(c,f)&&(g.top-f.top)/(g.left-f.left)===(c.top-f.top)/(c.left-f.left)&&(l=ru(g,d,h,e.options)),Ai(f,c)||(u.prevFromRect=c,u.prevToRect=f,l||(l=e.options.animation),e.animate(u,g,f,l)),l&&(i=!0,n=Math.max(n,l),clearTimeout(u.animationResetTimer),u.animationResetTimer=setTimeout(function(){u.animationTime=0,u.prevFromRect=null,u.fromRect=null,u.prevToRect=null,u.thisAnimationDuration=null},l),u.thisAnimationDuration=l)}),clearTimeout(a),i?a=setTimeout(function(){typeof t=="function"&&t()},n):typeof t=="function"&&t(),s=[]},animate:function(t,e,i,n){if(n){W(t,"transition",""),W(t,"transform","");var o=Gt(this.el),l=o&&o.a,u=o&&o.d,c=(e.left-i.left)/(l||1),f=(e.top-i.top)/(u||1);t.animatingX=!!c,t.animatingY=!!f,W(t,"transform","translate3d("+c+"px,"+f+"px,0)"),this.forRepaintDummy=iu(t),W(t,"transition","transform "+n+"ms"+(this.options.easing?" "+this.options.easing:"")),W(t,"transform","translate3d(0,0,0)"),typeof t.animated=="number"&&clearTimeout(t.animated),t.animated=setTimeout(function(){W(t,"transition",""),W(t,"transform",""),t.animated=!1,t.animatingX=!1,t.animatingY=!1},n)}}}}function iu(s){return s.offsetWidth}function ru(s,a,r,t){return Math.sqrt(Math.pow(a.top-s.top,2)+Math.pow(a.left-s.left,2))/Math.sqrt(Math.pow(a.top-r.top,2)+Math.pow(a.left-r.left,2))*t.animation}var Xt=[],Li={initializeByDefault:!0},Fn={mount:function(a){for(var r in Li)Li.hasOwnProperty(r)&&!(r in a)&&(a[r]=Li[r]);Xt.forEach(function(t){if(t.pluginName===a.pluginName)throw"Sortable: Cannot mount plugin ".concat(a.pluginName," more than once")}),Xt.push(a)},pluginEvent:function(a,r,t){var e=this;this.eventCanceled=!1,t.cancel=function(){e.eventCanceled=!0};var i=a+"Global";Xt.forEach(function(n){r[n.pluginName]&&(r[n.pluginName][i]&&r[n.pluginName][i](yt({sortable:r},t)),r.options[n.pluginName]&&r[n.pluginName][a]&&r[n.pluginName][a](yt({sortable:r},t)))})},initializePlugins:function(a,r,t,e){Xt.forEach(function(o){var l=o.pluginName;if(!(!a.options[l]&&!o.initializeByDefault)){var u=new o(a,r,a.options);u.sortable=a,u.options=a.options,a[l]=u,at(t,u.defaults)}});for(var i in a.options)if(a.options.hasOwnProperty(i)){var n=this.modifyOption(a,i,a.options[i]);typeof n<"u"&&(a.options[i]=n)}},getEventProperties:function(a,r){var t={};return Xt.forEach(function(e){typeof e.eventProperties=="function"&&at(t,e.eventProperties.call(r[e.pluginName],a))}),t},modifyOption:function(a,r,t){var e;return Xt.forEach(function(i){a[i.pluginName]&&i.optionListeners&&typeof i.optionListeners[r]=="function"&&(e=i.optionListeners[r].call(a[i.pluginName],t))}),e}};function Tn(s){var a=s.sortable,r=s.rootEl,t=s.name,e=s.targetEl,i=s.cloneEl,n=s.toEl,o=s.fromEl,l=s.oldIndex,u=s.newIndex,c=s.oldDraggableIndex,f=s.newDraggableIndex,d=s.originalEvent,h=s.putSortable,g=s.extraEventProperties;if(a=a||r&&r[We],!!a){var p,m=a.options,y="on"+t.charAt(0).toUpperCase()+t.substr(1);window.CustomEvent&&!It&&!Nn?p=new CustomEvent(t,{bubbles:!0,cancelable:!0}):(p=document.createEvent("Event"),p.initEvent(t,!0,!0)),p.to=n||r,p.from=o||r,p.item=e||r,p.clone=i,p.oldIndex=l,p.newIndex=u,p.oldDraggableIndex=c,p.newDraggableIndex=f,p.originalEvent=d,p.pullMode=h?h.lastPutMode:void 0;var b=yt(yt({},g),Fn.getEventProperties(t,a));for(var S in b)p[S]=b[S];r&&r.dispatchEvent(p),m[y]&&m[y].call(a,p)}}var ou=["evt"],Je=function(a,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},e=t.evt,i=Wl(t,ou);Fn.pluginEvent.bind(Q)(a,r,yt({dragEl:B,parentEl:Oe,ghostEl:se,rootEl:Ie,nextEl:Ht,lastDownEl:ti,cloneEl:Ae,cloneHidden:At,dragStarted:xn,putSortable:je,activeSortable:Q.active,originalEvent:e,oldIndex:sn,oldDraggableIndex:An,newIndex:et,newDraggableIndex:Ot,hideGhostForTarget:_o,unhideGhostForTarget:Bo,cloneNowHidden:function(){At=!0},cloneNowShown:function(){At=!1},dispatchSortableEvent:function(o){ze({sortable:r,name:o,originalEvent:e})}},i))};function ze(s){Tn(yt({putSortable:je,cloneEl:Ae,targetEl:B,rootEl:Ie,oldIndex:sn,oldDraggableIndex:An,newIndex:et,newDraggableIndex:Ot},s))}var B,Oe,se,Ie,Ht,ti,Ae,At,sn,et,An,Ot,jn,je,on=!1,si=!1,li=[],_t,ut,Ri,Mi,Ur,jr,xn,Jt,Dn,Ln=!1,Gn=!1,ni,Ve,Ni=[],nr=!1,ui=[],xi=typeof document<"u",Vn=Oo,Gr=Nn||It?"cssFloat":"float",au=xi&&!Zl&&!Oo&&"draggable"in document.createElement("div"),Mo=function(){if(xi){if(It)return!1;var s=document.createElement("x");return s.style.cssText="pointer-events:auto",s.style.pointerEvents==="auto"}}(),No=function(a,r){var t=W(a),e=parseInt(t.width)-parseInt(t.paddingLeft)-parseInt(t.paddingRight)-parseInt(t.borderLeftWidth)-parseInt(t.borderRightWidth),i=un(a,0,r),n=un(a,1,r),o=i&&W(i),l=n&&W(n),u=o&&parseInt(o.marginLeft)+parseInt(o.marginRight)+we(i).width,c=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+we(n).width;if(t.display==="flex")return t.flexDirection==="column"||t.flexDirection==="column-reverse"?"vertical":"horizontal";if(t.display==="grid")return t.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(i&&o.float&&o.float!=="none"){var f=o.float==="left"?"left":"right";return n&&(l.clear==="both"||l.clear===f)?"vertical":"horizontal"}return i&&(o.display==="block"||o.display==="flex"||o.display==="table"||o.display==="grid"||u>=e&&t[Gr]==="none"||n&&t[Gr]==="none"&&u+c>e)?"vertical":"horizontal"},su=function(a,r,t){var e=t?a.left:a.top,i=t?a.right:a.bottom,n=t?a.width:a.height,o=t?r.left:r.top,l=t?r.right:r.bottom,u=t?r.width:r.height;return e===o||i===l||e+n/2===o+u/2},lu=function(a,r){var t;return li.some(function(e){var i=e[We].options.emptyInsertThreshold;if(!(!i||vr(e))){var n=we(e),o=a>=n.left-i&&a<=n.right+i,l=r>=n.top-i&&r<=n.bottom+i;if(o&&l)return t=e}}),t},Fo=function(a){function r(i,n){return function(o,l,u,c){var f=o.options.group.name&&l.options.group.name&&o.options.group.name===l.options.group.name;if(i==null&&(n||f))return!0;if(i==null||i===!1)return!1;if(n&&i==="clone")return i;if(typeof i=="function")return r(i(o,l,u,c),n)(o,l,u,c);var d=(n?o:l).options.group.name;return i===!0||typeof i=="string"&&i===d||i.join&&i.indexOf(d)>-1}}var t={},e=a.group;(!e||ei(e)!="object")&&(e={name:e}),t.name=e.name,t.checkPull=r(e.pull,!0),t.checkPut=r(e.put),t.revertClone=e.revertClone,a.group=t},_o=function(){!Mo&&se&&W(se,"display","none")},Bo=function(){!Mo&&se&&W(se,"display","")};xi&&document.addEventListener("click",function(s){if(si)return s.preventDefault(),s.stopPropagation&&s.stopPropagation(),s.stopImmediatePropagation&&s.stopImmediatePropagation(),si=!1,!1},!0);var Bt=function(a){if(B){a=a.touches?a.touches[0]:a;var r=lu(a.clientX,a.clientY);if(r){var t={};for(var e in a)a.hasOwnProperty(e)&&(t[e]=a[e]);t.target=t.rootEl=r,t.preventDefault=void 0,t.stopPropagation=void 0,r[We]._onDragOver(t)}}},uu=function(a){B&&B.parentNode[We]._isOutsideThisEl(a.target)};function Q(s,a){if(!(s&&s.nodeType&&s.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(s));this.el=s,this.options=a=at({},a),s[We]=this;var r={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(s.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return No(s,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(n,o){n.setData("Text",o.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:Q.supportPointer!==!1&&"PointerEvent"in window&&!kn,emptyInsertThreshold:5};Fn.initializePlugins(this,s,r);for(var t in r)!(t in a)&&(a[t]=r[t]);Fo(a);for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this));this.nativeDraggable=a.forceFallback?!1:au,this.nativeDraggable&&(this.options.touchStartThreshold=1),a.supportPointer?fe(s,"pointerdown",this._onTapStart):(fe(s,"mousedown",this._onTapStart),fe(s,"touchstart",this._onTapStart)),this.nativeDraggable&&(fe(s,"dragover",this),fe(s,"dragenter",this)),li.push(this.el),a.store&&a.store.get&&this.sort(a.store.get(this)||[]),at(this,nu())}Q.prototype={constructor:Q,_isOutsideThisEl:function(a){!this.el.contains(a)&&a!==this.el&&(Jt=null)},_getDirection:function(a,r){return typeof this.options.direction=="function"?this.options.direction.call(this,a,r,B):this.options.direction},_onTapStart:function(a){if(a.cancelable){var r=this,t=this.el,e=this.options,i=e.preventOnFilter,n=a.type,o=a.touches&&a.touches[0]||a.pointerType&&a.pointerType==="touch"&&a,l=(o||a).target,u=a.target.shadowRoot&&(a.path&&a.path[0]||a.composedPath&&a.composedPath()[0])||l,c=e.filter;if(mu(t),!B&&!(/mousedown|pointerdown/.test(n)&&a.button!==0||e.disabled)&&!u.isContentEditable&&!(!this.nativeDraggable&&kn&&l&&l.tagName.toUpperCase()==="SELECT")&&(l=ft(l,e.draggable,t,!1),!(l&&l.animated)&&ti!==l)){if(sn=De(l),An=De(l,e.draggable),typeof c=="function"){if(c.call(this,a,l,this)){ze({sortable:r,rootEl:u,name:"filter",targetEl:l,toEl:t,fromEl:t}),Je("filter",r,{evt:a}),i&&a.cancelable&&a.preventDefault();return}}else if(c&&(c=c.split(",").some(function(f){if(f=ft(u,f.trim(),t,!1),f)return ze({sortable:r,rootEl:f,name:"filter",targetEl:l,fromEl:t,toEl:t}),Je("filter",r,{evt:a}),!0}),c)){i&&a.cancelable&&a.preventDefault();return}e.handle&&!ft(u,e.handle,t,!1)||this._prepareDragStart(a,o,l)}}},_prepareDragStart:function(a,r,t){var e=this,i=e.el,n=e.options,o=i.ownerDocument,l;if(t&&!B&&t.parentNode===i){var u=we(t);if(Ie=i,B=t,Oe=B.parentNode,Ht=B.nextSibling,ti=t,jn=n.group,Q.dragged=B,_t={target:B,clientX:(r||a).clientX,clientY:(r||a).clientY},Ur=_t.clientX-u.left,jr=_t.clientY-u.top,this._lastX=(r||a).clientX,this._lastY=(r||a).clientY,B.style["will-change"]="all",l=function(){if(Je("delayEnded",e,{evt:a}),Q.eventCanceled){e._onDrop();return}e._disableDelayedDragEvents(),!Nr&&e.nativeDraggable&&(B.draggable=!0),e._triggerDragStart(a,r),ze({sortable:e,name:"choose",originalEvent:a}),Pe(B,n.chosenClass,!0)},n.ignore.split(",").forEach(function(c){Do(B,c.trim(),Fi)}),fe(o,"dragover",Bt),fe(o,"mousemove",Bt),fe(o,"touchmove",Bt),fe(o,"mouseup",e._onDrop),fe(o,"touchend",e._onDrop),fe(o,"touchcancel",e._onDrop),Nr&&this.nativeDraggable&&(this.options.touchStartThreshold=4,B.draggable=!0),Je("delayStart",this,{evt:a}),n.delay&&(!n.delayOnTouchOnly||r)&&(!this.nativeDraggable||!(Nn||It))){if(Q.eventCanceled){this._onDrop();return}fe(o,"mouseup",e._disableDelayedDrag),fe(o,"touchend",e._disableDelayedDrag),fe(o,"touchcancel",e._disableDelayedDrag),fe(o,"mousemove",e._delayedDragTouchMoveHandler),fe(o,"touchmove",e._delayedDragTouchMoveHandler),n.supportPointer&&fe(o,"pointermove",e._delayedDragTouchMoveHandler),e._dragStartTimer=setTimeout(l,n.delay)}else l()}},_delayedDragTouchMoveHandler:function(a){var r=a.touches?a.touches[0]:a;Math.max(Math.abs(r.clientX-this._lastX),Math.abs(r.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){B&&Fi(B),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var a=this.el.ownerDocument;ue(a,"mouseup",this._disableDelayedDrag),ue(a,"touchend",this._disableDelayedDrag),ue(a,"touchcancel",this._disableDelayedDrag),ue(a,"mousemove",this._delayedDragTouchMoveHandler),ue(a,"touchmove",this._delayedDragTouchMoveHandler),ue(a,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(a,r){r=r||a.pointerType=="touch"&&a,!this.nativeDraggable||r?this.options.supportPointer?fe(document,"pointermove",this._onTouchMove):r?fe(document,"touchmove",this._onTouchMove):fe(document,"mousemove",this._onTouchMove):(fe(B,"dragend",this),fe(Ie,"dragstart",this._onDragStart));try{document.selection?ii(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(a,r){if(on=!1,Ie&&B){Je("dragStarted",this,{evt:r}),this.nativeDraggable&&fe(document,"dragover",uu);var t=this.options;!a&&Pe(B,t.dragClass,!1),Pe(B,t.ghostClass,!0),Q.active=this,a&&this._appendGhost(),ze({sortable:this,name:"start",originalEvent:r})}else this._nulling()},_emulateDragOver:function(){if(ut){this._lastX=ut.clientX,this._lastY=ut.clientY,_o();for(var a=document.elementFromPoint(ut.clientX,ut.clientY),r=a;a&&a.shadowRoot&&(a=a.shadowRoot.elementFromPoint(ut.clientX,ut.clientY),a!==r);)r=a;if(B.parentNode[We]._isOutsideThisEl(a),r)do{if(r[We]){var t=void 0;if(t=r[We]._onDragOver({clientX:ut.clientX,clientY:ut.clientY,target:a,rootEl:r}),t&&!this.options.dragoverBubble)break}a=r}while(r=r.parentNode);Bo()}},_onTouchMove:function(a){if(_t){var r=this.options,t=r.fallbackTolerance,e=r.fallbackOffset,i=a.touches?a.touches[0]:a,n=se&&Gt(se,!0),o=se&&n&&n.a,l=se&&n&&n.d,u=Vn&&Ve&&Br(Ve),c=(i.clientX-_t.clientX+e.x)/(o||1)+(u?u[0]-Ni[0]:0)/(o||1),f=(i.clientY-_t.clientY+e.y)/(l||1)+(u?u[1]-Ni[1]:0)/(l||1);if(!Q.active&&!on){if(t&&Math.max(Math.abs(i.clientX-this._lastX),Math.abs(i.clientY-this._lastY))<t)return;this._onDragStart(a,!0)}if(se){n?(n.e+=c-(Ri||0),n.f+=f-(Mi||0)):n={a:1,b:0,c:0,d:1,e:c,f};var d="matrix(".concat(n.a,",").concat(n.b,",").concat(n.c,",").concat(n.d,",").concat(n.e,",").concat(n.f,")");W(se,"webkitTransform",d),W(se,"mozTransform",d),W(se,"msTransform",d),W(se,"transform",d),Ri=c,Mi=f,ut=i}a.cancelable&&a.preventDefault()}},_appendGhost:function(){if(!se){var a=this.options.fallbackOnBody?document.body:Ie,r=we(B,!0,Vn,!0,a),t=this.options;if(Vn){for(Ve=a;W(Ve,"position")==="static"&&W(Ve,"transform")==="none"&&Ve!==document;)Ve=Ve.parentNode;Ve!==document.body&&Ve!==document.documentElement?(Ve===document&&(Ve=mt()),r.top+=Ve.scrollTop,r.left+=Ve.scrollLeft):Ve=mt(),Ni=Br(Ve)}se=B.cloneNode(!0),Pe(se,t.ghostClass,!1),Pe(se,t.fallbackClass,!0),Pe(se,t.dragClass,!0),W(se,"transition",""),W(se,"transform",""),W(se,"box-sizing","border-box"),W(se,"margin",0),W(se,"top",r.top),W(se,"left",r.left),W(se,"width",r.width),W(se,"height",r.height),W(se,"opacity","0.8"),W(se,"position",Vn?"absolute":"fixed"),W(se,"zIndex","100000"),W(se,"pointerEvents","none"),Q.ghost=se,a.appendChild(se),W(se,"transform-origin",Ur/parseInt(se.style.width)*100+"% "+jr/parseInt(se.style.height)*100+"%")}},_onDragStart:function(a,r){var t=this,e=a.dataTransfer,i=t.options;if(Je("dragStart",this,{evt:a}),Q.eventCanceled){this._onDrop();return}Je("setupClone",this),Q.eventCanceled||(Ae=pr(B),Ae.draggable=!1,Ae.style["will-change"]="",this._hideClone(),Pe(Ae,this.options.chosenClass,!1),Q.clone=Ae),t.cloneId=ii(function(){Je("clone",t),!Q.eventCanceled&&(t.options.removeCloneOnHide||Ie.insertBefore(Ae,B),t._hideClone(),ze({sortable:t,name:"clone"}))}),!r&&Pe(B,i.dragClass,!0),r?(si=!0,t._loopId=setInterval(t._emulateDragOver,50)):(ue(document,"mouseup",t._onDrop),ue(document,"touchend",t._onDrop),ue(document,"touchcancel",t._onDrop),e&&(e.effectAllowed="move",i.setData&&i.setData.call(t,e,B)),fe(document,"drop",t),W(B,"transform","translateZ(0)")),on=!0,t._dragStartId=ii(t._dragStarted.bind(t,r,a)),fe(document,"selectstart",t),xn=!0,kn&&W(document.body,"user-select","none")},_onDragOver:function(a){var r=this.el,t=a.target,e,i,n,o=this.options,l=o.group,u=Q.active,c=jn===l,f=o.sort,d=je||u,h,g=this,p=!1;if(nr)return;function m(de,me){Je(de,g,yt({evt:a,isOwner:c,axis:h?"vertical":"horizontal",revert:n,dragRect:e,targetRect:i,canSort:f,fromSortable:d,target:t,completed:b,onMove:function(Se,Te){return Wn(Ie,r,B,e,Se,we(Se),a,Te)},changed:S},me))}function y(){m("dragOverAnimationCapture"),g.captureAnimationState(),g!==d&&d.captureAnimationState()}function b(de){return m("dragOverCompleted",{insertion:de}),de&&(c?u._hideClone():u._showClone(g),g!==d&&(Pe(B,je?je.options.ghostClass:u.options.ghostClass,!1),Pe(B,o.ghostClass,!0)),je!==g&&g!==Q.active?je=g:g===Q.active&&je&&(je=null),d===g&&(g._ignoreWhileAnimating=t),g.animateAll(function(){m("dragOverAnimationComplete"),g._ignoreWhileAnimating=null}),g!==d&&(d.animateAll(),d._ignoreWhileAnimating=null)),(t===B&&!B.animated||t===r&&!t.animated)&&(Jt=null),!o.dragoverBubble&&!a.rootEl&&t!==document&&(B.parentNode[We]._isOutsideThisEl(a.target),!de&&Bt(a)),!o.dragoverBubble&&a.stopPropagation&&a.stopPropagation(),p=!0}function S(){et=De(B),Ot=De(B,o.draggable),ze({sortable:g,name:"change",toEl:r,newIndex:et,newDraggableIndex:Ot,originalEvent:a})}if(a.preventDefault!==void 0&&a.cancelable&&a.preventDefault(),t=ft(t,o.draggable,r,!0),m("dragOver"),Q.eventCanceled)return p;if(B.contains(a.target)||t.animated&&t.animatingX&&t.animatingY||g._ignoreWhileAnimating===t)return b(!1);if(si=!1,u&&!o.disabled&&(c?f||(n=Oe!==Ie):je===this||(this.lastPutMode=jn.checkPull(this,u,B,a))&&l.checkPut(this,u,B,a))){if(h=this._getDirection(a,t)==="vertical",e=we(B),m("dragOverValid"),Q.eventCanceled)return p;if(n)return Oe=Ie,y(),this._hideClone(),m("revert"),Q.eventCanceled||(Ht?Ie.insertBefore(B,Ht):Ie.appendChild(B)),b(!0);var E=vr(r,o.draggable);if(!E||hu(a,h,this)&&!E.animated){if(E===B)return b(!1);if(E&&r===a.target&&(t=E),t&&(i=we(t)),Wn(Ie,r,B,e,t,i,a,!!t)!==!1)return y(),r.appendChild(B),Oe=r,S(),b(!0)}else if(E&&du(a,h,this)){var I=un(r,0,o,!0);if(I===B)return b(!1);if(t=I,i=we(t),Wn(Ie,r,B,e,t,i,a,!1)!==!1)return y(),r.insertBefore(B,I),Oe=r,S(),b(!0)}else if(t.parentNode===r){i=we(t);var T=0,D,_=B.parentNode!==r,k=!su(B.animated&&B.toRect||e,t.animated&&t.toRect||i,h),O=h?"top":"left",H=_r(t,"top","top")||_r(B,"top","top"),z=H?H.scrollTop:void 0;Jt!==t&&(D=i[O],Ln=!1,Gn=!k&&o.invertSwap||_),T=gu(a,t,i,h,k?1:o.swapThreshold,o.invertedSwapThreshold==null?o.swapThreshold:o.invertedSwapThreshold,Gn,Jt===t);var L;if(T!==0){var N=De(B);do N-=T,L=Oe.children[N];while(L&&(W(L,"display")==="none"||L===se))}if(T===0||L===t)return b(!1);Jt=t,Dn=T;var q=t.nextElementSibling,j=!1;j=T===1;var $=Wn(Ie,r,B,e,t,i,a,j);if($!==!1)return($===1||$===-1)&&(j=$===1),nr=!0,setTimeout(fu,30),y(),j&&!q?r.appendChild(B):t.parentNode.insertBefore(B,j?q:t),H&&Ro(H,0,z-H.scrollTop),Oe=B.parentNode,D!==void 0&&!Gn&&(ni=Math.abs(D-we(t)[O])),S(),b(!0)}if(r.contains(B))return b(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){ue(document,"mousemove",this._onTouchMove),ue(document,"touchmove",this._onTouchMove),ue(document,"pointermove",this._onTouchMove),ue(document,"dragover",Bt),ue(document,"mousemove",Bt),ue(document,"touchmove",Bt)},_offUpEvents:function(){var a=this.el.ownerDocument;ue(a,"mouseup",this._onDrop),ue(a,"touchend",this._onDrop),ue(a,"pointerup",this._onDrop),ue(a,"touchcancel",this._onDrop),ue(document,"selectstart",this)},_onDrop:function(a){var r=this.el,t=this.options;if(et=De(B),Ot=De(B,t.draggable),Je("drop",this,{evt:a}),Oe=B&&B.parentNode,et=De(B),Ot=De(B,t.draggable),Q.eventCanceled){this._nulling();return}on=!1,Gn=!1,Ln=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),ir(this.cloneId),ir(this._dragStartId),this.nativeDraggable&&(ue(document,"drop",this),ue(r,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),kn&&W(document.body,"user-select",""),W(B,"transform",""),a&&(xn&&(a.cancelable&&a.preventDefault(),!t.dropBubble&&a.stopPropagation()),se&&se.parentNode&&se.parentNode.removeChild(se),(Ie===Oe||je&&je.lastPutMode!=="clone")&&Ae&&Ae.parentNode&&Ae.parentNode.removeChild(Ae),B&&(this.nativeDraggable&&ue(B,"dragend",this),Fi(B),B.style["will-change"]="",xn&&!on&&Pe(B,je?je.options.ghostClass:this.options.ghostClass,!1),Pe(B,this.options.chosenClass,!1),ze({sortable:this,name:"unchoose",toEl:Oe,newIndex:null,newDraggableIndex:null,originalEvent:a}),Ie!==Oe?(et>=0&&(ze({rootEl:Oe,name:"add",toEl:Oe,fromEl:Ie,originalEvent:a}),ze({sortable:this,name:"remove",toEl:Oe,originalEvent:a}),ze({rootEl:Oe,name:"sort",toEl:Oe,fromEl:Ie,originalEvent:a}),ze({sortable:this,name:"sort",toEl:Oe,originalEvent:a})),je&&je.save()):et!==sn&&et>=0&&(ze({sortable:this,name:"update",toEl:Oe,originalEvent:a}),ze({sortable:this,name:"sort",toEl:Oe,originalEvent:a})),Q.active&&((et==null||et===-1)&&(et=sn,Ot=An),ze({sortable:this,name:"end",toEl:Oe,originalEvent:a}),this.save()))),this._nulling()},_nulling:function(){Je("nulling",this),Ie=B=Oe=se=Ht=Ae=ti=At=_t=ut=xn=et=Ot=sn=An=Jt=Dn=je=jn=Q.dragged=Q.ghost=Q.clone=Q.active=null,ui.forEach(function(a){a.checked=!0}),ui.length=Ri=Mi=0},handleEvent:function(a){switch(a.type){case"drop":case"dragend":this._onDrop(a);break;case"dragenter":case"dragover":B&&(this._onDragOver(a),cu(a));break;case"selectstart":a.preventDefault();break}},toArray:function(){for(var a=[],r,t=this.el.children,e=0,i=t.length,n=this.options;e<i;e++)r=t[e],ft(r,n.draggable,this.el,!1)&&a.push(r.getAttribute(n.dataIdAttr)||pu(r));return a},sort:function(a,r){var t={},e=this.el;this.toArray().forEach(function(i,n){var o=e.children[n];ft(o,this.options.draggable,e,!1)&&(t[i]=o)},this),r&&this.captureAnimationState(),a.forEach(function(i){t[i]&&(e.removeChild(t[i]),e.appendChild(t[i]))}),r&&this.animateAll()},save:function(){var a=this.options.store;a&&a.set&&a.set(this)},closest:function(a,r){return ft(a,r||this.options.draggable,this.el,!1)},option:function(a,r){var t=this.options;if(r===void 0)return t[a];var e=Fn.modifyOption(this,a,r);typeof e<"u"?t[a]=e:t[a]=r,a==="group"&&Fo(t)},destroy:function(){Je("destroy",this);var a=this.el;a[We]=null,ue(a,"mousedown",this._onTapStart),ue(a,"touchstart",this._onTapStart),ue(a,"pointerdown",this._onTapStart),this.nativeDraggable&&(ue(a,"dragover",this),ue(a,"dragenter",this)),Array.prototype.forEach.call(a.querySelectorAll("[draggable]"),function(r){r.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),li.splice(li.indexOf(this.el),1),this.el=a=null},_hideClone:function(){if(!At){if(Je("hideClone",this),Q.eventCanceled)return;W(Ae,"display","none"),this.options.removeCloneOnHide&&Ae.parentNode&&Ae.parentNode.removeChild(Ae),At=!0}},_showClone:function(a){if(a.lastPutMode!=="clone"){this._hideClone();return}if(At){if(Je("showClone",this),Q.eventCanceled)return;B.parentNode==Ie&&!this.options.group.revertClone?Ie.insertBefore(Ae,B):Ht?Ie.insertBefore(Ae,Ht):Ie.appendChild(Ae),this.options.group.revertClone&&this.animate(B,Ae),W(Ae,"display",""),At=!1}}};function cu(s){s.dataTransfer&&(s.dataTransfer.dropEffect="move"),s.cancelable&&s.preventDefault()}function Wn(s,a,r,t,e,i,n,o){var l,u=s[We],c=u.options.onMove,f;return window.CustomEvent&&!It&&!Nn?l=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(l=document.createEvent("Event"),l.initEvent("move",!0,!0)),l.to=a,l.from=s,l.dragged=r,l.draggedRect=t,l.related=e||a,l.relatedRect=i||we(a),l.willInsertAfter=o,l.originalEvent=n,s.dispatchEvent(l),c&&(f=c.call(u,l,n)),f}function Fi(s){s.draggable=!1}function fu(){nr=!1}function du(s,a,r){var t=we(un(r.el,0,r.options,!0)),e=10;return a?s.clientX<t.left-e||s.clientY<t.top&&s.clientX<t.right:s.clientY<t.top-e||s.clientY<t.bottom&&s.clientX<t.left}function hu(s,a,r){var t=we(vr(r.el,r.options.draggable)),e=10;return a?s.clientX>t.right+e||s.clientX<=t.right&&s.clientY>t.bottom&&s.clientX>=t.left:s.clientX>t.right&&s.clientY>t.top||s.clientX<=t.right&&s.clientY>t.bottom+e}function gu(s,a,r,t,e,i,n,o){var l=t?s.clientY:s.clientX,u=t?r.height:r.width,c=t?r.top:r.left,f=t?r.bottom:r.right,d=!1;if(!n){if(o&&ni<u*e){if(!Ln&&(Dn===1?l>c+u*i/2:l<f-u*i/2)&&(Ln=!0),Ln)d=!0;else if(Dn===1?l<c+ni:l>f-ni)return-Dn}else if(l>c+u*(1-e)/2&&l<f-u*(1-e)/2)return vu(a)}return d=d||n,d&&(l<c+u*i/2||l>f-u*i/2)?l>c+u/2?1:-1:0}function vu(s){return De(B)<De(s)?1:-1}function pu(s){for(var a=s.tagName+s.className+s.src+s.href+s.textContent,r=a.length,t=0;r--;)t+=a.charCodeAt(r);return t.toString(36)}function mu(s){ui.length=0;for(var a=s.getElementsByTagName("input"),r=a.length;r--;){var t=a[r];t.checked&&ui.push(t)}}function ii(s){return setTimeout(s,0)}function ir(s){return clearTimeout(s)}xi&&fe(document,"touchmove",function(s){(Q.active||on)&&s.cancelable&&s.preventDefault()});Q.utils={on:fe,off:ue,css:W,find:Do,is:function(a,r){return!!ft(a,r,a,!1)},extend:eu,throttle:Lo,closest:ft,toggleClass:Pe,clone:pr,index:De,nextTick:ii,cancelNextTick:ir,detectDirection:No,getChild:un};Q.get=function(s){return s[We]};Q.mount=function(){for(var s=arguments.length,a=new Array(s),r=0;r<s;r++)a[r]=arguments[r];a[0].constructor===Array&&(a=a[0]),a.forEach(function(t){if(!t.prototype||!t.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(t));t.utils&&(Q.utils=yt(yt({},Q.utils),t.utils)),Fn.mount(t)})};Q.create=function(s,a){return new Q(s,a)};Q.version=Jl;var Be=[],In,rr,or=!1,_i,Bi,ci,wn;function yu(){function s(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var a in this)a.charAt(0)==="_"&&typeof this[a]=="function"&&(this[a]=this[a].bind(this))}return s.prototype={dragStarted:function(r){var t=r.originalEvent;this.sortable.nativeDraggable?fe(document,"dragover",this._handleAutoScroll):this.options.supportPointer?fe(document,"pointermove",this._handleFallbackAutoScroll):t.touches?fe(document,"touchmove",this._handleFallbackAutoScroll):fe(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(r){var t=r.originalEvent;!this.options.dragOverBubble&&!t.rootEl&&this._handleAutoScroll(t)},drop:function(){this.sortable.nativeDraggable?ue(document,"dragover",this._handleAutoScroll):(ue(document,"pointermove",this._handleFallbackAutoScroll),ue(document,"touchmove",this._handleFallbackAutoScroll),ue(document,"mousemove",this._handleFallbackAutoScroll)),Vr(),ri(),tu()},nulling:function(){ci=rr=In=or=wn=_i=Bi=null,Be.length=0},_handleFallbackAutoScroll:function(r){this._handleAutoScroll(r,!0)},_handleAutoScroll:function(r,t){var e=this,i=(r.touches?r.touches[0]:r).clientX,n=(r.touches?r.touches[0]:r).clientY,o=document.elementFromPoint(i,n);if(ci=r,t||this.options.forceAutoScrollFallback||Nn||It||kn){Hi(r,this.options,o,t);var l=Dt(o,!0);or&&(!wn||i!==_i||n!==Bi)&&(wn&&Vr(),wn=setInterval(function(){var u=Dt(document.elementFromPoint(i,n),!0);u!==l&&(l=u,ri()),Hi(r,e.options,u,t)},10),_i=i,Bi=n)}else{if(!this.options.bubbleScroll||Dt(o,!0)===mt()){ri();return}Hi(r,this.options,Dt(o,!1),!1)}}},at(s,{pluginName:"scroll",initializeByDefault:!0})}function ri(){Be.forEach(function(s){clearInterval(s.pid)}),Be=[]}function Vr(){clearInterval(wn)}var Hi=Lo(function(s,a,r,t){if(a.scroll){var e=(s.touches?s.touches[0]:s).clientX,i=(s.touches?s.touches[0]:s).clientY,n=a.scrollSensitivity,o=a.scrollSpeed,l=mt(),u=!1,c;rr!==r&&(rr=r,ri(),In=a.scroll,c=a.scrollFn,In===!0&&(In=Dt(r,!0)));var f=0,d=In;do{var h=d,g=we(h),p=g.top,m=g.bottom,y=g.left,b=g.right,S=g.width,E=g.height,I=void 0,T=void 0,D=h.scrollWidth,_=h.scrollHeight,k=W(h),O=h.scrollLeft,H=h.scrollTop;h===l?(I=S<D&&(k.overflowX==="auto"||k.overflowX==="scroll"||k.overflowX==="visible"),T=E<_&&(k.overflowY==="auto"||k.overflowY==="scroll"||k.overflowY==="visible")):(I=S<D&&(k.overflowX==="auto"||k.overflowX==="scroll"),T=E<_&&(k.overflowY==="auto"||k.overflowY==="scroll"));var z=I&&(Math.abs(b-e)<=n&&O+S<D)-(Math.abs(y-e)<=n&&!!O),L=T&&(Math.abs(m-i)<=n&&H+E<_)-(Math.abs(p-i)<=n&&!!H);if(!Be[f])for(var N=0;N<=f;N++)Be[N]||(Be[N]={});(Be[f].vx!=z||Be[f].vy!=L||Be[f].el!==h)&&(Be[f].el=h,Be[f].vx=z,Be[f].vy=L,clearInterval(Be[f].pid),(z!=0||L!=0)&&(u=!0,Be[f].pid=setInterval((function(){t&&this.layer===0&&Q.active._onTouchMove(ci);var q=Be[this.layer].vy?Be[this.layer].vy*o:0,j=Be[this.layer].vx?Be[this.layer].vx*o:0;typeof c=="function"&&c.call(Q.dragged.parentNode[We],j,q,s,ci,Be[this.layer].el)!=="continue"||Ro(Be[this.layer].el,j,q)}).bind({layer:f}),24))),f++}while(a.bubbleScroll&&d!==l&&(d=Dt(d,!1)));or=u}},30),Ho=function(a){var r=a.originalEvent,t=a.putSortable,e=a.dragEl,i=a.activeSortable,n=a.dispatchSortableEvent,o=a.hideGhostForTarget,l=a.unhideGhostForTarget;if(r){var u=t||i;o();var c=r.changedTouches&&r.changedTouches.length?r.changedTouches[0]:r,f=document.elementFromPoint(c.clientX,c.clientY);l(),u&&!u.el.contains(f)&&(n("spill"),this.onSpill({dragEl:e,putSortable:t}))}};function mr(){}mr.prototype={startIndex:null,dragStart:function(a){var r=a.oldDraggableIndex;this.startIndex=r},onSpill:function(a){var r=a.dragEl,t=a.putSortable;this.sortable.captureAnimationState(),t&&t.captureAnimationState();var e=un(this.sortable.el,this.startIndex,this.options);e?this.sortable.el.insertBefore(r,e):this.sortable.el.appendChild(r),this.sortable.animateAll(),t&&t.animateAll()},drop:Ho};at(mr,{pluginName:"revertOnSpill"});function yr(){}yr.prototype={onSpill:function(a){var r=a.dragEl,t=a.putSortable,e=t||this.sortable;e.captureAnimationState(),r.parentNode&&r.parentNode.removeChild(r),e.animateAll()},drop:Ho};at(yr,{pluginName:"removeOnSpill"});var rt;function bu(){function s(){this.defaults={swapClass:"sortable-swap-highlight"}}return s.prototype={dragStart:function(r){var t=r.dragEl;rt=t},dragOverValid:function(r){var t=r.completed,e=r.target,i=r.onMove,n=r.activeSortable,o=r.changed,l=r.cancel;if(n.options.swap){var u=this.sortable.el,c=this.options;if(e&&e!==u){var f=rt;i(e)!==!1?(Pe(e,c.swapClass,!0),rt=e):rt=null,f&&f!==rt&&Pe(f,c.swapClass,!1)}o(),t(!0),l()}},drop:function(r){var t=r.activeSortable,e=r.putSortable,i=r.dragEl,n=e||this.sortable,o=this.options;rt&&Pe(rt,o.swapClass,!1),rt&&(o.swap||e&&e.options.swap)&&i!==rt&&(n.captureAnimationState(),n!==t&&t.captureAnimationState(),Su(i,rt),n.animateAll(),n!==t&&t.animateAll())},nulling:function(){rt=null}},at(s,{pluginName:"swap",eventProperties:function(){return{swapItem:rt}}})}function Su(s,a){var r=s.parentNode,t=a.parentNode,e,i;!r||!t||r.isEqualNode(a)||t.isEqualNode(s)||(e=De(s),i=De(a),r.isEqualNode(t)&&e<i&&i++,r.insertBefore(a,r.children[e]),t.insertBefore(s,t.children[i]))}var ie=[],qe=[],yn,ct,bn=!1,Ze=!1,Zt=!1,Ee,Sn,Kn;function Eu(){function s(a){for(var r in this)r.charAt(0)==="_"&&typeof this[r]=="function"&&(this[r]=this[r].bind(this));a.options.supportPointer?fe(document,"pointerup",this._deselectMultiDrag):(fe(document,"mouseup",this._deselectMultiDrag),fe(document,"touchend",this._deselectMultiDrag)),fe(document,"keydown",this._checkKeyDown),fe(document,"keyup",this._checkKeyUp),this.defaults={selectedClass:"sortable-selected",multiDragKey:null,setData:function(e,i){var n="";ie.length&&ct===a?ie.forEach(function(o,l){n+=(l?", ":"")+o.textContent}):n=i.textContent,e.setData("Text",n)}}}return s.prototype={multiDragKeyDown:!1,isMultiDrag:!1,delayStartGlobal:function(r){var t=r.dragEl;Ee=t},delayEnded:function(){this.isMultiDrag=~ie.indexOf(Ee)},setupClone:function(r){var t=r.sortable,e=r.cancel;if(this.isMultiDrag){for(var i=0;i<ie.length;i++)qe.push(pr(ie[i])),qe[i].sortableIndex=ie[i].sortableIndex,qe[i].draggable=!1,qe[i].style["will-change"]="",Pe(qe[i],this.options.selectedClass,!1),ie[i]===Ee&&Pe(qe[i],this.options.chosenClass,!1);t._hideClone(),e()}},clone:function(r){var t=r.sortable,e=r.rootEl,i=r.dispatchSortableEvent,n=r.cancel;this.isMultiDrag&&(this.options.removeCloneOnHide||ie.length&&ct===t&&(Wr(!0,e),i("clone"),n()))},showClone:function(r){var t=r.cloneNowShown,e=r.rootEl,i=r.cancel;this.isMultiDrag&&(Wr(!1,e),qe.forEach(function(n){W(n,"display","")}),t(),Kn=!1,i())},hideClone:function(r){var t=this;r.sortable;var e=r.cloneNowHidden,i=r.cancel;this.isMultiDrag&&(qe.forEach(function(n){W(n,"display","none"),t.options.removeCloneOnHide&&n.parentNode&&n.parentNode.removeChild(n)}),e(),Kn=!0,i())},dragStartGlobal:function(r){r.sortable,!this.isMultiDrag&&ct&&ct.multiDrag._deselectMultiDrag(),ie.forEach(function(t){t.sortableIndex=De(t)}),ie=ie.sort(function(t,e){return t.sortableIndex-e.sortableIndex}),Zt=!0},dragStarted:function(r){var t=this,e=r.sortable;if(this.isMultiDrag){if(this.options.sort&&(e.captureAnimationState(),this.options.animation)){ie.forEach(function(n){n!==Ee&&W(n,"position","absolute")});var i=we(Ee,!1,!0,!0);ie.forEach(function(n){n!==Ee&&Hr(n,i)}),Ze=!0,bn=!0}e.animateAll(function(){Ze=!1,bn=!1,t.options.animation&&ie.forEach(function(n){Di(n)}),t.options.sort&&zn()})}},dragOver:function(r){var t=r.target,e=r.completed,i=r.cancel;Ze&&~ie.indexOf(t)&&(e(!1),i())},revert:function(r){var t=r.fromSortable,e=r.rootEl,i=r.sortable,n=r.dragRect;ie.length>1&&(ie.forEach(function(o){i.addAnimationState({target:o,rect:Ze?we(o):n}),Di(o),o.fromRect=n,t.removeAnimationState(o)}),Ze=!1,Cu(!this.options.removeCloneOnHide,e))},dragOverCompleted:function(r){var t=r.sortable,e=r.isOwner,i=r.insertion,n=r.activeSortable,o=r.parentEl,l=r.putSortable,u=this.options;if(i){if(e&&n._hideClone(),bn=!1,u.animation&&ie.length>1&&(Ze||!e&&!n.options.sort&&!l)){var c=we(Ee,!1,!0,!0);ie.forEach(function(d){d!==Ee&&(Hr(d,c),o.appendChild(d))}),Ze=!0}if(!e)if(Ze||zn(),ie.length>1){var f=Kn;n._showClone(t),n.options.animation&&!Kn&&f&&qe.forEach(function(d){n.addAnimationState({target:d,rect:Sn}),d.fromRect=Sn,d.thisAnimationDuration=null})}else n._showClone(t)}},dragOverAnimationCapture:function(r){var t=r.dragRect,e=r.isOwner,i=r.activeSortable;if(ie.forEach(function(o){o.thisAnimationDuration=null}),i.options.animation&&!e&&i.multiDrag.isMultiDrag){Sn=at({},t);var n=Gt(Ee,!0);Sn.top-=n.f,Sn.left-=n.e}},dragOverAnimationComplete:function(){Ze&&(Ze=!1,zn())},drop:function(r){var t=r.originalEvent,e=r.rootEl,i=r.parentEl,n=r.sortable,o=r.dispatchSortableEvent,l=r.oldIndex,u=r.putSortable,c=u||this.sortable;if(t){var f=this.options,d=i.children;if(!Zt)if(f.multiDragKey&&!this.multiDragKeyDown&&this._deselectMultiDrag(),Pe(Ee,f.selectedClass,!~ie.indexOf(Ee)),~ie.indexOf(Ee))ie.splice(ie.indexOf(Ee),1),yn=null,Tn({sortable:n,rootEl:e,name:"deselect",targetEl:Ee,originalEvt:t});else{if(ie.push(Ee),Tn({sortable:n,rootEl:e,name:"select",targetEl:Ee,originalEvt:t}),t.shiftKey&&yn&&n.el.contains(yn)){var h=De(yn),g=De(Ee);if(~h&&~g&&h!==g){var p,m;for(g>h?(m=h,p=g):(m=g,p=h+1);m<p;m++)~ie.indexOf(d[m])||(Pe(d[m],f.selectedClass,!0),ie.push(d[m]),Tn({sortable:n,rootEl:e,name:"select",targetEl:d[m],originalEvt:t}))}}else yn=Ee;ct=c}if(Zt&&this.isMultiDrag){if(Ze=!1,(i[We].options.sort||i!==e)&&ie.length>1){var y=we(Ee),b=De(Ee,":not(."+this.options.selectedClass+")");if(!bn&&f.animation&&(Ee.thisAnimationDuration=null),c.captureAnimationState(),!bn&&(f.animation&&(Ee.fromRect=y,ie.forEach(function(E){if(E.thisAnimationDuration=null,E!==Ee){var I=Ze?we(E):y;E.fromRect=I,c.addAnimationState({target:E,rect:I})}})),zn(),ie.forEach(function(E){d[b]?i.insertBefore(E,d[b]):i.appendChild(E),b++}),l===De(Ee))){var S=!1;ie.forEach(function(E){if(E.sortableIndex!==De(E)){S=!0;return}}),S&&o("update")}ie.forEach(function(E){Di(E)}),c.animateAll()}ct=c}(e===i||u&&u.lastPutMode!=="clone")&&qe.forEach(function(E){E.parentNode&&E.parentNode.removeChild(E)})}},nullingGlobal:function(){this.isMultiDrag=Zt=!1,qe.length=0},destroyGlobal:function(){this._deselectMultiDrag(),ue(document,"pointerup",this._deselectMultiDrag),ue(document,"mouseup",this._deselectMultiDrag),ue(document,"touchend",this._deselectMultiDrag),ue(document,"keydown",this._checkKeyDown),ue(document,"keyup",this._checkKeyUp)},_deselectMultiDrag:function(r){if(!(typeof Zt<"u"&&Zt)&&ct===this.sortable&&!(r&&ft(r.target,this.options.draggable,this.sortable.el,!1))&&!(r&&r.button!==0))for(;ie.length;){var t=ie[0];Pe(t,this.options.selectedClass,!1),ie.shift(),Tn({sortable:this.sortable,rootEl:this.sortable.el,name:"deselect",targetEl:t,originalEvt:r})}},_checkKeyDown:function(r){r.key===this.options.multiDragKey&&(this.multiDragKeyDown=!0)},_checkKeyUp:function(r){r.key===this.options.multiDragKey&&(this.multiDragKeyDown=!1)}},at(s,{pluginName:"multiDrag",utils:{select:function(r){var t=r.parentNode[We];!t||!t.options.multiDrag||~ie.indexOf(r)||(ct&&ct!==t&&(ct.multiDrag._deselectMultiDrag(),ct=t),Pe(r,t.options.selectedClass,!0),ie.push(r))},deselect:function(r){var t=r.parentNode[We],e=ie.indexOf(r);!t||!t.options.multiDrag||!~e||(Pe(r,t.options.selectedClass,!1),ie.splice(e,1))}},eventProperties:function(){var r=this,t=[],e=[];return ie.forEach(function(i){t.push({multiDragElement:i,index:i.sortableIndex});var n;Ze&&i!==Ee?n=-1:Ze?n=De(i,":not(."+r.options.selectedClass+")"):n=De(i),e.push({multiDragElement:i,index:n})}),{items:Kl(ie),clones:[].concat(qe),oldIndicies:t,newIndicies:e}},optionListeners:{multiDragKey:function(r){return r=r.toLowerCase(),r==="ctrl"?r="Control":r.length>1&&(r=r.charAt(0).toUpperCase()+r.substr(1)),r}}})}function Cu(s,a){ie.forEach(function(r,t){var e=a.children[r.sortableIndex+(s?Number(t):0)];e?a.insertBefore(r,e):a.appendChild(r)})}function Wr(s,a){qe.forEach(function(r,t){var e=a.children[r.sortableIndex+(s?Number(t):0)];e?a.insertBefore(r,e):a.appendChild(r)})}function zn(){ie.forEach(function(s){s!==Ee&&s.parentNode&&s.parentNode.removeChild(s)})}Q.mount(new yu);Q.mount(yr,mr);const Tu=Object.freeze(Object.defineProperty({__proto__:null,MultiDrag:Eu,Sortable:Q,Swap:bu,default:Q},Symbol.toStringTag,{value:"Module"})),xu=Po(Tu);(function(s,a){(function(t,e){s.exports=e(jl,xu)})(typeof self<"u"?self:wo,function(r,t){return function(e){var i={};function n(o){if(i[o])return i[o].exports;var l=i[o]={i:o,l:!1,exports:{}};return e[o].call(l.exports,l,l.exports,n),l.l=!0,l.exports}return n.m=e,n.c=i,n.d=function(o,l,u){n.o(o,l)||Object.defineProperty(o,l,{enumerable:!0,get:u})},n.r=function(o){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})},n.t=function(o,l){if(l&1&&(o=n(o)),l&8||l&4&&typeof o=="object"&&o&&o.__esModule)return o;var u=Object.create(null);if(n.r(u),Object.defineProperty(u,"default",{enumerable:!0,value:o}),l&2&&typeof o!="string")for(var c in o)n.d(u,c,(function(f){return o[f]}).bind(null,c));return u},n.n=function(o){var l=o&&o.__esModule?function(){return o.default}:function(){return o};return n.d(l,"a",l),l},n.o=function(o,l){return Object.prototype.hasOwnProperty.call(o,l)},n.p="",n(n.s="fb15")}({"00ee":function(e,i,n){var o=n("b622"),l=o("toStringTag"),u={};u[l]="z",e.exports=String(u)==="[object z]"},"0366":function(e,i,n){var o=n("1c0b");e.exports=function(l,u,c){if(o(l),u===void 0)return l;switch(c){case 0:return function(){return l.call(u)};case 1:return function(f){return l.call(u,f)};case 2:return function(f,d){return l.call(u,f,d)};case 3:return function(f,d,h){return l.call(u,f,d,h)}}return function(){return l.apply(u,arguments)}}},"057f":function(e,i,n){var o=n("fc6a"),l=n("241c").f,u={}.toString,c=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],f=function(d){try{return l(d)}catch{return c.slice()}};e.exports.f=function(h){return c&&u.call(h)=="[object Window]"?f(h):l(o(h))}},"06cf":function(e,i,n){var o=n("83ab"),l=n("d1e7"),u=n("5c6c"),c=n("fc6a"),f=n("c04e"),d=n("5135"),h=n("0cfb"),g=Object.getOwnPropertyDescriptor;i.f=o?g:function(m,y){if(m=c(m),y=f(y,!0),h)try{return g(m,y)}catch{}if(d(m,y))return u(!l.f.call(m,y),m[y])}},"0cfb":function(e,i,n){var o=n("83ab"),l=n("d039"),u=n("cc12");e.exports=!o&&!l(function(){return Object.defineProperty(u("div"),"a",{get:function(){return 7}}).a!=7})},"13d5":function(e,i,n){var o=n("23e7"),l=n("d58f").left,u=n("a640"),c=n("ae40"),f=u("reduce"),d=c("reduce",{1:0});o({target:"Array",proto:!0,forced:!f||!d},{reduce:function(g){return l(this,g,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"14c3":function(e,i,n){var o=n("c6b6"),l=n("9263");e.exports=function(u,c){var f=u.exec;if(typeof f=="function"){var d=f.call(u,c);if(typeof d!="object")throw TypeError("RegExp exec method returned something other than an Object or null");return d}if(o(u)!=="RegExp")throw TypeError("RegExp#exec called on incompatible receiver");return l.call(u,c)}},"159b":function(e,i,n){var o=n("da84"),l=n("fdbc"),u=n("17c2"),c=n("9112");for(var f in l){var d=o[f],h=d&&d.prototype;if(h&&h.forEach!==u)try{c(h,"forEach",u)}catch{h.forEach=u}}},"17c2":function(e,i,n){var o=n("b727").forEach,l=n("a640"),u=n("ae40"),c=l("forEach"),f=u("forEach");e.exports=!c||!f?function(h){return o(this,h,arguments.length>1?arguments[1]:void 0)}:[].forEach},"1be4":function(e,i,n){var o=n("d066");e.exports=o("document","documentElement")},"1c0b":function(e,i){e.exports=function(n){if(typeof n!="function")throw TypeError(String(n)+" is not a function");return n}},"1c7e":function(e,i,n){var o=n("b622"),l=o("iterator"),u=!1;try{var c=0,f={next:function(){return{done:!!c++}},return:function(){u=!0}};f[l]=function(){return this},Array.from(f,function(){throw 2})}catch{}e.exports=function(d,h){if(!h&&!u)return!1;var g=!1;try{var p={};p[l]=function(){return{next:function(){return{done:g=!0}}}},d(p)}catch{}return g}},"1d80":function(e,i){e.exports=function(n){if(n==null)throw TypeError("Can't call method on "+n);return n}},"1dde":function(e,i,n){var o=n("d039"),l=n("b622"),u=n("2d00"),c=l("species");e.exports=function(f){return u>=51||!o(function(){var d=[],h=d.constructor={};return h[c]=function(){return{foo:1}},d[f](Boolean).foo!==1})}},"23cb":function(e,i,n){var o=n("a691"),l=Math.max,u=Math.min;e.exports=function(c,f){var d=o(c);return d<0?l(d+f,0):u(d,f)}},"23e7":function(e,i,n){var o=n("da84"),l=n("06cf").f,u=n("9112"),c=n("6eeb"),f=n("ce4e"),d=n("e893"),h=n("94ca");e.exports=function(g,p){var m=g.target,y=g.global,b=g.stat,S,E,I,T,D,_;if(y?E=o:b?E=o[m]||f(m,{}):E=(o[m]||{}).prototype,E)for(I in p){if(D=p[I],g.noTargetGet?(_=l(E,I),T=_&&_.value):T=E[I],S=h(y?I:m+(b?".":"#")+I,g.forced),!S&&T!==void 0){if(typeof D==typeof T)continue;d(D,T)}(g.sham||T&&T.sham)&&u(D,"sham",!0),c(E,I,D,g)}}},"241c":function(e,i,n){var o=n("ca84"),l=n("7839"),u=l.concat("length","prototype");i.f=Object.getOwnPropertyNames||function(f){return o(f,u)}},"25f0":function(e,i,n){var o=n("6eeb"),l=n("825a"),u=n("d039"),c=n("ad6d"),f="toString",d=RegExp.prototype,h=d[f],g=u(function(){return h.call({source:"a",flags:"b"})!="/a/b"}),p=h.name!=f;(g||p)&&o(RegExp.prototype,f,function(){var y=l(this),b=String(y.source),S=y.flags,E=String(S===void 0&&y instanceof RegExp&&!("flags"in d)?c.call(y):S);return"/"+b+"/"+E},{unsafe:!0})},"2ca0":function(e,i,n){var o=n("23e7"),l=n("06cf").f,u=n("50c4"),c=n("5a34"),f=n("1d80"),d=n("ab13"),h=n("c430"),g="".startsWith,p=Math.min,m=d("startsWith"),y=!h&&!m&&!!function(){var b=l(String.prototype,"startsWith");return b&&!b.writable}();o({target:"String",proto:!0,forced:!y&&!m},{startsWith:function(S){var E=String(f(this));c(S);var I=u(p(arguments.length>1?arguments[1]:void 0,E.length)),T=String(S);return g?g.call(E,T,I):E.slice(I,I+T.length)===T}})},"2d00":function(e,i,n){var o=n("da84"),l=n("342f"),u=o.process,c=u&&u.versions,f=c&&c.v8,d,h;f?(d=f.split("."),h=d[0]+d[1]):l&&(d=l.match(/Edge\/(\d+)/),(!d||d[1]>=74)&&(d=l.match(/Chrome\/(\d+)/),d&&(h=d[1]))),e.exports=h&&+h},"342f":function(e,i,n){var o=n("d066");e.exports=o("navigator","userAgent")||""},"35a1":function(e,i,n){var o=n("f5df"),l=n("3f8c"),u=n("b622"),c=u("iterator");e.exports=function(f){if(f!=null)return f[c]||f["@@iterator"]||l[o(f)]}},"37e8":function(e,i,n){var o=n("83ab"),l=n("9bf2"),u=n("825a"),c=n("df75");e.exports=o?Object.defineProperties:function(d,h){u(d);for(var g=c(h),p=g.length,m=0,y;p>m;)l.f(d,y=g[m++],h[y]);return d}},"3bbe":function(e,i,n){var o=n("861d");e.exports=function(l){if(!o(l)&&l!==null)throw TypeError("Can't set "+String(l)+" as a prototype");return l}},"3ca3":function(e,i,n){var o=n("6547").charAt,l=n("69f3"),u=n("7dd0"),c="String Iterator",f=l.set,d=l.getterFor(c);u(String,"String",function(h){f(this,{type:c,string:String(h),index:0})},function(){var g=d(this),p=g.string,m=g.index,y;return m>=p.length?{value:void 0,done:!0}:(y=o(p,m),g.index+=y.length,{value:y,done:!1})})},"3f8c":function(e,i){e.exports={}},4160:function(e,i,n){var o=n("23e7"),l=n("17c2");o({target:"Array",proto:!0,forced:[].forEach!=l},{forEach:l})},"428f":function(e,i,n){var o=n("da84");e.exports=o},"44ad":function(e,i,n){var o=n("d039"),l=n("c6b6"),u="".split;e.exports=o(function(){return!Object("z").propertyIsEnumerable(0)})?function(c){return l(c)=="String"?u.call(c,""):Object(c)}:Object},"44d2":function(e,i,n){var o=n("b622"),l=n("7c73"),u=n("9bf2"),c=o("unscopables"),f=Array.prototype;f[c]==null&&u.f(f,c,{configurable:!0,value:l(null)}),e.exports=function(d){f[c][d]=!0}},"44e7":function(e,i,n){var o=n("861d"),l=n("c6b6"),u=n("b622"),c=u("match");e.exports=function(f){var d;return o(f)&&((d=f[c])!==void 0?!!d:l(f)=="RegExp")}},4930:function(e,i,n){var o=n("d039");e.exports=!!Object.getOwnPropertySymbols&&!o(function(){return!String(Symbol())})},"4d64":function(e,i,n){var o=n("fc6a"),l=n("50c4"),u=n("23cb"),c=function(f){return function(d,h,g){var p=o(d),m=l(p.length),y=u(g,m),b;if(f&&h!=h){for(;m>y;)if(b=p[y++],b!=b)return!0}else for(;m>y;y++)if((f||y in p)&&p[y]===h)return f||y||0;return!f&&-1}};e.exports={includes:c(!0),indexOf:c(!1)}},"4de4":function(e,i,n){var o=n("23e7"),l=n("b727").filter,u=n("1dde"),c=n("ae40"),f=u("filter"),d=c("filter");o({target:"Array",proto:!0,forced:!f||!d},{filter:function(g){return l(this,g,arguments.length>1?arguments[1]:void 0)}})},"4df4":function(e,i,n){var o=n("0366"),l=n("7b0b"),u=n("9bdd"),c=n("e95a"),f=n("50c4"),d=n("8418"),h=n("35a1");e.exports=function(p){var m=l(p),y=typeof this=="function"?this:Array,b=arguments.length,S=b>1?arguments[1]:void 0,E=S!==void 0,I=h(m),T=0,D,_,k,O,H,z;if(E&&(S=o(S,b>2?arguments[2]:void 0,2)),I!=null&&!(y==Array&&c(I)))for(O=I.call(m),H=O.next,_=new y;!(k=H.call(O)).done;T++)z=E?u(O,S,[k.value,T],!0):k.value,d(_,T,z);else for(D=f(m.length),_=new y(D);D>T;T++)z=E?S(m[T],T):m[T],d(_,T,z);return _.length=T,_}},"4fad":function(e,i,n){var o=n("23e7"),l=n("6f53").entries;o({target:"Object",stat:!0},{entries:function(c){return l(c)}})},"50c4":function(e,i,n){var o=n("a691"),l=Math.min;e.exports=function(u){return u>0?l(o(u),9007199254740991):0}},5135:function(e,i){var n={}.hasOwnProperty;e.exports=function(o,l){return n.call(o,l)}},5319:function(e,i,n){var o=n("d784"),l=n("825a"),u=n("7b0b"),c=n("50c4"),f=n("a691"),d=n("1d80"),h=n("8aa5"),g=n("14c3"),p=Math.max,m=Math.min,y=Math.floor,b=/\$([$&'`]|\d\d?|<[^>]*>)/g,S=/\$([$&'`]|\d\d?)/g,E=function(I){return I===void 0?I:String(I)};o("replace",2,function(I,T,D,_){var k=_.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,O=_.REPLACE_KEEPS_$0,H=k?"$":"$0";return[function(N,q){var j=d(this),$=N==null?void 0:N[I];return $!==void 0?$.call(N,j,q):T.call(String(j),N,q)},function(L,N){if(!k&&O||typeof N=="string"&&N.indexOf(H)===-1){var q=D(T,L,this,N);if(q.done)return q.value}var j=l(L),$=String(this),de=typeof N=="function";de||(N=String(N));var me=j.global;if(me){var Fe=j.unicode;j.lastIndex=0}for(var Se=[];;){var Te=g(j,$);if(Te===null||(Se.push(Te),!me))break;var ke=String(Te[0]);ke===""&&(j.lastIndex=h($,c(j.lastIndex),Fe))}for(var G="",J=0,F=0;F<Se.length;F++){Te=Se[F];for(var U=String(Te[0]),xe=p(m(f(Te.index),$.length),0),He=[],Le=1;Le<Te.length;Le++)He.push(E(Te[Le]));var Qe=Te.groups;if(de){var Ye=[U].concat(He,xe,$);Qe!==void 0&&Ye.push(Qe);var Re=String(N.apply(void 0,Ye))}else Re=z(U,$,xe,He,Qe,N);xe>=J&&(G+=$.slice(J,xe)+Re,J=xe+U.length)}return G+$.slice(J)}];function z(L,N,q,j,$,de){var me=q+L.length,Fe=j.length,Se=S;return $!==void 0&&($=u($),Se=b),T.call(de,Se,function(Te,ke){var G;switch(ke.charAt(0)){case"$":return"$";case"&":return L;case"`":return N.slice(0,q);case"'":return N.slice(me);case"<":G=$[ke.slice(1,-1)];break;default:var J=+ke;if(J===0)return Te;if(J>Fe){var F=y(J/10);return F===0?Te:F<=Fe?j[F-1]===void 0?ke.charAt(1):j[F-1]+ke.charAt(1):Te}G=j[J-1]}return G===void 0?"":G})}})},5692:function(e,i,n){var o=n("c430"),l=n("c6cd");(e.exports=function(u,c){return l[u]||(l[u]=c!==void 0?c:{})})("versions",[]).push({version:"3.6.5",mode:o?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},"56ef":function(e,i,n){var o=n("d066"),l=n("241c"),u=n("7418"),c=n("825a");e.exports=o("Reflect","ownKeys")||function(d){var h=l.f(c(d)),g=u.f;return g?h.concat(g(d)):h}},"5a34":function(e,i,n){var o=n("44e7");e.exports=function(l){if(o(l))throw TypeError("The method doesn't accept regular expressions");return l}},"5c6c":function(e,i){e.exports=function(n,o){return{enumerable:!(n&1),configurable:!(n&2),writable:!(n&4),value:o}}},"5db7":function(e,i,n){var o=n("23e7"),l=n("a2bf"),u=n("7b0b"),c=n("50c4"),f=n("1c0b"),d=n("65f0");o({target:"Array",proto:!0},{flatMap:function(g){var p=u(this),m=c(p.length),y;return f(g),y=d(p,0),y.length=l(y,p,p,m,0,1,g,arguments.length>1?arguments[1]:void 0),y}})},6547:function(e,i,n){var o=n("a691"),l=n("1d80"),u=function(c){return function(f,d){var h=String(l(f)),g=o(d),p=h.length,m,y;return g<0||g>=p?c?"":void 0:(m=h.charCodeAt(g),m<55296||m>56319||g+1===p||(y=h.charCodeAt(g+1))<56320||y>57343?c?h.charAt(g):m:c?h.slice(g,g+2):(m-55296<<10)+(y-56320)+65536)}};e.exports={codeAt:u(!1),charAt:u(!0)}},"65f0":function(e,i,n){var o=n("861d"),l=n("e8b5"),u=n("b622"),c=u("species");e.exports=function(f,d){var h;return l(f)&&(h=f.constructor,typeof h=="function"&&(h===Array||l(h.prototype))?h=void 0:o(h)&&(h=h[c],h===null&&(h=void 0))),new(h===void 0?Array:h)(d===0?0:d)}},"69f3":function(e,i,n){var o=n("7f9a"),l=n("da84"),u=n("861d"),c=n("9112"),f=n("5135"),d=n("f772"),h=n("d012"),g=l.WeakMap,p,m,y,b=function(k){return y(k)?m(k):p(k,{})},S=function(k){return function(O){var H;if(!u(O)||(H=m(O)).type!==k)throw TypeError("Incompatible receiver, "+k+" required");return H}};if(o){var E=new g,I=E.get,T=E.has,D=E.set;p=function(k,O){return D.call(E,k,O),O},m=function(k){return I.call(E,k)||{}},y=function(k){return T.call(E,k)}}else{var _=d("state");h[_]=!0,p=function(k,O){return c(k,_,O),O},m=function(k){return f(k,_)?k[_]:{}},y=function(k){return f(k,_)}}e.exports={set:p,get:m,has:y,enforce:b,getterFor:S}},"6eeb":function(e,i,n){var o=n("da84"),l=n("9112"),u=n("5135"),c=n("ce4e"),f=n("8925"),d=n("69f3"),h=d.get,g=d.enforce,p=String(String).split("String");(e.exports=function(m,y,b,S){var E=S?!!S.unsafe:!1,I=S?!!S.enumerable:!1,T=S?!!S.noTargetGet:!1;if(typeof b=="function"&&(typeof y=="string"&&!u(b,"name")&&l(b,"name",y),g(b).source=p.join(typeof y=="string"?y:"")),m===o){I?m[y]=b:c(y,b);return}else E?!T&&m[y]&&(I=!0):delete m[y];I?m[y]=b:l(m,y,b)})(Function.prototype,"toString",function(){return typeof this=="function"&&h(this).source||f(this)})},"6f53":function(e,i,n){var o=n("83ab"),l=n("df75"),u=n("fc6a"),c=n("d1e7").f,f=function(d){return function(h){for(var g=u(h),p=l(g),m=p.length,y=0,b=[],S;m>y;)S=p[y++],(!o||c.call(g,S))&&b.push(d?[S,g[S]]:g[S]);return b}};e.exports={entries:f(!0),values:f(!1)}},"73d9":function(e,i,n){var o=n("44d2");o("flatMap")},7418:function(e,i){i.f=Object.getOwnPropertySymbols},"746f":function(e,i,n){var o=n("428f"),l=n("5135"),u=n("e538"),c=n("9bf2").f;e.exports=function(f){var d=o.Symbol||(o.Symbol={});l(d,f)||c(d,f,{value:u.f(f)})}},7839:function(e,i){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},"7b0b":function(e,i,n){var o=n("1d80");e.exports=function(l){return Object(o(l))}},"7c73":function(e,i,n){var o=n("825a"),l=n("37e8"),u=n("7839"),c=n("d012"),f=n("1be4"),d=n("cc12"),h=n("f772"),g=">",p="<",m="prototype",y="script",b=h("IE_PROTO"),S=function(){},E=function(k){return p+y+g+k+p+"/"+y+g},I=function(k){k.write(E("")),k.close();var O=k.parentWindow.Object;return k=null,O},T=function(){var k=d("iframe"),O="java"+y+":",H;return k.style.display="none",f.appendChild(k),k.src=String(O),H=k.contentWindow.document,H.open(),H.write(E("document.F=Object")),H.close(),H.F},D,_=function(){try{D=document.domain&&new ActiveXObject("htmlfile")}catch{}_=D?I(D):T();for(var k=u.length;k--;)delete _[m][u[k]];return _()};c[b]=!0,e.exports=Object.create||function(O,H){var z;return O!==null?(S[m]=o(O),z=new S,S[m]=null,z[b]=O):z=_(),H===void 0?z:l(z,H)}},"7dd0":function(e,i,n){var o=n("23e7"),l=n("9ed3"),u=n("e163"),c=n("d2bb"),f=n("d44e"),d=n("9112"),h=n("6eeb"),g=n("b622"),p=n("c430"),m=n("3f8c"),y=n("ae93"),b=y.IteratorPrototype,S=y.BUGGY_SAFARI_ITERATORS,E=g("iterator"),I="keys",T="values",D="entries",_=function(){return this};e.exports=function(k,O,H,z,L,N,q){l(H,O,z);var j=function(F){if(F===L&&Se)return Se;if(!S&&F in me)return me[F];switch(F){case I:return function(){return new H(this,F)};case T:return function(){return new H(this,F)};case D:return function(){return new H(this,F)}}return function(){return new H(this)}},$=O+" Iterator",de=!1,me=k.prototype,Fe=me[E]||me["@@iterator"]||L&&me[L],Se=!S&&Fe||j(L),Te=O=="Array"&&me.entries||Fe,ke,G,J;if(Te&&(ke=u(Te.call(new k)),b!==Object.prototype&&ke.next&&(!p&&u(ke)!==b&&(c?c(ke,b):typeof ke[E]!="function"&&d(ke,E,_)),f(ke,$,!0,!0),p&&(m[$]=_))),L==T&&Fe&&Fe.name!==T&&(de=!0,Se=function(){return Fe.call(this)}),(!p||q)&&me[E]!==Se&&d(me,E,Se),m[O]=Se,L)if(G={values:j(T),keys:N?Se:j(I),entries:j(D)},q)for(J in G)(S||de||!(J in me))&&h(me,J,G[J]);else o({target:O,proto:!0,forced:S||de},G);return G}},"7f9a":function(e,i,n){var o=n("da84"),l=n("8925"),u=o.WeakMap;e.exports=typeof u=="function"&&/native code/.test(l(u))},"825a":function(e,i,n){var o=n("861d");e.exports=function(l){if(!o(l))throw TypeError(String(l)+" is not an object");return l}},"83ab":function(e,i,n){var o=n("d039");e.exports=!o(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},8418:function(e,i,n){var o=n("c04e"),l=n("9bf2"),u=n("5c6c");e.exports=function(c,f,d){var h=o(f);h in c?l.f(c,h,u(0,d)):c[h]=d}},"861d":function(e,i){e.exports=function(n){return typeof n=="object"?n!==null:typeof n=="function"}},8875:function(e,i,n){var o,l,u;(function(c,f){l=[],o=f,u=typeof o=="function"?o.apply(i,l):o,u!==void 0&&(e.exports=u)})(typeof self<"u"?self:this,function(){function c(){var f=Object.getOwnPropertyDescriptor(document,"currentScript");if(!f&&"currentScript"in document&&document.currentScript||f&&f.get!==c&&document.currentScript)return document.currentScript;try{throw new Error}catch(D){var d=/.*at [^(]*\((.*):(.+):(.+)\)$/ig,h=/@([^@]*):(\d+):(\d+)\s*$/ig,g=d.exec(D.stack)||h.exec(D.stack),p=g&&g[1]||!1,m=g&&g[2]||!1,y=document.location.href.replace(document.location.hash,""),b,S,E,I=document.getElementsByTagName("script");p===y&&(b=document.documentElement.outerHTML,S=new RegExp("(?:[^\\n]+?\\n){0,"+(m-2)+"}[^<]*<script>([\\d\\D]*?)<\\/script>[\\d\\D]*","i"),E=b.replace(S,"$1").trim());for(var T=0;T<I.length;T++)if(I[T].readyState==="interactive"||I[T].src===p||p===y&&I[T].innerHTML&&I[T].innerHTML.trim()===E)return I[T];return null}}return c})},8925:function(e,i,n){var o=n("c6cd"),l=Function.toString;typeof o.inspectSource!="function"&&(o.inspectSource=function(u){return l.call(u)}),e.exports=o.inspectSource},"8aa5":function(e,i,n){var o=n("6547").charAt;e.exports=function(l,u,c){return u+(c?o(l,u).length:1)}},"8bbf":function(e,i){e.exports=r},"90e3":function(e,i){var n=0,o=Math.random();e.exports=function(l){return"Symbol("+String(l===void 0?"":l)+")_"+(++n+o).toString(36)}},9112:function(e,i,n){var o=n("83ab"),l=n("9bf2"),u=n("5c6c");e.exports=o?function(c,f,d){return l.f(c,f,u(1,d))}:function(c,f,d){return c[f]=d,c}},9263:function(e,i,n){var o=n("ad6d"),l=n("9f7f"),u=RegExp.prototype.exec,c=String.prototype.replace,f=u,d=function(){var m=/a/,y=/b*/g;return u.call(m,"a"),u.call(y,"a"),m.lastIndex!==0||y.lastIndex!==0}(),h=l.UNSUPPORTED_Y||l.BROKEN_CARET,g=/()??/.exec("")[1]!==void 0,p=d||g||h;p&&(f=function(y){var b=this,S,E,I,T,D=h&&b.sticky,_=o.call(b),k=b.source,O=0,H=y;return D&&(_=_.replace("y",""),_.indexOf("g")===-1&&(_+="g"),H=String(y).slice(b.lastIndex),b.lastIndex>0&&(!b.multiline||b.multiline&&y[b.lastIndex-1]!==`
`)&&(k="(?: "+k+")",H=" "+H,O++),E=new RegExp("^(?:"+k+")",_)),g&&(E=new RegExp("^"+k+"$(?!\\s)",_)),d&&(S=b.lastIndex),I=u.call(D?E:b,H),D?I?(I.input=I.input.slice(O),I[0]=I[0].slice(O),I.index=b.lastIndex,b.lastIndex+=I[0].length):b.lastIndex=0:d&&I&&(b.lastIndex=b.global?I.index+I[0].length:S),g&&I&&I.length>1&&c.call(I[0],E,function(){for(T=1;T<arguments.length-2;T++)arguments[T]===void 0&&(I[T]=void 0)}),I}),e.exports=f},"94ca":function(e,i,n){var o=n("d039"),l=/#|\.prototype\./,u=function(g,p){var m=f[c(g)];return m==h?!0:m==d?!1:typeof p=="function"?o(p):!!p},c=u.normalize=function(g){return String(g).replace(l,".").toLowerCase()},f=u.data={},d=u.NATIVE="N",h=u.POLYFILL="P";e.exports=u},"99af":function(e,i,n){var o=n("23e7"),l=n("d039"),u=n("e8b5"),c=n("861d"),f=n("7b0b"),d=n("50c4"),h=n("8418"),g=n("65f0"),p=n("1dde"),m=n("b622"),y=n("2d00"),b=m("isConcatSpreadable"),S=9007199254740991,E="Maximum allowed index exceeded",I=y>=51||!l(function(){var k=[];return k[b]=!1,k.concat()[0]!==k}),T=p("concat"),D=function(k){if(!c(k))return!1;var O=k[b];return O!==void 0?!!O:u(k)},_=!I||!T;o({target:"Array",proto:!0,forced:_},{concat:function(O){var H=f(this),z=g(H,0),L=0,N,q,j,$,de;for(N=-1,j=arguments.length;N<j;N++)if(de=N===-1?H:arguments[N],D(de)){if($=d(de.length),L+$>S)throw TypeError(E);for(q=0;q<$;q++,L++)q in de&&h(z,L,de[q])}else{if(L>=S)throw TypeError(E);h(z,L++,de)}return z.length=L,z}})},"9bdd":function(e,i,n){var o=n("825a");e.exports=function(l,u,c,f){try{return f?u(o(c)[0],c[1]):u(c)}catch(h){var d=l.return;throw d!==void 0&&o(d.call(l)),h}}},"9bf2":function(e,i,n){var o=n("83ab"),l=n("0cfb"),u=n("825a"),c=n("c04e"),f=Object.defineProperty;i.f=o?f:function(h,g,p){if(u(h),g=c(g,!0),u(p),l)try{return f(h,g,p)}catch{}if("get"in p||"set"in p)throw TypeError("Accessors not supported");return"value"in p&&(h[g]=p.value),h}},"9ed3":function(e,i,n){var o=n("ae93").IteratorPrototype,l=n("7c73"),u=n("5c6c"),c=n("d44e"),f=n("3f8c"),d=function(){return this};e.exports=function(h,g,p){var m=g+" Iterator";return h.prototype=l(o,{next:u(1,p)}),c(h,m,!1,!0),f[m]=d,h}},"9f7f":function(e,i,n){var o=n("d039");function l(u,c){return RegExp(u,c)}i.UNSUPPORTED_Y=o(function(){var u=l("a","y");return u.lastIndex=2,u.exec("abcd")!=null}),i.BROKEN_CARET=o(function(){var u=l("^r","gy");return u.lastIndex=2,u.exec("str")!=null})},a2bf:function(e,i,n){var o=n("e8b5"),l=n("50c4"),u=n("0366"),c=function(f,d,h,g,p,m,y,b){for(var S=p,E=0,I=y?u(y,b,3):!1,T;E<g;){if(E in h){if(T=I?I(h[E],E,d):h[E],m>0&&o(T))S=c(f,d,T,l(T.length),S,m-1)-1;else{if(S>=9007199254740991)throw TypeError("Exceed the acceptable array length");f[S]=T}S++}E++}return S};e.exports=c},a352:function(e,i){e.exports=t},a434:function(e,i,n){var o=n("23e7"),l=n("23cb"),u=n("a691"),c=n("50c4"),f=n("7b0b"),d=n("65f0"),h=n("8418"),g=n("1dde"),p=n("ae40"),m=g("splice"),y=p("splice",{ACCESSORS:!0,0:0,1:2}),b=Math.max,S=Math.min,E=9007199254740991,I="Maximum allowed length exceeded";o({target:"Array",proto:!0,forced:!m||!y},{splice:function(D,_){var k=f(this),O=c(k.length),H=l(D,O),z=arguments.length,L,N,q,j,$,de;if(z===0?L=N=0:z===1?(L=0,N=O-H):(L=z-2,N=S(b(u(_),0),O-H)),O+L-N>E)throw TypeError(I);for(q=d(k,N),j=0;j<N;j++)$=H+j,$ in k&&h(q,j,k[$]);if(q.length=N,L<N){for(j=H;j<O-N;j++)$=j+N,de=j+L,$ in k?k[de]=k[$]:delete k[de];for(j=O;j>O-N+L;j--)delete k[j-1]}else if(L>N)for(j=O-N;j>H;j--)$=j+N-1,de=j+L-1,$ in k?k[de]=k[$]:delete k[de];for(j=0;j<L;j++)k[j+H]=arguments[j+2];return k.length=O-N+L,q}})},a4d3:function(e,i,n){var o=n("23e7"),l=n("da84"),u=n("d066"),c=n("c430"),f=n("83ab"),d=n("4930"),h=n("fdbf"),g=n("d039"),p=n("5135"),m=n("e8b5"),y=n("861d"),b=n("825a"),S=n("7b0b"),E=n("fc6a"),I=n("c04e"),T=n("5c6c"),D=n("7c73"),_=n("df75"),k=n("241c"),O=n("057f"),H=n("7418"),z=n("06cf"),L=n("9bf2"),N=n("d1e7"),q=n("9112"),j=n("6eeb"),$=n("5692"),de=n("f772"),me=n("d012"),Fe=n("90e3"),Se=n("b622"),Te=n("e538"),ke=n("746f"),G=n("d44e"),J=n("69f3"),F=n("b727").forEach,U=de("hidden"),xe="Symbol",He="prototype",Le=Se("toPrimitive"),Qe=J.set,Ye=J.getterFor(xe),Re=Object[He],Ue=l.Symbol,Ft=u("JSON","stringify"),ht=z.f,gt=L.f,Hn=O.f,ki=N.f,lt=$("symbols"),wt=$("op-symbols"),Yt=$("string-to-symbol-registry"),dn=$("symbol-to-string-registry"),hn=$("wks"),gn=l.QObject,vn=!gn||!gn[He]||!gn[He].findChild,pn=f&&g(function(){return D(gt({},"a",{get:function(){return gt(this,"a",{value:7}).a}})).a!=7})?function(te,K,Z){var he=ht(Re,K);he&&delete Re[K],gt(te,K,Z),he&&te!==Re&&gt(Re,K,he)}:gt,mn=function(te,K){var Z=lt[te]=D(Ue[He]);return Qe(Z,{type:xe,tag:te,description:K}),f||(Z.description=K),Z},x=h?function(te){return typeof te=="symbol"}:function(te){return Object(te)instanceof Ue},C=function(K,Z,he){K===Re&&C(wt,Z,he),b(K);var ve=I(Z,!0);return b(he),p(lt,ve)?(he.enumerable?(p(K,U)&&K[U][ve]&&(K[U][ve]=!1),he=D(he,{enumerable:T(0,!1)})):(p(K,U)||gt(K,U,T(1,{})),K[U][ve]=!0),pn(K,ve,he)):gt(K,ve,he)},P=function(K,Z){b(K);var he=E(Z),ve=_(he).concat(ye(he));return F(ve,function(Xe){(!f||V.call(he,Xe))&&C(K,Xe,he[Xe])}),K},R=function(K,Z){return Z===void 0?D(K):P(D(K),Z)},V=function(K){var Z=I(K,!0),he=ki.call(this,Z);return this===Re&&p(lt,Z)&&!p(wt,Z)?!1:he||!p(this,Z)||!p(lt,Z)||p(this,U)&&this[U][Z]?he:!0},ee=function(K,Z){var he=E(K),ve=I(Z,!0);if(!(he===Re&&p(lt,ve)&&!p(wt,ve))){var Xe=ht(he,ve);return Xe&&p(lt,ve)&&!(p(he,U)&&he[U][ve])&&(Xe.enumerable=!0),Xe}},le=function(K){var Z=Hn(E(K)),he=[];return F(Z,function(ve){!p(lt,ve)&&!p(me,ve)&&he.push(ve)}),he},ye=function(K){var Z=K===Re,he=Hn(Z?wt:E(K)),ve=[];return F(he,function(Xe){p(lt,Xe)&&(!Z||p(Re,Xe))&&ve.push(lt[Xe])}),ve};if(d||(Ue=function(){if(this instanceof Ue)throw TypeError("Symbol is not a constructor");var K=!arguments.length||arguments[0]===void 0?void 0:String(arguments[0]),Z=Fe(K),he=function(ve){this===Re&&he.call(wt,ve),p(this,U)&&p(this[U],Z)&&(this[U][Z]=!1),pn(this,Z,T(1,ve))};return f&&vn&&pn(Re,Z,{configurable:!0,set:he}),mn(Z,K)},j(Ue[He],"toString",function(){return Ye(this).tag}),j(Ue,"withoutSetter",function(te){return mn(Fe(te),te)}),N.f=V,L.f=C,z.f=ee,k.f=O.f=le,H.f=ye,Te.f=function(te){return mn(Se(te),te)},f&&(gt(Ue[He],"description",{configurable:!0,get:function(){return Ye(this).description}}),c||j(Re,"propertyIsEnumerable",V,{unsafe:!0}))),o({global:!0,wrap:!0,forced:!d,sham:!d},{Symbol:Ue}),F(_(hn),function(te){ke(te)}),o({target:xe,stat:!0,forced:!d},{for:function(te){var K=String(te);if(p(Yt,K))return Yt[K];var Z=Ue(K);return Yt[K]=Z,dn[Z]=K,Z},keyFor:function(K){if(!x(K))throw TypeError(K+" is not a symbol");if(p(dn,K))return dn[K]},useSetter:function(){vn=!0},useSimple:function(){vn=!1}}),o({target:"Object",stat:!0,forced:!d,sham:!f},{create:R,defineProperty:C,defineProperties:P,getOwnPropertyDescriptor:ee}),o({target:"Object",stat:!0,forced:!d},{getOwnPropertyNames:le,getOwnPropertySymbols:ye}),o({target:"Object",stat:!0,forced:g(function(){H.f(1)})},{getOwnPropertySymbols:function(K){return H.f(S(K))}}),Ft){var Me=!d||g(function(){var te=Ue();return Ft([te])!="[null]"||Ft({a:te})!="{}"||Ft(Object(te))!="{}"});o({target:"JSON",stat:!0,forced:Me},{stringify:function(K,Z,he){for(var ve=[K],Xe=1,Oi;arguments.length>Xe;)ve.push(arguments[Xe++]);if(Oi=Z,!(!y(Z)&&K===void 0||x(K)))return m(Z)||(Z=function(fa,Un){if(typeof Oi=="function"&&(Un=Oi.call(this,fa,Un)),!x(Un))return Un}),ve[1]=Z,Ft.apply(null,ve)}})}Ue[He][Le]||q(Ue[He],Le,Ue[He].valueOf),G(Ue,xe),me[U]=!0},a630:function(e,i,n){var o=n("23e7"),l=n("4df4"),u=n("1c7e"),c=!u(function(f){Array.from(f)});o({target:"Array",stat:!0,forced:c},{from:l})},a640:function(e,i,n){var o=n("d039");e.exports=function(l,u){var c=[][l];return!!c&&o(function(){c.call(null,u||function(){throw 1},1)})}},a691:function(e,i){var n=Math.ceil,o=Math.floor;e.exports=function(l){return isNaN(l=+l)?0:(l>0?o:n)(l)}},ab13:function(e,i,n){var o=n("b622"),l=o("match");e.exports=function(u){var c=/./;try{"/./"[u](c)}catch{try{return c[l]=!1,"/./"[u](c)}catch{}}return!1}},ac1f:function(e,i,n){var o=n("23e7"),l=n("9263");o({target:"RegExp",proto:!0,forced:/./.exec!==l},{exec:l})},ad6d:function(e,i,n){var o=n("825a");e.exports=function(){var l=o(this),u="";return l.global&&(u+="g"),l.ignoreCase&&(u+="i"),l.multiline&&(u+="m"),l.dotAll&&(u+="s"),l.unicode&&(u+="u"),l.sticky&&(u+="y"),u}},ae40:function(e,i,n){var o=n("83ab"),l=n("d039"),u=n("5135"),c=Object.defineProperty,f={},d=function(h){throw h};e.exports=function(h,g){if(u(f,h))return f[h];g||(g={});var p=[][h],m=u(g,"ACCESSORS")?g.ACCESSORS:!1,y=u(g,0)?g[0]:d,b=u(g,1)?g[1]:void 0;return f[h]=!!p&&!l(function(){if(m&&!o)return!0;var S={length:-1};m?c(S,1,{enumerable:!0,get:d}):S[1]=1,p.call(S,y,b)})}},ae93:function(e,i,n){var o=n("e163"),l=n("9112"),u=n("5135"),c=n("b622"),f=n("c430"),d=c("iterator"),h=!1,g=function(){return this},p,m,y;[].keys&&(y=[].keys(),"next"in y?(m=o(o(y)),m!==Object.prototype&&(p=m)):h=!0),p==null&&(p={}),!f&&!u(p,d)&&l(p,d,g),e.exports={IteratorPrototype:p,BUGGY_SAFARI_ITERATORS:h}},b041:function(e,i,n){var o=n("00ee"),l=n("f5df");e.exports=o?{}.toString:function(){return"[object "+l(this)+"]"}},b0c0:function(e,i,n){var o=n("83ab"),l=n("9bf2").f,u=Function.prototype,c=u.toString,f=/^\s*function ([^ (]*)/,d="name";o&&!(d in u)&&l(u,d,{configurable:!0,get:function(){try{return c.call(this).match(f)[1]}catch{return""}}})},b622:function(e,i,n){var o=n("da84"),l=n("5692"),u=n("5135"),c=n("90e3"),f=n("4930"),d=n("fdbf"),h=l("wks"),g=o.Symbol,p=d?g:g&&g.withoutSetter||c;e.exports=function(m){return u(h,m)||(f&&u(g,m)?h[m]=g[m]:h[m]=p("Symbol."+m)),h[m]}},b64b:function(e,i,n){var o=n("23e7"),l=n("7b0b"),u=n("df75"),c=n("d039"),f=c(function(){u(1)});o({target:"Object",stat:!0,forced:f},{keys:function(h){return u(l(h))}})},b727:function(e,i,n){var o=n("0366"),l=n("44ad"),u=n("7b0b"),c=n("50c4"),f=n("65f0"),d=[].push,h=function(g){var p=g==1,m=g==2,y=g==3,b=g==4,S=g==6,E=g==5||S;return function(I,T,D,_){for(var k=u(I),O=l(k),H=o(T,D,3),z=c(O.length),L=0,N=_||f,q=p?N(I,z):m?N(I,0):void 0,j,$;z>L;L++)if((E||L in O)&&(j=O[L],$=H(j,L,k),g)){if(p)q[L]=$;else if($)switch(g){case 3:return!0;case 5:return j;case 6:return L;case 2:d.call(q,j)}else if(b)return!1}return S?-1:y||b?b:q}};e.exports={forEach:h(0),map:h(1),filter:h(2),some:h(3),every:h(4),find:h(5),findIndex:h(6)}},c04e:function(e,i,n){var o=n("861d");e.exports=function(l,u){if(!o(l))return l;var c,f;if(u&&typeof(c=l.toString)=="function"&&!o(f=c.call(l))||typeof(c=l.valueOf)=="function"&&!o(f=c.call(l))||!u&&typeof(c=l.toString)=="function"&&!o(f=c.call(l)))return f;throw TypeError("Can't convert object to primitive value")}},c430:function(e,i){e.exports=!1},c6b6:function(e,i){var n={}.toString;e.exports=function(o){return n.call(o).slice(8,-1)}},c6cd:function(e,i,n){var o=n("da84"),l=n("ce4e"),u="__core-js_shared__",c=o[u]||l(u,{});e.exports=c},c740:function(e,i,n){var o=n("23e7"),l=n("b727").findIndex,u=n("44d2"),c=n("ae40"),f="findIndex",d=!0,h=c(f);f in[]&&Array(1)[f](function(){d=!1}),o({target:"Array",proto:!0,forced:d||!h},{findIndex:function(p){return l(this,p,arguments.length>1?arguments[1]:void 0)}}),u(f)},c8ba:function(e,i){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch{typeof window=="object"&&(n=window)}e.exports=n},c975:function(e,i,n){var o=n("23e7"),l=n("4d64").indexOf,u=n("a640"),c=n("ae40"),f=[].indexOf,d=!!f&&1/[1].indexOf(1,-0)<0,h=u("indexOf"),g=c("indexOf",{ACCESSORS:!0,1:0});o({target:"Array",proto:!0,forced:d||!h||!g},{indexOf:function(m){return d?f.apply(this,arguments)||0:l(this,m,arguments.length>1?arguments[1]:void 0)}})},ca84:function(e,i,n){var o=n("5135"),l=n("fc6a"),u=n("4d64").indexOf,c=n("d012");e.exports=function(f,d){var h=l(f),g=0,p=[],m;for(m in h)!o(c,m)&&o(h,m)&&p.push(m);for(;d.length>g;)o(h,m=d[g++])&&(~u(p,m)||p.push(m));return p}},caad:function(e,i,n){var o=n("23e7"),l=n("4d64").includes,u=n("44d2"),c=n("ae40"),f=c("indexOf",{ACCESSORS:!0,1:0});o({target:"Array",proto:!0,forced:!f},{includes:function(h){return l(this,h,arguments.length>1?arguments[1]:void 0)}}),u("includes")},cc12:function(e,i,n){var o=n("da84"),l=n("861d"),u=o.document,c=l(u)&&l(u.createElement);e.exports=function(f){return c?u.createElement(f):{}}},ce4e:function(e,i,n){var o=n("da84"),l=n("9112");e.exports=function(u,c){try{l(o,u,c)}catch{o[u]=c}return c}},d012:function(e,i){e.exports={}},d039:function(e,i){e.exports=function(n){try{return!!n()}catch{return!0}}},d066:function(e,i,n){var o=n("428f"),l=n("da84"),u=function(c){return typeof c=="function"?c:void 0};e.exports=function(c,f){return arguments.length<2?u(o[c])||u(l[c]):o[c]&&o[c][f]||l[c]&&l[c][f]}},d1e7:function(e,i,n){var o={}.propertyIsEnumerable,l=Object.getOwnPropertyDescriptor,u=l&&!o.call({1:2},1);i.f=u?function(f){var d=l(this,f);return!!d&&d.enumerable}:o},d28b:function(e,i,n){var o=n("746f");o("iterator")},d2bb:function(e,i,n){var o=n("825a"),l=n("3bbe");e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var u=!1,c={},f;try{f=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,f.call(c,[]),u=c instanceof Array}catch{}return function(h,g){return o(h),l(g),u?f.call(h,g):h.__proto__=g,h}}():void 0)},d3b7:function(e,i,n){var o=n("00ee"),l=n("6eeb"),u=n("b041");o||l(Object.prototype,"toString",u,{unsafe:!0})},d44e:function(e,i,n){var o=n("9bf2").f,l=n("5135"),u=n("b622"),c=u("toStringTag");e.exports=function(f,d,h){f&&!l(f=h?f:f.prototype,c)&&o(f,c,{configurable:!0,value:d})}},d58f:function(e,i,n){var o=n("1c0b"),l=n("7b0b"),u=n("44ad"),c=n("50c4"),f=function(d){return function(h,g,p,m){o(g);var y=l(h),b=u(y),S=c(y.length),E=d?S-1:0,I=d?-1:1;if(p<2)for(;;){if(E in b){m=b[E],E+=I;break}if(E+=I,d?E<0:S<=E)throw TypeError("Reduce of empty array with no initial value")}for(;d?E>=0:S>E;E+=I)E in b&&(m=g(m,b[E],E,y));return m}};e.exports={left:f(!1),right:f(!0)}},d784:function(e,i,n){n("ac1f");var o=n("6eeb"),l=n("d039"),u=n("b622"),c=n("9263"),f=n("9112"),d=u("species"),h=!l(function(){var b=/./;return b.exec=function(){var S=[];return S.groups={a:"7"},S},"".replace(b,"$<a>")!=="7"}),g=function(){return"a".replace(/./,"$0")==="$0"}(),p=u("replace"),m=function(){return/./[p]?/./[p]("a","$0")==="":!1}(),y=!l(function(){var b=/(?:)/,S=b.exec;b.exec=function(){return S.apply(this,arguments)};var E="ab".split(b);return E.length!==2||E[0]!=="a"||E[1]!=="b"});e.exports=function(b,S,E,I){var T=u(b),D=!l(function(){var L={};return L[T]=function(){return 7},""[b](L)!=7}),_=D&&!l(function(){var L=!1,N=/a/;return b==="split"&&(N={},N.constructor={},N.constructor[d]=function(){return N},N.flags="",N[T]=/./[T]),N.exec=function(){return L=!0,null},N[T](""),!L});if(!D||!_||b==="replace"&&!(h&&g&&!m)||b==="split"&&!y){var k=/./[T],O=E(T,""[b],function(L,N,q,j,$){return N.exec===c?D&&!$?{done:!0,value:k.call(N,q,j)}:{done:!0,value:L.call(q,N,j)}:{done:!1}},{REPLACE_KEEPS_$0:g,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:m}),H=O[0],z=O[1];o(String.prototype,b,H),o(RegExp.prototype,T,S==2?function(L,N){return z.call(L,this,N)}:function(L){return z.call(L,this)})}I&&f(RegExp.prototype[T],"sham",!0)}},d81d:function(e,i,n){var o=n("23e7"),l=n("b727").map,u=n("1dde"),c=n("ae40"),f=u("map"),d=c("map");o({target:"Array",proto:!0,forced:!f||!d},{map:function(g){return l(this,g,arguments.length>1?arguments[1]:void 0)}})},da84:function(e,i,n){(function(o){var l=function(u){return u&&u.Math==Math&&u};e.exports=l(typeof globalThis=="object"&&globalThis)||l(typeof window=="object"&&window)||l(typeof self=="object"&&self)||l(typeof o=="object"&&o)||Function("return this")()}).call(this,n("c8ba"))},dbb4:function(e,i,n){var o=n("23e7"),l=n("83ab"),u=n("56ef"),c=n("fc6a"),f=n("06cf"),d=n("8418");o({target:"Object",stat:!0,sham:!l},{getOwnPropertyDescriptors:function(g){for(var p=c(g),m=f.f,y=u(p),b={},S=0,E,I;y.length>S;)I=m(p,E=y[S++]),I!==void 0&&d(b,E,I);return b}})},dbf1:function(e,i,n){(function(o){n.d(i,"a",function(){return u});function l(){return typeof window<"u"?window.console:o.console}var u=l()}).call(this,n("c8ba"))},ddb0:function(e,i,n){var o=n("da84"),l=n("fdbc"),u=n("e260"),c=n("9112"),f=n("b622"),d=f("iterator"),h=f("toStringTag"),g=u.values;for(var p in l){var m=o[p],y=m&&m.prototype;if(y){if(y[d]!==g)try{c(y,d,g)}catch{y[d]=g}if(y[h]||c(y,h,p),l[p]){for(var b in u)if(y[b]!==u[b])try{c(y,b,u[b])}catch{y[b]=u[b]}}}}},df75:function(e,i,n){var o=n("ca84"),l=n("7839");e.exports=Object.keys||function(c){return o(c,l)}},e01a:function(e,i,n){var o=n("23e7"),l=n("83ab"),u=n("da84"),c=n("5135"),f=n("861d"),d=n("9bf2").f,h=n("e893"),g=u.Symbol;if(l&&typeof g=="function"&&(!("description"in g.prototype)||g().description!==void 0)){var p={},m=function(){var T=arguments.length<1||arguments[0]===void 0?void 0:String(arguments[0]),D=this instanceof m?new g(T):T===void 0?g():g(T);return T===""&&(p[D]=!0),D};h(m,g);var y=m.prototype=g.prototype;y.constructor=m;var b=y.toString,S=String(g("test"))=="Symbol(test)",E=/^Symbol\((.*)\)[^)]+$/;d(y,"description",{configurable:!0,get:function(){var T=f(this)?this.valueOf():this,D=b.call(T);if(c(p,T))return"";var _=S?D.slice(7,-1):D.replace(E,"$1");return _===""?void 0:_}}),o({global:!0,forced:!0},{Symbol:m})}},e163:function(e,i,n){var o=n("5135"),l=n("7b0b"),u=n("f772"),c=n("e177"),f=u("IE_PROTO"),d=Object.prototype;e.exports=c?Object.getPrototypeOf:function(h){return h=l(h),o(h,f)?h[f]:typeof h.constructor=="function"&&h instanceof h.constructor?h.constructor.prototype:h instanceof Object?d:null}},e177:function(e,i,n){var o=n("d039");e.exports=!o(function(){function l(){}return l.prototype.constructor=null,Object.getPrototypeOf(new l)!==l.prototype})},e260:function(e,i,n){var o=n("fc6a"),l=n("44d2"),u=n("3f8c"),c=n("69f3"),f=n("7dd0"),d="Array Iterator",h=c.set,g=c.getterFor(d);e.exports=f(Array,"Array",function(p,m){h(this,{type:d,target:o(p),index:0,kind:m})},function(){var p=g(this),m=p.target,y=p.kind,b=p.index++;return!m||b>=m.length?(p.target=void 0,{value:void 0,done:!0}):y=="keys"?{value:b,done:!1}:y=="values"?{value:m[b],done:!1}:{value:[b,m[b]],done:!1}},"values"),u.Arguments=u.Array,l("keys"),l("values"),l("entries")},e439:function(e,i,n){var o=n("23e7"),l=n("d039"),u=n("fc6a"),c=n("06cf").f,f=n("83ab"),d=l(function(){c(1)}),h=!f||d;o({target:"Object",stat:!0,forced:h,sham:!f},{getOwnPropertyDescriptor:function(p,m){return c(u(p),m)}})},e538:function(e,i,n){var o=n("b622");i.f=o},e893:function(e,i,n){var o=n("5135"),l=n("56ef"),u=n("06cf"),c=n("9bf2");e.exports=function(f,d){for(var h=l(d),g=c.f,p=u.f,m=0;m<h.length;m++){var y=h[m];o(f,y)||g(f,y,p(d,y))}}},e8b5:function(e,i,n){var o=n("c6b6");e.exports=Array.isArray||function(u){return o(u)=="Array"}},e95a:function(e,i,n){var o=n("b622"),l=n("3f8c"),u=o("iterator"),c=Array.prototype;e.exports=function(f){return f!==void 0&&(l.Array===f||c[u]===f)}},f5df:function(e,i,n){var o=n("00ee"),l=n("c6b6"),u=n("b622"),c=u("toStringTag"),f=l(function(){return arguments}())=="Arguments",d=function(h,g){try{return h[g]}catch{}};e.exports=o?l:function(h){var g,p,m;return h===void 0?"Undefined":h===null?"Null":typeof(p=d(g=Object(h),c))=="string"?p:f?l(g):(m=l(g))=="Object"&&typeof g.callee=="function"?"Arguments":m}},f772:function(e,i,n){var o=n("5692"),l=n("90e3"),u=o("keys");e.exports=function(c){return u[c]||(u[c]=l(c))}},fb15:function(e,i,n){if(n.r(i),typeof window<"u"){var o=window.document.currentScript;{var l=n("8875");o=l(),"currentScript"in document||Object.defineProperty(document,"currentScript",{get:l})}var u=o&&o.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);u&&(n.p=u[1])}n("99af"),n("4de4"),n("4160"),n("c975"),n("d81d"),n("a434"),n("159b"),n("a4d3"),n("e439"),n("dbb4"),n("b64b");function c(x,C,P){return C in x?Object.defineProperty(x,C,{value:P,enumerable:!0,configurable:!0,writable:!0}):x[C]=P,x}function f(x,C){var P=Object.keys(x);if(Object.getOwnPropertySymbols){var R=Object.getOwnPropertySymbols(x);C&&(R=R.filter(function(V){return Object.getOwnPropertyDescriptor(x,V).enumerable})),P.push.apply(P,R)}return P}function d(x){for(var C=1;C<arguments.length;C++){var P=arguments[C]!=null?arguments[C]:{};C%2?f(Object(P),!0).forEach(function(R){c(x,R,P[R])}):Object.getOwnPropertyDescriptors?Object.defineProperties(x,Object.getOwnPropertyDescriptors(P)):f(Object(P)).forEach(function(R){Object.defineProperty(x,R,Object.getOwnPropertyDescriptor(P,R))})}return x}function h(x){if(Array.isArray(x))return x}n("e01a"),n("d28b"),n("e260"),n("d3b7"),n("3ca3"),n("ddb0");function g(x,C){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(x)))){var P=[],R=!0,V=!1,ee=void 0;try{for(var le=x[Symbol.iterator](),ye;!(R=(ye=le.next()).done)&&(P.push(ye.value),!(C&&P.length===C));R=!0);}catch(Me){V=!0,ee=Me}finally{try{!R&&le.return!=null&&le.return()}finally{if(V)throw ee}}return P}}n("a630"),n("fb6a"),n("b0c0"),n("25f0");function p(x,C){(C==null||C>x.length)&&(C=x.length);for(var P=0,R=new Array(C);P<C;P++)R[P]=x[P];return R}function m(x,C){if(x){if(typeof x=="string")return p(x,C);var P=Object.prototype.toString.call(x).slice(8,-1);if(P==="Object"&&x.constructor&&(P=x.constructor.name),P==="Map"||P==="Set")return Array.from(x);if(P==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(P))return p(x,C)}}function y(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function b(x,C){return h(x)||g(x,C)||m(x,C)||y()}function S(x){if(Array.isArray(x))return p(x)}function E(x){if(typeof Symbol<"u"&&Symbol.iterator in Object(x))return Array.from(x)}function I(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function T(x){return S(x)||E(x)||m(x)||I()}var D=n("a352"),_=n.n(D);function k(x){x.parentElement!==null&&x.parentElement.removeChild(x)}function O(x,C,P){var R=P===0?x.children[0]:x.children[P-1].nextSibling;x.insertBefore(C,R)}var H=n("dbf1");n("13d5"),n("4fad"),n("ac1f"),n("5319");function z(x){var C=Object.create(null);return function(R){var V=C[R];return V||(C[R]=x(R))}}var L=/-(\w)/g,N=z(function(x){return x.replace(L,function(C,P){return P.toUpperCase()})});n("5db7"),n("73d9");var q=["Start","Add","Remove","Update","End"],j=["Choose","Unchoose","Sort","Filter","Clone"],$=["Move"],de=[$,q,j].flatMap(function(x){return x}).map(function(x){return"on".concat(x)}),me={manage:$,manageAndEmit:q,emit:j};function Fe(x){return de.indexOf(x)!==-1}n("caad"),n("2ca0");var Se=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","link","main","map","mark","math","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rb","rp","rt","rtc","ruby","s","samp","script","section","select","slot","small","source","span","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr"];function Te(x){return Se.includes(x)}function ke(x){return["transition-group","TransitionGroup"].includes(x)}function G(x){return["id","class","role","style"].includes(x)||x.startsWith("data-")||x.startsWith("aria-")||x.startsWith("on")}function J(x){return x.reduce(function(C,P){var R=b(P,2),V=R[0],ee=R[1];return C[V]=ee,C},{})}function F(x){var C=x.$attrs,P=x.componentData,R=P===void 0?{}:P,V=J(Object.entries(C).filter(function(ee){var le=b(ee,2),ye=le[0];return le[1],G(ye)}));return d(d({},V),R)}function U(x){var C=x.$attrs,P=x.callBackBuilder,R=J(xe(C));Object.entries(P).forEach(function(ee){var le=b(ee,2),ye=le[0],Me=le[1];me[ye].forEach(function(te){R["on".concat(te)]=Me(te)})});var V="[data-draggable]".concat(R.draggable||"");return d(d({},R),{},{draggable:V})}function xe(x){return Object.entries(x).filter(function(C){var P=b(C,2),R=P[0];return P[1],!G(R)}).map(function(C){var P=b(C,2),R=P[0],V=P[1];return[N(R),V]}).filter(function(C){var P=b(C,2),R=P[0];return P[1],!Fe(R)})}n("c740");function He(x,C){if(!(x instanceof C))throw new TypeError("Cannot call a class as a function")}function Le(x,C){for(var P=0;P<C.length;P++){var R=C[P];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(x,R.key,R)}}function Qe(x,C,P){return C&&Le(x.prototype,C),P&&Le(x,P),x}var Ye=function(C){var P=C.el;return P},Re=function(C,P){return C.__draggable_context=P},Ue=function(C){return C.__draggable_context},Ft=function(){function x(C){var P=C.nodes,R=P.header,V=P.default,ee=P.footer,le=C.root,ye=C.realList;He(this,x),this.defaultNodes=V,this.children=[].concat(T(R),T(V),T(ee)),this.externalComponent=le.externalComponent,this.rootTransition=le.transition,this.tag=le.tag,this.realList=ye}return Qe(x,[{key:"render",value:function(P,R){var V=this.tag,ee=this.children,le=this._isRootComponent,ye=le?{default:function(){return ee}}:ee;return P(V,R,ye)}},{key:"updated",value:function(){var P=this.defaultNodes,R=this.realList;P.forEach(function(V,ee){Re(Ye(V),{element:R[ee],index:ee})})}},{key:"getUnderlyingVm",value:function(P){return Ue(P)}},{key:"getVmIndexFromDomIndex",value:function(P,R){var V=this.defaultNodes,ee=V.length,le=R.children,ye=le.item(P);if(ye===null)return ee;var Me=Ue(ye);if(Me)return Me.index;if(ee===0)return 0;var te=Ye(V[0]),K=T(le).findIndex(function(Z){return Z===te});return P<K?0:ee}},{key:"_isRootComponent",get:function(){return this.externalComponent||this.rootTransition}}]),x}(),ht=n("8bbf");function gt(x,C){var P=x[C];return P?P():[]}function Hn(x){var C=x.$slots,P=x.realList,R=x.getKey,V=P||[],ee=["header","footer"].map(function(Z){return gt(C,Z)}),le=b(ee,2),ye=le[0],Me=le[1],te=C.item;if(!te)throw new Error("draggable element must have an item slot");var K=V.flatMap(function(Z,he){return te({element:Z,index:he}).map(function(ve){return ve.key=R(Z),ve.props=d(d({},ve.props||{}),{},{"data-draggable":!0}),ve})});if(K.length!==V.length)throw new Error("Item slot must have only one child");return{header:ye,footer:Me,default:K}}function ki(x){var C=ke(x),P=!Te(x)&&!C;return{transition:C,externalComponent:P,tag:P?Object(ht.resolveComponent)(x):C?ht.TransitionGroup:x}}function lt(x){var C=x.$slots,P=x.tag,R=x.realList,V=x.getKey,ee=Hn({$slots:C,realList:R,getKey:V}),le=ki(P);return new Ft({nodes:ee,root:le,realList:R})}function wt(x,C){var P=this;Object(ht.nextTick)(function(){return P.$emit(x.toLowerCase(),C)})}function Yt(x){var C=this;return function(P,R){if(C.realList!==null)return C["onDrag".concat(x)](P,R)}}function dn(x){var C=this,P=Yt.call(this,x);return function(R,V){P.call(C,R,V),wt.call(C,x,R)}}var hn=null,gn={list:{type:Array,required:!1,default:null},modelValue:{type:Array,required:!1,default:null},itemKey:{type:[String,Function],required:!0},clone:{type:Function,default:function(C){return C}},tag:{type:String,default:"div"},move:{type:Function,default:null},componentData:{type:Object,required:!1,default:null}},vn=["update:modelValue","change"].concat(T([].concat(T(me.manageAndEmit),T(me.emit)).map(function(x){return x.toLowerCase()}))),pn=Object(ht.defineComponent)({name:"draggable",inheritAttrs:!1,props:gn,emits:vn,data:function(){return{error:!1}},render:function(){try{this.error=!1;var C=this.$slots,P=this.$attrs,R=this.tag,V=this.componentData,ee=this.realList,le=this.getKey,ye=lt({$slots:C,tag:R,realList:ee,getKey:le});this.componentStructure=ye;var Me=F({$attrs:P,componentData:V});return ye.render(ht.h,Me)}catch(te){return this.error=!0,Object(ht.h)("pre",{style:{color:"red"}},te.stack)}},created:function(){this.list!==null&&this.modelValue!==null&&H.a.error("modelValue and list props are mutually exclusive! Please set one or another.")},mounted:function(){var C=this;if(!this.error){var P=this.$attrs,R=this.$el,V=this.componentStructure;V.updated();var ee=U({$attrs:P,callBackBuilder:{manageAndEmit:function(Me){return dn.call(C,Me)},emit:function(Me){return wt.bind(C,Me)},manage:function(Me){return Yt.call(C,Me)}}}),le=R.nodeType===1?R:R.parentElement;this._sortable=new _.a(le,ee),this.targetDomElement=le,le.__draggable_component__=this}},updated:function(){this.componentStructure.updated()},beforeUnmount:function(){this._sortable!==void 0&&this._sortable.destroy()},computed:{realList:function(){var C=this.list;return C||this.modelValue},getKey:function(){var C=this.itemKey;return typeof C=="function"?C:function(P){return P[C]}}},watch:{$attrs:{handler:function(C){var P=this._sortable;P&&xe(C).forEach(function(R){var V=b(R,2),ee=V[0],le=V[1];P.option(ee,le)})},deep:!0}},methods:{getUnderlyingVm:function(C){return this.componentStructure.getUnderlyingVm(C)||null},getUnderlyingPotencialDraggableComponent:function(C){return C.__draggable_component__},emitChanges:function(C){var P=this;Object(ht.nextTick)(function(){return P.$emit("change",C)})},alterList:function(C){if(this.list){C(this.list);return}var P=T(this.modelValue);C(P),this.$emit("update:modelValue",P)},spliceList:function(){var C=arguments,P=function(V){return V.splice.apply(V,T(C))};this.alterList(P)},updatePosition:function(C,P){var R=function(ee){return ee.splice(P,0,ee.splice(C,1)[0])};this.alterList(R)},getRelatedContextFromMoveEvent:function(C){var P=C.to,R=C.related,V=this.getUnderlyingPotencialDraggableComponent(P);if(!V)return{component:V};var ee=V.realList,le={list:ee,component:V};if(P!==R&&ee){var ye=V.getUnderlyingVm(R)||{};return d(d({},ye),le)}return le},getVmIndexFromDomIndex:function(C){return this.componentStructure.getVmIndexFromDomIndex(C,this.targetDomElement)},onDragStart:function(C){this.context=this.getUnderlyingVm(C.item),C.item._underlying_vm_=this.clone(this.context.element),hn=C.item},onDragAdd:function(C){var P=C.item._underlying_vm_;if(P!==void 0){k(C.item);var R=this.getVmIndexFromDomIndex(C.newIndex);this.spliceList(R,0,P);var V={element:P,newIndex:R};this.emitChanges({added:V})}},onDragRemove:function(C){if(O(this.$el,C.item,C.oldIndex),C.pullMode==="clone"){k(C.clone);return}var P=this.context,R=P.index,V=P.element;this.spliceList(R,1);var ee={element:V,oldIndex:R};this.emitChanges({removed:ee})},onDragUpdate:function(C){k(C.item),O(C.from,C.item,C.oldIndex);var P=this.context.index,R=this.getVmIndexFromDomIndex(C.newIndex);this.updatePosition(P,R);var V={element:this.context.element,oldIndex:P,newIndex:R};this.emitChanges({moved:V})},computeFutureIndex:function(C,P){if(!C.element)return 0;var R=T(P.to.children).filter(function(ye){return ye.style.display!=="none"}),V=R.indexOf(P.related),ee=C.component.getVmIndexFromDomIndex(V),le=R.indexOf(hn)!==-1;return le||!P.willInsertAfter?ee:ee+1},onDragMove:function(C,P){var R=this.move,V=this.realList;if(!R||!V)return!0;var ee=this.getRelatedContextFromMoveEvent(C),le=this.computeFutureIndex(ee,C),ye=d(d({},this.context),{},{futureIndex:le}),Me=d(d({},C),{},{relatedContext:ee,draggedContext:ye});return R(Me,P)},onDragEnd:function(){hn=null}}}),mn=pn;i.default=mn},fb6a:function(e,i,n){var o=n("23e7"),l=n("861d"),u=n("e8b5"),c=n("23cb"),f=n("50c4"),d=n("fc6a"),h=n("8418"),g=n("b622"),p=n("1dde"),m=n("ae40"),y=p("slice"),b=m("slice",{ACCESSORS:!0,0:0,1:2}),S=g("species"),E=[].slice,I=Math.max;o({target:"Array",proto:!0,forced:!y||!b},{slice:function(D,_){var k=d(this),O=f(k.length),H=c(D,O),z=c(_===void 0?O:_,O),L,N,q;if(u(k)&&(L=k.constructor,typeof L=="function"&&(L===Array||u(L.prototype))?L=void 0:l(L)&&(L=L[S],L===null&&(L=void 0)),L===Array||L===void 0))return E.call(k,H,z);for(N=new(L===void 0?Array:L)(I(z-H,0)),q=0;H<z;H++,q++)H in k&&h(N,q,k[H]);return N.length=q,N}})},fc6a:function(e,i,n){var o=n("44ad"),l=n("1d80");e.exports=function(u){return o(l(u))}},fdbc:function(e,i){e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},fdbf:function(e,i,n){var o=n("4930");e.exports=o&&!Symbol.sham&&typeof Symbol.iterator=="symbol"}}).default})})(ko);var Iu=ko.exports;const wu=Ti(Iu),Pu=s=>(xo("data-v-192d5242"),s=s(),To(),s),ku={class:"content"},Ou={key:0,ref:"container",class:"keypoint-list"},Au={class:"temporary-popup pointContent"},Du=Pu(()=>it("div",{class:"curr-click-context"},[it("i",null,"Curr-Context")],-1)),Lu={class:"pointContent",id:"listContentOK"},Ru={id:"pointItem"},Mu=Ei({__name:"KeypointList",props:{pointList:{}},setup(s){const a=s,{player:r,currBlank:t,playingIndex:e,customLayerIndex:i,currentVideoId:n,updatePlayingIndex:o,updateCurrentVideoId:l,updateCurrentVideoUrl:u,updateCurrentPlayingItem:c}=Ci(hr());let f=Ge(9);const d=a.pointList,h=oi(()=>{var xe,He;const G=d.length,J=t.value&&e.value!==-1?f.value-1:f.value;let F=e.value-i.value;console.log("startIndex",F),F=t.value?Math.max(-i.value,F)+1:Math.max(-i.value,F),console.log("startIndex",F);let U;if(e.value===-1){const Le=d.filter(Qe=>Qe.videoId===n.value);if(F=-i.value-1,console.log("startIndex",F),console.log(Math.max(0,F),Math.min(F+J,G)),U=Le.slice(Math.max(0,F),Math.min(F+J,G)),console.log(U),U.length+-F!==f.value){console.log(U.length+-F);const Ye=d.filter(Re=>Re.videoId===n.value+1).slice(Math.max(0,F),Math.min(J-(U.length+-F)));console.log(Ye),U=[...U,...Ye]}}else U=d.slice(Math.max(0,F),Math.min(F+J,G));if(F<0){console.log(F);let Le;if(e.value===-1&&n.value!==1001&&i.value!==0){const Qe=d.filter(Re=>Re.videoId===n.value-1);Le=Qe.slice(-(-F-1)),console.log(Le),U=[...Le,...U];let Ye=-F-Qe.length-1;Ye>0&&(Le=Array(Ye).fill({}),U=[...Le,...U])}else Le=Array(-F).fill({}),U=[...Le,...U];console.log("displayedItems",U)}if((t.value&&i.value!==0||t.value&&n.value===1001||t.value&&U.length!==f.value)&&(U.splice(i.value,0,{}),console.log("进行了追加"),t.value&&!((xe=U[i.value+1])!=null&&xe.pointId)&&!((He=U[i.value])!=null&&He.pointId)&&U.splice(i.value+1,1)),console.log(U),U.length<f.value){console.log("检查是否需要在列表末尾添加空位");const Le=Array(f.value-U.length).fill({});U=[...U,...Le],console.log(U)}return U}),g=oi(()=>h.value[i.value]),p=G=>{console.log("拖拽结束","handleDropEnd"),G.preventDefault(),i.value=G.newIndex},m=Ge(),y=Ge(!1),b=Ge(),S=(G,J,F)=>{console.log(J.target),J.target.className==="description"&&(console.log("129",J,G,i.value,F),b.value=F,G<i.value?m.value=setTimeout(()=>{t.value?(console.log("非选中",d.findIndex(U=>U.pointId===F.pointId)),_.value=d.slice(0,d.findIndex(U=>U.pointId===h.value[i.value-1].pointId)+1),console.log("125",_.value)):(console.log("选中"),_.value=d.slice(0,e.value)),D.value=!0,O.value="played",T(F)},500):G>i.value?m.value=setTimeout(()=>{_.value=d.slice(d.findIndex(U=>U.pointId===F.pointId)),D.value=!0,O.value="upcoming",T(F)},500):G===i.value&&(m.value=setTimeout(()=>{y.value=!0,J.target.setAttribute("draggable",!0),D.value=!0},500)),window.addEventListener("mouseup",E),window.addEventListener("touchend",E),J.target.addEventListener("dragend",E),J.target.addEventListener("end",E))},E=()=>{console.log("全局释放"),clearTimeout(m.value),y.value=!1,document.querySelectorAll('[draggable="true"]').forEach(J=>{J.classList.remove("draggable"),J.removeAttribute("draggable")}),window.removeEventListener("mouseup",E)};Rn(()=>{T(d[e.value])});let I=Ge(null);const T=G=>{const J=document.querySelector("video");if((G==null?void 0:G.videoId)!==n.value){console.log("需要改变视频源");const F=`	https://dev-1310338158.cos.ap-nanjing.myqcloud.com/${G.videoId}.mp4`;l.value(G.videoId),u.value(F),r.value.src=F}console.log(d.findIndex(F=>F.pointId===G.pointId)),o.value(d.findIndex(F=>F.pointId===G.pointId)),J&&G.timestamps&&(J.currentTime=G.timestamps.start),I.value=G.videoId},D=Ge(!1),_=Ge([]),k=()=>{D.value=!1},O=Ge(""),H=()=>{D.value&&(O.value==="played"?t.value?(console.log("非选中"),_.value=d.slice(0,e.value+1)):(console.log("选中"),_.value=d.slice(0,e.value)):O.value==="upcoming"&&(_.value=d.slice(e.value+1)))};dr(g,()=>{H(),c.value(g.value)});let z=Ge(!0);const L=Ge(),N=G=>{G.preventDefault(),L.value&&clearTimeout(L.value),L.value=setTimeout(()=>{console.log("长按事件触发"),k()},500)},q=()=>{L.value&&clearTimeout(L.value)};Co(()=>{L.value&&clearTimeout(L.value)});let j,$=!1,de=150;const me=document.querySelector(".left");me.addEventListener("mousedown",function(G){j=G.clientY,$=!0}),me.addEventListener("mousemove",function(G){$&&G.clientY}),me.addEventListener("mouseup",function(G){if($){var J=G.clientY,F=j-J;if(F>de){console.log("上滑手势");const U=d[e.value+1];if(U)T(U);else return}else if(F<-de){console.log("下滑手势");const U=d[e.value-1];if(U)T(U);else return}$=!1}});let Fe,Se=!1;me.addEventListener("touchstart",function(G){Fe=G.touches[0].clientY,Se=!0}),me.addEventListener("touchmove",function(G){Se&&G.touches[0].clientY}),me.addEventListener("touchend",function(G){if(Se){var J=G.changedTouches[0].clientY,F=Fe-J;if(F>120){console.log("上滑手势");const U=d[e.value+1];if(U)T(U);else return}else if(F<-120){console.log("下滑手势");const U=d[e.value-1];if(U)T(U);else{document.querySelector("video").currentTime=0;return}}Se=!1}});const Te=G=>{if(typeof G=="string"&&G.endsWith("px"))return parseFloat(G.slice(0,-2));throw new Error('Input must be a string with "px" unit.')},ke=()=>{var G=document.getElementById("pointItem"),J=document.getElementById("temporarypointItem"),F=document.querySelector(".keypoint-list").clientHeight-Te(window.getComputedStyle(document.getElementById("listContentOK")).marginBottom)*2;console.log("listContentHeight",F);var U=G.clientHeight||J.clientHeight;console.log("listContentHeight",F,U);var xe=Math.floor(F/U);console.log("maxItemCount",xe),f.value=xe};return Rn(()=>{ke(),i.value=Math.floor(f.value/2-1),window.onresize=function(){ke(),i.value=Math.floor(f.value/2-1)}}),(G,J)=>(tt(),ot("div",ku,[an(z)?(tt(),ot("div",Ou,[er(it("div",Au,[it("div",{id:"temporarypointItem",class:"current-playing-item",onTouchend:q,onTouchstart:J[0]||(J[0]=F=>N(F)),onMousedown:J[1]||(J[1]=F=>N(F)),onMouseup:q},[Qn(Rr,{"is-playing":!0,item:g.value,"is-detail":D.value},null,8,["item","is-detail"])],32),Du],512),[[qi,D.value]]),er(it("div",Lu,[Qn(an(wu),{"model-value":h.value,"item-key":"index",onEnd:J[2]||(J[2]=F=>p(F)),handle:".handle"},{item:Io(({index:F,element:U})=>[it("li",Ru,[Qn(Rr,{index:F,item:U,isPlaying:F===an(i),"is-first-point":F===0,"is-last-point":F===h.value.length-1,onClick:xe=>F===an(i)?void 0:T(U),onMousedown:xe=>S(F,xe,U),onTouchstart:xe=>S(F,xe,U)},null,8,["index","item","isPlaying","is-first-point","is-last-point","onClick","onMousedown","onTouchstart"])])]),_:1},8,["model-value"])],512),[[qi,!D.value]])],512)):jt("",!0)]))}});const Nu=gr(Mu,[["__scopeId","data-v-192d5242"]]);function Kr(s,a){var r=Object.keys(s);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(s);a&&(t=t.filter(function(e){return Object.getOwnPropertyDescriptor(s,e).enumerable})),r.push.apply(r,t)}return r}function Ne(s){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?Kr(Object(r),!0).forEach(function(t){A(s,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(r)):Kr(Object(r)).forEach(function(t){Object.defineProperty(s,t,Object.getOwnPropertyDescriptor(r,t))})}return s}function $e(s){"@babel/helpers - typeof";return $e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},$e(s)}function Y(s,a){if(!(s instanceof a))throw new TypeError("Cannot call a class as a function")}function zr(s,a){for(var r=0;r<a.length;r++){var t=a[r];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(s,Uo(t.key),t)}}function X(s,a,r){return a&&zr(s.prototype,a),r&&zr(s,r),Object.defineProperty(s,"prototype",{writable:!1}),s}function A(s,a,r){return a=Uo(a),a in s?Object.defineProperty(s,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):s[a]=r,s}function oe(s,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(a&&a.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),Object.defineProperty(s,"prototype",{writable:!1}),a&&ar(s,a)}function ne(s){return ne=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},ne(s)}function ar(s,a){return ar=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ar(s,a)}function Fu(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function w(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}function br(s,a){if(a&&(typeof a=="object"||typeof a=="function"))return a;if(a!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return w(s)}function ae(s){var a=Fu();return function(){var t=ne(s),e;if(a){var i=ne(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return br(this,e)}}function _u(s,a){for(;!Object.prototype.hasOwnProperty.call(s,a)&&(s=ne(s),s!==null););return s}function re(){return typeof Reflect<"u"&&Reflect.get?re=Reflect.get.bind():re=function(a,r,t){var e=_u(a,r);if(e){var i=Object.getOwnPropertyDescriptor(e,r);return i.get?i.get.call(arguments.length<3?a:t):i.value}},re.apply(this,arguments)}function xt(s){return Bu(s)||Hu(s)||Uu(s)||ju()}function Bu(s){if(Array.isArray(s))return sr(s)}function Hu(s){if(typeof Symbol<"u"&&s[Symbol.iterator]!=null||s["@@iterator"]!=null)return Array.from(s)}function Uu(s,a){if(s){if(typeof s=="string")return sr(s,a);var r=Object.prototype.toString.call(s).slice(8,-1);if(r==="Object"&&s.constructor&&(r=s.constructor.name),r==="Map"||r==="Set")return Array.from(s);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return sr(s,a)}}function sr(s,a){(a==null||a>s.length)&&(a=s.length);for(var r=0,t=new Array(a);r<a;r++)t[r]=s[r];return t}function ju(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Gu(s,a){if(typeof s!="object"||s===null)return s;var r=s[Symbol.toPrimitive];if(r!==void 0){var t=r.call(s,a||"default");if(typeof t!="object")return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(s)}function Uo(s){var a=Gu(s,"string");return typeof a=="symbol"?a:String(a)}var jo={exports:{}};(function(s){var a=Object.prototype.hasOwnProperty,r="~";function t(){}Object.create&&(t.prototype=Object.create(null),new t().__proto__||(r=!1));function e(l,u,c){this.fn=l,this.context=u,this.once=c||!1}function i(l,u,c,f,d){if(typeof c!="function")throw new TypeError("The listener must be a function");var h=new e(c,f||l,d),g=r?r+u:u;return l._events[g]?l._events[g].fn?l._events[g]=[l._events[g],h]:l._events[g].push(h):(l._events[g]=h,l._eventsCount++),l}function n(l,u){--l._eventsCount===0?l._events=new t:delete l._events[u]}function o(){this._events=new t,this._eventsCount=0}o.prototype.eventNames=function(){var u=[],c,f;if(this._eventsCount===0)return u;for(f in c=this._events)a.call(c,f)&&u.push(r?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(c)):u},o.prototype.listeners=function(u){var c=r?r+u:u,f=this._events[c];if(!f)return[];if(f.fn)return[f.fn];for(var d=0,h=f.length,g=new Array(h);d<h;d++)g[d]=f[d].fn;return g},o.prototype.listenerCount=function(u){var c=r?r+u:u,f=this._events[c];return f?f.fn?1:f.length:0},o.prototype.emit=function(u,c,f,d,h,g){var p=r?r+u:u;if(!this._events[p])return!1;var m=this._events[p],y=arguments.length,b,S;if(m.fn){switch(m.once&&this.removeListener(u,m.fn,void 0,!0),y){case 1:return m.fn.call(m.context),!0;case 2:return m.fn.call(m.context,c),!0;case 3:return m.fn.call(m.context,c,f),!0;case 4:return m.fn.call(m.context,c,f,d),!0;case 5:return m.fn.call(m.context,c,f,d,h),!0;case 6:return m.fn.call(m.context,c,f,d,h,g),!0}for(S=1,b=new Array(y-1);S<y;S++)b[S-1]=arguments[S];m.fn.apply(m.context,b)}else{var E=m.length,I;for(S=0;S<E;S++)switch(m[S].once&&this.removeListener(u,m[S].fn,void 0,!0),y){case 1:m[S].fn.call(m[S].context);break;case 2:m[S].fn.call(m[S].context,c);break;case 3:m[S].fn.call(m[S].context,c,f);break;case 4:m[S].fn.call(m[S].context,c,f,d);break;default:if(!b)for(I=1,b=new Array(y-1);I<y;I++)b[I-1]=arguments[I];m[S].fn.apply(m[S].context,b)}}return!0},o.prototype.on=function(u,c,f){return i(this,u,c,f,!1)},o.prototype.once=function(u,c,f){return i(this,u,c,f,!0)},o.prototype.removeListener=function(u,c,f,d){var h=r?r+u:u;if(!this._events[h])return this;if(!c)return n(this,h),this;var g=this._events[h];if(g.fn)g.fn===c&&(!d||g.once)&&(!f||g.context===f)&&n(this,h);else{for(var p=0,m=[],y=g.length;p<y;p++)(g[p].fn!==c||d&&!g[p].once||f&&g[p].context!==f)&&m.push(g[p]);m.length?this._events[h]=m.length===1?m[0]:m:n(this,h)}return this},o.prototype.removeAllListeners=function(u){var c;return u?(c=r?r+u:u,this._events[c]&&n(this,c)):(this._events=new t,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=r,o.EventEmitter=o,s.exports=o})(jo);var Vu=jo.exports;const Go=Ti(Vu);var Wu=typeof window<"u"&&window.location&&window.location.href.indexOf("xgplayerdebugger=1")>-1,Ui={info:"color: #525252; background-color: #90ee90;",error:"color: #525252; background-color: red;",warn:"color: #525252; background-color: yellow; "},ji="%c[xgplayer]",ge={config:{debug:Wu?3:0},logInfo:function(a){for(var r,t=arguments.length,e=new Array(t>1?t-1:0),i=1;i<t;i++)e[i-1]=arguments[i];this.config.debug>=3&&(r=console).log.apply(r,[ji,Ui.info,a].concat(e))},logWarn:function(a){for(var r,t=arguments.length,e=new Array(t>1?t-1:0),i=1;i<t;i++)e[i-1]=arguments[i];this.config.debug>=1&&(r=console).warn.apply(r,[ji,Ui.warn,a].concat(e))},logError:function(a){var r;if(!(this.config.debug<1)){for(var t=this.config.debug>=2?"trace":"error",e=arguments.length,i=new Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];(r=console)[t].apply(r,[ji,Ui.error,a].concat(i))}}};function Ku(s){s.logInfo=ge.logInfo.bind(s),s.logWarn=ge.logWarn.bind(s),s.logError=ge.logError.bind(s)}var zu=function(){function s(a){Y(this,s),this.bufferedList=a}return X(s,[{key:"start",value:function(r){return this.bufferedList[r].start}},{key:"end",value:function(r){return this.bufferedList[r].end}},{key:"length",get:function(){return this.bufferedList.length}}]),s}(),v={};v.createDom=function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"div",a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},t=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"",e=document.createElement(s);return e.className=t,e.innerHTML=a,Object.keys(r).forEach(function(i){var n=i,o=r[i];s==="video"||s==="audio"||s==="live-video"?o&&e.setAttribute(n,o):e.setAttribute(n,o)}),e};v.createDomFromHtml=function(s){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";try{var t=document.createElement("div");t.innerHTML=s;var e=t.children;return t=null,e.length>0?(e=e[0],r&&v.addClass(e,r),a&&Object.keys(a).forEach(function(i){e.setAttribute(i,a[i])}),e):null}catch(i){return ge.logError("util.createDomFromHtml",i),null}};v.hasClass=function(s,a){if(!s||!a)return!1;try{return Array.prototype.some.call(s.classList,function(t){return t===a})}catch{var r=s.className&&$e(s.className)==="object"?s.getAttribute("class"):s.className;return r&&!!r.match(new RegExp("(\\s|^)"+a+"(\\s|$)"))}};v.addClass=function(s,a){if(!(!s||!a))try{a.replace(/(^\s+|\s+$)/g,"").split(/\s+/g).forEach(function(r){r&&s.classList.add(r)})}catch{v.hasClass(s,a)||(s.className&&$e(s.className)==="object"?s.setAttribute("class",s.getAttribute("class")+" "+a):s.className+=" "+a)}};v.removeClass=function(s,a){if(!(!s||!a))try{a.replace(/(^\s+|\s+$)/g,"").split(/\s+/g).forEach(function(r){r&&s.classList.remove(r)})}catch{v.hasClass(s,a)&&a.split(/\s+/g).forEach(function(t){var e=new RegExp("(\\s|^)"+t+"(\\s|$)");s.className&&$e(s.className)==="object"?s.setAttribute("class",s.getAttribute("class").replace(e," ")):s.className=s.className.replace(e," ")})}};v.toggleClass=function(s,a){s&&a.split(/\s+/g).forEach(function(r){v.hasClass(s,r)?v.removeClass(s,r):v.addClass(s,r)})};v.classNames=function(){for(var s=arguments,a=[],r=function(i){v.typeOf(s[i])==="String"?a.push(s[i]):v.typeOf(s[i])==="Object"&&Object.keys(s[i]).map(function(n){s[i][n]&&a.push(n)})},t=0;t<arguments.length;t++)r(t);return a.join(" ")};v.findDom=function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:document,a=arguments.length>1?arguments[1]:void 0,r;try{r=s.querySelector(a)}catch(t){ge.logError("util.findDom",t),a.indexOf("#")===0&&(r=s.getElementById(a.slice(1)))}return r};v.getCss=function(s,a){return s.currentStyle?s.currentStyle[a]:document.defaultView.getComputedStyle(s,!1)[a]};v.padStart=function(s,a,r){for(var t=String(r),e=a>>0,i=Math.ceil(e/t.length),n=[],o=String(s);i--;)n.push(t);return n.join("").substring(0,e-o.length)+o};v.format=function(s){if(window.isNaN(s))return"";s=Math.round(s);var a=v.padStart(Math.floor(s/3600),2,0),r=v.padStart(Math.floor((s-a*3600)/60),2,0),t=v.padStart(Math.floor(s-a*3600-r*60),2,0);return(a==="00"?[r,t]:[a,r,t]).join(":")};v.event=function(s){if(s.touches){var a=s.touches[0]||s.changedTouches[0];s.clientX=a.clientX||0,s.clientY=a.clientY||0,s.offsetX=a.pageX-a.target.offsetLeft,s.offsetY=a.pageY-a.target.offsetTop}s._target=s.target||s.srcElement};v.typeOf=function(s){return Object.prototype.toString.call(s).match(/([^\s.*]+)(?=]$)/g)[0]};v.deepCopy=function(s,a){if(v.typeOf(a)==="Object"&&v.typeOf(s)==="Object")return Object.keys(a).forEach(function(r){v.typeOf(a[r])==="Object"&&!(a[r]instanceof Node)?s[r]===void 0||s[r]===void 0?s[r]=a[r]:v.deepCopy(s[r],a[r]):v.typeOf(a[r])==="Array"?s[r]=v.typeOf(s[r])==="Array"?s[r].concat(a[r]):a[r]:s[r]=a[r]}),s};v.deepMerge=function(s,a){return Object.keys(a).map(function(r){if(v.typeOf(a[r])==="Array"&&v.typeOf(s[r])==="Array"){if(v.typeOf(s[r])==="Array"){var t;(t=s[r]).push.apply(t,xt(a[r]))}}else v.typeOf(s[r])===v.typeOf(a[r])&&s[r]!==null&&v.typeOf(s[r])==="Object"&&!(a[r]instanceof window.Node)?v.deepMerge(s[r],a[r]):a[r]!==null&&(s[r]=a[r])}),s};v.getBgImage=function(s){var a=(s.currentStyle||window.getComputedStyle(s,null)).backgroundImage;if(!a||a==="none")return"";var r=document.createElement("a");return r.href=a.replace(/url\("|"\)/g,""),r.href};v.copyDom=function(s){if(s&&s.nodeType===1){var a=document.createElement(s.tagName);return Array.prototype.forEach.call(s.attributes,function(r){a.setAttribute(r.name,r.value)}),s.innerHTML&&(a.innerHTML=s.innerHTML),a}else return""};v.setInterval=function(s,a,r,t){s._interval[a]||(s._interval[a]=window.setInterval(r.bind(s),t))};v.clearInterval=function(s,a){clearInterval(s._interval[a]),s._interval[a]=null};v.setTimeout=function(s,a,r){s._timers||(s._timers=[]);var t=setTimeout(function(){a(),v.clearTimeout(s,t)},r);return s._timers.push(t),t};v.clearTimeout=function(s,a){var r=s._timers;if(v.typeOf(r)==="Array"){for(var t=0;t<r.length;t++)if(r[t]===a){r.splice(t,1),clearTimeout(a);break}}else clearTimeout(a)};v.clearAllTimers=function(s){var a=s._timers;v.typeOf(a)==="Array"&&(a.map(function(r){clearTimeout(r)}),s._timerIds=[])};v.createImgBtn=function(s,a,r,t){var e=v.createDom("xg-".concat(s),"",{},"xgplayer-".concat(s,"-img"));if(e.style.backgroundImage='url("'.concat(a,'")'),r&&t){var i,n,o;["px","rem","em","pt","dp","vw","vh","vm","%"].every(function(l){return r.indexOf(l)>-1&&t.indexOf(l)>-1?(i=parseFloat(r.slice(0,r.indexOf(l)).trim()),n=parseFloat(t.slice(0,t.indexOf(l)).trim()),o=l,!1):!0}),e.style.width="".concat(i).concat(o),e.style.height="".concat(n).concat(o),e.style.backgroundSize="".concat(i).concat(o," ").concat(n).concat(o),s==="start"?e.style.margin="-".concat(n/2).concat(o," auto auto -").concat(i/2).concat(o):e.style.margin="auto 5px auto 5px"}return e};v.Hex2RGBA=function(s,a){var r=[];if(/^\#[0-9A-F]{3}$/i.test(s)){var t="#";s.replace(/[0-9A-F]/ig,function(e){t+=e+e}),s=t}return/^#[0-9A-F]{6}$/i.test(s)?(s.replace(/[0-9A-F]{2}/ig,function(e){r.push(parseInt(e,16))}),"rgba(".concat(r.join(","),", ").concat(a,")")):"rgba(255, 255, 255, 0.1)"};v.getFullScreenEl=function(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement};v.checkIsFunction=function(s){return s&&typeof s=="function"};v.checkIsObject=function(s){return s!==null&&$e(s)==="object"};v.hide=function(s){s.style.display="none"};v.show=function(s,a){s.style.display=a||"block"};v.isUndefined=function(s){if(typeof s>"u"||s===null)return!0};v.isNotNull=function(s){return s!=null};v.setStyleFromCsstext=function(s,a){if(a)if(v.typeOf(a)==="String"){var r=a.replace(/\s+/g,"").split(";");r.map(function(t){if(t){var e=t.split(":");e.length>1&&(s.style[e[0]]=e[1])}})}else Object.keys(a).map(function(t){s.style[t]=a[t]})};function $u(s,a){for(var r=0,t=a.length;r<t;r++)if(s.indexOf(a[r])>-1)return!0;return!1}v.filterStyleFromText=function(s){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:["width","height","top","left","bottom","right","position","z-index","padding","margin","transform"],r=s.style.cssText;if(!r)return{};var t=r.replace(/\s+/g,"").split(";"),e={},i={};return t.map(function(n){if(n){var o=n.split(":");o.length>1&&($u(o[0],a)?e[o[0]]=o[1]:i[o[0]]=o[1])}}),s.setAttribute("style",""),Object.keys(i).map(function(n){s.style[n]=i[n]}),e};v.getStyleFromCsstext=function(s){var a=s.style.cssText;if(!a)return{};var r=a.replace(/\s+/g,"").split(";"),t={};return r.map(function(e){if(e){var i=e.split(":");i.length>1&&(t[i[0]]=i[1])}}),t};v.preloadImg=function(s){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){};if(s){var t=new window.Image;t.onload=function(e){t=null,a&&a(e)},t.onerror=function(e){t=null,r&&r(e)},t.src=s}};v.stopPropagation=function(s){s&&s.stopPropagation()};v.scrollTop=function(){return window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0};v.scrollLeft=function(){return window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0};v.checkTouchSupport=function(){return"ontouchstart"in window};v.getBuffered2=function(s){for(var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.5,r=[],t=0;t<s.length;t++)r.push({start:s.start(t)<.5?0:s.start(t),end:s.end(t)});r.sort(function(l,u){var c=l.start-u.start;return c||u.end-l.end});var e=[];if(a)for(var i=0;i<r.length;i++){var n=e.length;if(n){var o=e[n-1].end;r[i].start-o<a?r[i].end>o&&(e[n-1].end=r[i].end):e.push(r[i])}else e.push(r[i])}else e=r;return new zu(e)};v.getEventPos=function(s){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return s.touches&&s.touches.length>0&&(s=s.touches[0]),{x:s.x/a,y:s.y/a,clientX:s.clientX/a,clientY:s.clientY/a,offsetX:s.offsetX/a,offsetY:s.offsetY/a,pageX:s.pageX/a,pageY:s.pageY/a}};v.requestAnimationFrame=function(s){var a=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame;if(a)return a(s)};v.getHostFromUrl=function(s){if(v.typeOf(s)!=="String")return"";var a=s.split("/"),r="";return a.length>3&&a[2]&&(r=a[2]),r};v.cancelAnimationFrame=function(s){var a=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.cancelRequestAnimationFrame;a&&a(s)};v.isMSE=function(s){return!s||!(s instanceof HTMLMediaElement)?!1:/^blob/.test(s.currentSrc)||/^blob/.test(s.src)};v.generateSessionId=function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,a=new Date().getTime();try{s=parseInt(s)}catch{s=0}a+=s,window.performance&&typeof window.performance.now=="function"&&(a+=parseInt(window.performance.now()));var r="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=(a+Math.random()*16)%16|0;return a=Math.floor(a/16),(t==="x"?e:e&3|8).toString(16)});return r};v.createEvent=function(s){var a;return typeof window.Event=="function"?a=new Event(s):(a=document.createEvent("Event"),a.initEvent(s,!0,!0)),a};v.adjustTimeByDuration=function(s,a,r){return!a||!s?s:s>a||r&&s<a?a:s};v.createPositionBar=function(s,a){var r=v.createDom("xg-bar","",{"data-index":-1},s);return a.appendChild(r),r};v.getTransformStyle=function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{x:0,y:0,scale:1,rotate:0};return"scale(".concat(s.scale||1,") translate(").concat(s.x||0,"%, ").concat(s.y||0,"%) rotate(").concat(s.rotate||0,"deg)")};v.convertDeg=function(s){return Math.abs(s)<=1?s*360:s%360};function Vo(s){var a=$e(s);return s!==null&&(a==="object"||a==="function")}function Yu(s,a,r){var t,e,i,n,o,l,u=0,c=!1,f=!1,d=!0,h=!a&&a!==0&&typeof window.requestAnimationFrame=="function";if(typeof s!="function")throw new TypeError("Expected a function");a=+a||0,Vo(r)&&(c=!!r.leading,f="maxWait"in r,i=f?Math.max(+r.maxWait||0,a):i,d="trailing"in r?!!r.trailing:d);function g(O){var H=t,z=e;return t=e=void 0,u=O,n=s.apply(z,H),n}function p(O,H){return h?(window.cancelAnimationFrame(o),window.requestAnimationFrame(O)):setTimeout(O,H)}function m(O){if(h)return window.cancelAnimationFrame(O);clearTimeout(O)}function y(O){return u=O,o=p(E,a),c?g(O):n}function b(O){var H=O-l,z=O-u,L=a-H;return f?Math.min(L,i-z):L}function S(O){var H=O-l,z=O-u;return l===void 0||H>=a||H<0||f&&z>=i}function E(){var O=Date.now();if(S(O))return I(O);o=p(E,b(O))}function I(O){return o=void 0,d&&t?g(O):(t=e=void 0,n)}function T(){o!==void 0&&m(o),u=0,t=l=e=o=void 0}function D(){return o===void 0?n:I(Date.now())}function _(){return o!==void 0}function k(){for(var O=Date.now(),H=S(O),z=arguments.length,L=new Array(z),N=0;N<z;N++)L[N]=arguments[N];if(t=L,e=this,l=O,H){if(o===void 0)return y(l);if(f)return o=p(E,a),g(l)}return o===void 0&&(o=p(E,a)),n}return k.cancel=T,k.flush=D,k.pending=_,k}function Xu(s,a,r){var t=!0,e=!0;if(typeof s!="function")throw new TypeError("Expected a function");return Vo(r)&&(t="leading"in r?!!r.leading:t,e="trailing"in r?!!r.trailing:e),Yu(s,a,{leading:t,trailing:e,maxWait:a})}function Ju(){var s=(document.documentElement.getAttribute("lang")||navigator.language||"zh-cn").toLocaleLowerCase();return s==="zh-cn"&&(s="zh"),s}function Zu(s,a,r){if(s){var t=s.getAttribute(r);return!!(t&&t===a&&(s.tagName==="VIDEO"||s.tagName==="AUDIO"))}}var $r={android:/(Android)\s([\d.]+)/,ios:/(Version)\/([\d.]+)/},Qu=["avc1.42E01E, mp4a.40.2","avc1.58A01E, mp4a.40.2","avc1.4D401E, mp4a.40.2","avc1.64001E, mp4a.40.2","avc1.42E01E","mp4v.20.8","avc1.42E01E, mp4a.40.2","avc1.58A01E, mp4a.40.2","avc1.4D401E, mp4a.40.2","avc1.64001E, mp4a.40.2","mp4v.20.8, mp4a.40.2","mp4v.20.240, mp4a.40.2"],ce={get device(){var s=ce.os;return s.isPc?"pc":"mobile"},get browser(){if(typeof navigator>"u")return"";var s=navigator.userAgent.toLowerCase(),a={ie:/rv:([\d.]+)\) like gecko/,firefox:/firefox\/([\d.]+)/,chrome:/chrome\/([\d.]+)/,opera:/opera.([\d.]+)/,safari:/version\/([\d.]+).*safari/};return[].concat(Object.keys(a).filter(function(r){return a[r].test(s)}))[0]},get os(){if(typeof navigator>"u")return{};var s=navigator.userAgent,a=/(?:Windows Phone)/.test(s),r=/(?:SymbianOS)/.test(s)||a,t=/(?:Android)/.test(s),e=/(?:Firefox)/.test(s),i=/(?:iPad|PlayBook)/.test(s)||t&&!/(?:Mobile)/.test(s)||e&&/(?:Tablet)/.test(s),n=/(?:iPhone)/.test(s)&&!i,o=!n&&!t&&!r&&!i,l=/(?:iPad|PlayBook)/.test(s);return{isTablet:i,isPhone:n,isIpad:l,isIos:n||l,isAndroid:t,isPc:o,isSymbian:r,isWindowsPhone:a,isFireFox:e}},get osVersion(){if(typeof navigator>"u")return 0;var s=navigator.userAgent,a="";/(?:iPhone)|(?:iPad|PlayBook)/.test(s)?a=$r.ios:a=$r.android;var r=a?a.exec(s):[];if(r&&r.length>=3){var t=r[2].split(".");return t.length>0?parseInt(t[0]):0}return 0},get isWeixin(){if(typeof navigator>"u")return!1;var s=/(micromessenger)\/([\d.]+)/,a=s.exec(navigator.userAgent.toLocaleLowerCase());return!!a},isSupportMP4:function(){var a={isSupport:!1,mime:""};if(typeof document>"u")return a;if(this.supportResult)return this.supportResult;var r=document.createElement("video");return typeof r.canPlayType=="function"&&Qu.map(function(t){r.canPlayType('video/mp4; codecs="'.concat(t,'"'))==="probably"&&(a.isSupport=!0,a.mime+="||".concat(t))}),this.supportResult=a,r=null,a},isMSESupport:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:'video/mp4; codecs="avc1.42E01E,mp4a.40.2"';if(typeof MediaSource>"u"||!MediaSource)return!1;try{return MediaSource.isTypeSupported(a)}catch(r){return this._logger.error(a,r),!1}},isHevcSupported:function(){return typeof MediaSource>"u"||!MediaSource.isTypeSupported?!1:MediaSource.isTypeSupported('video/mp4;codecs="hev1.1.6.L120.90"')||MediaSource.isTypeSupported('video/mp4;codecs="hev1.2.4.L120.90"')||MediaSource.isTypeSupported('video/mp4;codecs="hev1.3.E.L120.90"')||MediaSource.isTypeSupported('video/mp4;codecs="hev1.4.10.L120.90"')},probeConfigSupported:function(a){var r={supported:!1,smooth:!1,powerEfficient:!1};if(!a||typeof navigator>"u")return Promise.resolve(r);if(navigator.mediaCapabilities&&navigator.mediaCapabilities.decodingInfo)return navigator.mediaCapabilities.decodingInfo(a);var t=a.video||{},e=a.audio||{};try{var i=MediaSource.isTypeSupported(t.contentType),n=MediaSource.isTypeSupported(e.contentType);return Promise.resolve({supported:i&&n,smooth:!1,powerEfficient:!1})}catch{return Promise.resolve(r)}}},lr="3.0.9",Yr={1:"media",2:"media",3:"media",4:"media",5:"media",6:"media"},Xr={1:5101,2:5102,3:5103,4:5104,5:5105,6:5106},fi=X(function s(a){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{errorType:"",errorCode:0,errorMessage:"",originError:"",ext:{},mediaError:null};Y(this,s);var t=a&&a.i18n?a.i18n.ERROR_TYPES:null;if(a.media){var e=r.mediaError?r.mediaError:a.media.error||{},i=a.duration,n=a.currentTime,o=a.ended,l=a.src,u=a.currentSrc,c=a.media,f=c.readyState,d=c.networkState,h=r.errorCode||e.code;Xr[h]&&(h=Xr[h]);var g={playerVersion:lr,currentTime:n,duration:i,ended:o,readyState:f,networkState:d,src:l||u,errorType:r.errorType,errorCode:h,message:r.errorMessage||e.message,mediaError:e,originError:r.originError?r.originError.stack:"",host:v.getHostFromUrl(l||u)};return r.ext&&Object.keys(r.ext).map(function(b){g[b]=r.ext[b]}),g}else if(arguments.length>1){for(var p={playerVersion:lr,domain:document.domain},m=["errorType","currentTime","duration","networkState","readyState","src","currentSrc","ended","errd","errorCode","mediaError"],y=0;y<arguments.length;y++)p[m[y]]=arguments[y];return p.ex=t?(t[arguments[0]]||{}).msg:"",p}}),st="play",Sr="playing",Kt="ended",cn="pause",_n="error",Er="seeking",Lt="seeked",dt="timeupdate",Bn="waiting",Ct="canplay",qu="canplaythrough",zt="durationchange",Wo="volumechange",Rt="loadeddata",ec="loadedmetadata",Ko="ratechange",zo="progress",Cr="loadstart",fn="emptied",tc="stalled",nc="suspend",ic="abort",rc="bufferedChange",Tr="focus",$o="blur",xr="ready",Yo="urlNull",Vt="autoplay_started",Ir="autoplay_was_prevented",Ii="complete",di="replay",wr="destroy",wi="urlchange",ur="download_speed_change",St="fullscreen_change",hi="cssFullscreen_change",gi="mini_state_change",Pr="definition_change",oc="before_definition_change",cr="after_definition_change",ac="SEI_PARSED",sc="retry",Mt="video_resize",fr="pip_change",Xo="rotate",Jo="screenShot",vi="playnext",Zo="shortcut",Qo="xglog",pi="user_action",Pi="reset",qo="source_error",ea="source_success",lc="switch_subtitle",ta=["play","playing","ended","pause","error","seeking","seeked","timeupdate","waiting","canplay","canplaythrough","durationchange","volumechange","loadeddata","loadedmetadata","ratechange","progress","loadstart","emptied","stalled","suspend","abort","lowdecode"],na={STATS_INFO:"stats_info",STATS_DOWNLOAD:"stats_download",STATS_RESET:"stats_reset"},ia="fps_stuck";const uc=Object.freeze(Object.defineProperty({__proto__:null,ABORT:ic,AFTER_DEFINITION_CHANGE:cr,AUTOPLAY_PREVENTED:Ir,AUTOPLAY_STARTED:Vt,BEFORE_DEFINITION_CHANGE:oc,BUFFER_CHANGE:rc,CANPLAY:Ct,CANPLAY_THROUGH:qu,COMPLETE:Ii,CSS_FULLSCREEN_CHANGE:hi,DEFINITION_CHANGE:Pr,DESTROY:wr,DOWNLOAD_SPEED_CHANGE:ur,DURATION_CHANGE:zt,EMPTIED:fn,ENDED:Kt,ERROR:_n,FPS_STUCK:ia,FULLSCREEN_CHANGE:St,LOADED_DATA:Rt,LOADED_METADATA:ec,LOAD_START:Cr,MINI_STATE_CHANGE:gi,PAUSE:cn,PIP_CHANGE:fr,PLAY:st,PLAYER_BLUR:$o,PLAYER_FOCUS:Tr,PLAYING:Sr,PLAYNEXT:vi,PROGRESS:zo,RATE_CHANGE:Ko,READY:xr,REPLAY:di,RESET:Pi,RETRY:sc,ROTATE:Xo,SCREEN_SHOT:Jo,SEEKED:Lt,SEEKING:Er,SEI_PARSED:ac,SHORTCUT:Zo,SOURCE_ERROR:qo,SOURCE_SUCCESS:ea,STALLED:tc,STATS_EVENTS:na,SUSPEND:nc,SWITCH_SUBTITLE:lc,TIME_UPDATE:dt,URL_CHANGE:wi,URL_NULL:Yo,USER_ACTION:pi,VIDEO_EVENTS:ta,VIDEO_RESIZE:Mt,VOLUME_CHANGE:Wo,WAITING:Bn,XGLOG:Qo},Symbol.toStringTag,{value:"Module"}));function Gi(s,a){!this||!this.emit||(s==="error"?this.errorHandler(s,a.error):this.emit(s,a))}function cc(s,a){return function(r,t){var e={player:a,eventName:s,originalEvent:r,detail:r.detail||{},timeStamp:r.timeStamp,currentTime:a.currentTime,duration:a.duration,paused:a.paused,ended:a.ended,isInternalOp:!!a._internalOp[r.type],muted:a.muted,volume:a.volume,host:v.getHostFromUrl(a.currentSrc),vtype:a.vtype};if(a.removeInnerOP(r.type),s==="timeupdate"&&(a._currentTime=a.media&&a.media.currentTime),s==="ratechange"){var i=a.media?a.media.playbackRate:0;if(i&&a._rate===i)return;a._rate=a.media&&a.media.playbackRate}if(s==="durationchange"&&(a._duration=a.media.duration),s==="volumechange"&&(e.isMutedChange=a._lastMuted!==a.muted,a._lastMuted=a.muted),s==="error"&&(e.error=t||a.video.error),a.mediaEventMiddleware[s]){var n=Gi.bind(a,s,e);try{a.mediaEventMiddleware[s].call(a,e,n)}catch(o){throw Gi.call(a,s,e),o}}else Gi.call(a,s,e)}}var fc=function(s){oe(r,s);var a=ae(r);function r(t){var e;Y(this,r),e=a.call(this,t),e._hasStart=!1,e._currentTime=0,e._duration=0,e._internalOp={},e._lastMuted=!1,e.vtype="MP4",e._rate=-1,e.mediaConfig=Object.assign({},{controls:!1,autoplay:t.autoplay,playsinline:t.playsinline,"x5-playsinline":t.playsinline,"webkit-playsinline":t.playsinline,"x5-video-player-fullscreen":t["x5-video-player-fullscreen"]||t.x5VideoPlayerFullscreen,"x5-video-orientation":t["x5-video-orientation"]||t.x5VideoOrientation,airplay:t.airplay,"webkit-airplay":t.airplay,tabindex:t.tabindex|0,mediaType:t.mediaType||"video","data-index":-1},t.videoConfig,t.videoAttributes);var i=t["x5-video-player-type"]||t.x5VideoPlayerType;return ce.isWeixin&&ce.os.isAndroid&&i&&(e.mediaConfig["x5-video-player-type"]=i,delete e.mediaConfig.playsinline,delete e.mediaConfig["webkit-playsinline"],delete e.mediaConfig["x5-playsinline"]),t.loop&&(e.mediaConfig.loop="loop"),e.media=v.createDom(e.mediaConfig.mediaType,"",e.mediaConfig,""),t.defaultPlaybackRate&&(e.media.defaultPlaybackRate=e.media.playbackRate=t.defaultPlaybackRate),v.typeOf(t.volume)==="Number"&&(e.volume=t.volume),t.autoplayMuted&&(e.media.muted=!0,e._lastMuted=!0),t.autoplay&&(e.media.autoplay=!0),e._interval={},e.mediaEventMiddleware={},e.attachVideoEvents(),e}return X(r,[{key:"setEventsMiddleware",value:function(e){var i=this;Object.keys(e).map(function(n){i.mediaEventMiddleware[n]=e[n]})}},{key:"removeEventsMiddleware",value:function(e){var i=this;Object.keys(e).map(function(n){delete i.mediaEventMiddleware[n]})}},{key:"attachVideoEvents",value:function(){var e=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.media;this._evHandlers||(this._evHandlers=ta.map(function(n){var o="on".concat(n.charAt(0).toUpperCase()).concat(n.slice(1));return typeof e[o]=="function"&&e.on(n,e[o]),A({},n,cc(n,e))})),this._evHandlers.forEach(function(n){var o=Object.keys(n)[0];i.addEventListener(o,n[o],!1)})}},{key:"detachVideoEvents",value:function(){var e=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.media;this._evHandlers.forEach(function(n){var o=Object.keys(n)[0];i.removeEventListener(o,n[o],!1)}),this._evHandlers.forEach(function(n){var o=Object.keys(n)[0],l="on".concat(o.charAt(0).toUpperCase()).concat(o.slice(1));typeof e[l]=="function"&&e.off(o,e[l])}),this._evHandlers=null}},{key:"_attachSourceEvents",value:function(e,i){var n=this;e.removeAttribute("src"),e.load(),i.forEach(function(f,d){n.media.appendChild(v.createDom("source","",{src:"".concat(f.src),type:"".concat(f.type||""),"data-index":d+1}))});var o=e.children;if(o){this._videoSourceCount=o.length,this._videoSourceIndex=o.length,this._vLoadeddata=function(f){n.emit(ea,{src:f.target.currentSrc,host:v.getHostFromUrl(f.target.currentSrc)})};for(var l=null,u=0;u<this._evHandlers.length;u++)if(Object.keys(this._evHandlers[u])[0]==="error"){l=this._evHandlers[u];break}!this._sourceError&&(this._sourceError=function(f){var d=parseInt(f.target.getAttribute("data-index"),10);if(n._videoSourceIndex--,n._videoSourceIndex===0||d>=n._videoSourceCount){var h={code:4,message:"sources_load_error"};l?l.error(f,h):n.errorHandler("error",h)}var g=Yr[4];n.emit(qo,new fi(n,{errorType:g,errorCode:4,errorMessage:"sources_load_error",mediaError:{code:4,message:"sources_load_error"},src:f.target.src}))});for(var c=0;c<o.length;c++)o[c].addEventListener("error",this._sourceError);e.addEventListener("loadeddata",this._vLoadeddata)}}},{key:"_detachSourceEvents",value:function(e){var i=e.children;if(!(!i||i.length===0||!this._sourceError)){for(var n=0;n<i.length;n++)i[n].removeEventListener("error",this._sourceError);for(;i.length>0;)e.removeChild(i[0]);this._vLoadeddata&&e.removeEventListener("loadeddata",this._vLoadeddata)}}},{key:"errorHandler",value:function(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(this.media&&(this.media.error||i)){var n=this.media.error||i,o=n.code?Yr[n.code]:"other",l=n.message;this.media.currentSrc||(l="empty_src",n={code:6,message:l}),this.emit(e,new fi(this,{errorType:o,errorCode:n.code,errorMessage:n.message||"",mediaError:n}))}}},{key:"destroy",value:function(){this.media&&(this.media.pause&&(this.media.pause(),this.media.muted=!0),this.media.removeAttribute("src"),this.media.load()),this._currentTime=0,this._duration=0,this.mediaConfig=null;for(var e in this._interval)Object.prototype.hasOwnProperty.call(this._interval,e)&&(clearInterval(this._interval[e]),this._interval[e]=null);this.detachVideoEvents(),this.media=null,this.mediaEventMiddleware={},this.removeAllListeners()}},{key:"video",get:function(){return this.media},set:function(e){this.media=e}},{key:"play",value:function(){var e=this.media?this.media.play():null;return e}},{key:"pause",value:function(){this.media&&this.media.pause()}},{key:"load",value:function(){this.media&&this.media.load()}},{key:"canPlayType",value:function(e){return this.media?this.media.canPlayType(e):!1}},{key:"getBufferedRange",value:function(e){var i=[0,0];if(!this.media)return i;e||(e=this.media.buffered);var n=this.media.currentTime;if(e)for(var o=0,l=e.length;o<l&&(i[0]=e.start(o),i[1]=e.end(o),!(i[0]<=n&&n<=i[1]));o++);return i[0]-n<=0&&n-i[1]<=0?i:[0,0]}},{key:"autoplay",get:function(){return this.media?this.media.autoplay:!1},set:function(e){this.media&&(this.media.autoplay=e)}},{key:"buffered",get:function(){return this.media?this.media.buffered:null}},{key:"buffered2",get:function(){return this.media&&this.media.buffered?v.getBuffered2(this.media.buffered):null}},{key:"bufferedPoint",get:function(){var e={start:0,end:0};if(!this.media)return e;var i=this.media.buffered;if(!i||i.length===0)return e;for(var n=0;n<i.length;n++)if((i.start(n)<=this.currentTime||i.start(n)<.1)&&i.end(n)>=this.currentTime)return{start:i.start(n),end:i.end(n)};return e}},{key:"crossOrigin",get:function(){return this.media?this.media.crossOrigin:""},set:function(e){this.media&&(this.media.crossOrigin=e)}},{key:"currentSrc",get:function(){return this.media?this.media.currentSrc:""},set:function(e){this.media&&(this.media.currentSrc=e)}},{key:"currentTime",get:function(){return this.media?this.media.currentTime!==void 0?this.media.currentTime:this._currentTime:0},set:function(e){this.media&&(this.media.currentTime=e)}},{key:"defaultMuted",get:function(){return this.media?this.media.defaultMuted:!1},set:function(e){this.media&&(this.media.defaultMuted=e)}},{key:"duration",get:function(){return this._duration}},{key:"ended",get:function(){return this.media?this.media.ended:!1}},{key:"error",get:function(){return this.media.error}},{key:"errorNote",get:function(){var e=this.media.error;if(!e)return"";var i=["MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED"];return i[this.media.error.code-1]}},{key:"loop",get:function(){return this.media?this.media.loop:!1},set:function(e){this.media&&(this.media.loop=e)}},{key:"muted",get:function(){return this.media?this.media.muted:!1},set:function(e){!this.media||this.media.muted===e||(this._lastMuted=this.media.muted,this.media.muted=e)}},{key:"networkState",get:function(){return this.media.networkState}},{key:"paused",get:function(){return this.media?this.media.paused:!0}},{key:"playbackRate",get:function(){return this.media?this.media.playbackRate:0},set:function(e){!this.media||e===1/0||(this.media.defaultPlaybackRate=e,this.media.playbackRate=e)}},{key:"played",get:function(){return this.media?this.media.played:null}},{key:"preload",get:function(){return this.media?this.media.preload:!1},set:function(e){this.media&&(this.media.preload=e)}},{key:"readyState",get:function(){return this.media.readyState}},{key:"seekable",get:function(){return this.media?this.media.seekable:!1}},{key:"seeking",get:function(){return this.media?this.media.seeking:!1}},{key:"src",get:function(){return this.media?this.media.src:""},set:function(e){if(this.media){if(this.emit(wi,e),this.emit(Bn),this._currentTime=0,this._duration=0,/^blob/.test(this.media.currentSrc)||/^blob/.test(this.media.src)){this.onWaiting();return}this._detachSourceEvents(this.media),v.typeOf(e)==="Array"?this._attachSourceEvents(this.media,e):e?this.media.src=e:this.media.removeAttribute("src"),this.load()}}},{key:"volume",get:function(){return this.media?this.media.volume:0},set:function(e){e===1/0||!this.media||(this.media.volume=e)}},{key:"addInnerOP",value:function(e){this._internalOp[e]=!0}},{key:"removeInnerOP",value:function(e){delete this._internalOp[e]}},{key:"emit",value:function(e,i){for(var n,o=arguments.length,l=new Array(o>2?o-2:0),u=2;u<o;u++)l[u-2]=arguments[u];(n=re(ne(r.prototype),"emit",this)).call.apply(n,[this,e,i].concat(l))}},{key:"on",value:function(e,i){for(var n,o=arguments.length,l=new Array(o>2?o-2:0),u=2;u<o;u++)l[u-2]=arguments[u];(n=re(ne(r.prototype),"on",this)).call.apply(n,[this,e,i].concat(l))}},{key:"once",value:function(e,i){for(var n,o=arguments.length,l=new Array(o>2?o-2:0),u=2;u<o;u++)l[u-2]=arguments[u];(n=re(ne(r.prototype),"once",this)).call.apply(n,[this,e,i].concat(l))}},{key:"off",value:function(e,i){for(var n,o=arguments.length,l=new Array(o>2?o-2:0),u=2;u<o;u++)l[u-2]=arguments[u];(n=re(ne(r.prototype),"off",this)).call.apply(n,[this,e,i].concat(l))}},{key:"offAll",value:function(){re(ne(r.prototype),"removeAllListeners",this).call(this)}}]),r}(Go),dc=function(){function s(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{name:"xgplayer",version:1,db:null,ojstore:{name:"xg-m4a",keypath:"vid"}};Y(this,s),this.indexedDB=window.indexedDB||window.webkitindexedDB,this.IDBKeyRange=window.IDBKeyRange||window.webkitIDBKeyRange,this.myDB=a}return X(s,[{key:"openDB",value:function(r){var t=this,e=this,i=this.myDB.version||1,n=e.indexedDB.open(e.myDB.name,i);n.onerror=function(o){},n.onsuccess=function(o){t.myDB.db=o.target.result,r.call(e)},n.onupgradeneeded=function(o){var l=o.target.result;o.target.transaction,l.objectStoreNames.contains(e.myDB.ojstore.name)||l.createObjectStore(e.myDB.ojstore.name,{keyPath:e.myDB.ojstore.keypath})}}},{key:"deletedb",value:function(){var r=this;r.indexedDB.deleteDatabase(this.myDB.name)}},{key:"closeDB",value:function(){this.myDB.db.close()}},{key:"addData",value:function(r,t){for(var e=this.myDB.db.transaction(r,"readwrite").objectStore(r),i,n=0;n<t.length;n++)i=e.add(t[n]),i.onerror=function(){},i.onsuccess=function(){}}},{key:"putData",value:function(r,t){for(var e=this.myDB.db.transaction(r,"readwrite").objectStore(r),i,n=0;n<t.length;n++)i=e.put(t[n]),i.onerror=function(){},i.onsuccess=function(){}}},{key:"getDataByKey",value:function(r,t,e){var i=this,n=this.myDB.db.transaction(r,"readwrite").objectStore(r),o=n.get(t);o.onerror=function(){e.call(i,null)},o.onsuccess=function(l){var u=l.target.result;e.call(i,u)}}},{key:"deleteData",value:function(r,t){var e=this.myDB.db.transaction(r,"readwrite").objectStore(r);e.delete(t)}},{key:"clearData",value:function(r){var t=this.myDB.db.transaction(r,"readwrite").objectStore(r);t.clear()}}]),s}(),Jr=["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],Zr=["requestFullscreen","webkitRequestFullscreen","mozRequestFullScreen","msRequestFullscreen"],Qr=["exitFullscreen","webkitExitFullscreen","mozCancelFullScreen","msExitFullscreen"],Ut="data-xgplayerid";function $n(s,a,r){for(var t=arguments.length,e=new Array(t>3?t-3:0),i=3;i<t;i++)e[i-3]=arguments[i];var n=a.call.apply(a,[s].concat(e));!r||typeof r!="function"||(n&&n.then?n.then(function(){for(var o=arguments.length,l=new Array(o),u=0;u<o;u++)l[u]=arguments[u];r.call.apply(r,[s].concat(l))}):r.call.apply(r,[s].concat(e)))}function mi(s,a){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{pre:null,next:null};return this.__hooks||(this.__hooks={}),!this.__hooks[s]&&(this.__hooks[s]=null),(function(){var t=arguments,e=this;if(r.pre)try{var i;(i=r.pre).call.apply(i,[this].concat(Array.prototype.slice.call(arguments)))}catch(l){throw l.message="[pluginName: ".concat(this.pluginName,":").concat(s,":pre error] >> ").concat(l.message),l}if(this.__hooks&&this.__hooks[s])try{var n,o=(n=this.__hooks[s]).call.apply(n,[this,this].concat(Array.prototype.slice.call(arguments)));o?o.then?o.then(function(l){l!==!1&&$n.apply(void 0,[e,a,r.next].concat(xt(t)))}).catch(function(l){throw l}):$n.apply(void 0,[this,a,r.next].concat(Array.prototype.slice.call(arguments))):o===void 0&&$n.apply(void 0,[this,a,r.next].concat(Array.prototype.slice.call(arguments)))}catch(l){throw l.message="[pluginName: ".concat(this.pluginName,":").concat(s,"] >> ").concat(l.message),l}else $n.apply(void 0,[this,a,r.next].concat(Array.prototype.slice.call(arguments)))}).bind(this)}function yi(s,a){var r=this.__hooks;if(r)return r.hasOwnProperty(s)?(r&&(r[s]=a),!0):(console.warn("has no supported hook which name [".concat(s,"]")),!1)}function bi(s,a){var r=this.__hooks;r&&delete r[s]}function qr(s){if(!(!this.plugins||!this.plugins[s.toLowerCase()])){for(var a=this.plugins[s.toLowerCase()],r=arguments.length,t=new Array(r>1?r-1:0),e=1;e<r;e++)t[e-1]=arguments[e];return a.useHooks&&a.useHooks.apply(a,t)}}function eo(s){if(!(!this.plugins||!this.plugins[s.toLowerCase()])){var a=this.plugins[s.toLowerCase()];if(a){for(var r=arguments.length,t=new Array(r>1?r-1:0),e=1;e<r;e++)t[e-1]=arguments[e];return a.removeHooks&&a.removeHooks.apply(a,t)}}}function ra(s){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];s.__hooks={},a&&a.map(function(r){s.__hooks[r]=null}),Object.defineProperty(s,"hooks",{get:function(){return s.__hooks&&Object.keys(s.__hooks).map(function(t){if(s.__hooks[t])return t})}})}function oa(s){s.__hooks=null}function Et(s,a,r){for(var t=arguments.length,e=new Array(t>3?t-3:0),i=3;i<t;i++)e[i-3]=arguments[i];if(s.__hooks&&s.__hooks[a]){var n,o=(n=s.__hooks[a]).call.apply(n,[s,s].concat(e));if(o&&o.then)o.then(function(l){return l===!1?null:r.call.apply(r,[s,s].concat(e))}).catch(function(l){console.warn("[runHooks]".concat(a," reject"),l.message)});else if(o!==!1)return r.call.apply(r,[s,s].concat(e))}else return r.call.apply(r,[s,s].concat(e))}function Vi(s,a){ge.logError("[".concat(s,"] event or callback cant be undefined or null when call ").concat(a))}var Wt=function(){function s(a){Y(this,s),v.checkIsFunction(this.beforeCreate)&&this.beforeCreate(a),ra(this),this.__args=a,this.__events={},this.__onceEvents={},this.config=a.config||{},this.player=null,this.playerConfig={},this.pluginName="",this.__init(a)}return X(s,[{key:"beforeCreate",value:function(r){}},{key:"afterCreate",value:function(){}},{key:"beforePlayerInit",value:function(){}},{key:"onPluginsReady",value:function(){}},{key:"afterPlayerInit",value:function(){}},{key:"destroy",value:function(){}},{key:"__init",value:function(r){this.player=r.player,this.playerConfig=r.player&&r.player.config,this.pluginName=r.pluginName?r.pluginName.toLowerCase():this.constructor.pluginName.toLowerCase(),this.logger=r.player&&r.player.logger}},{key:"updateLang",value:function(r){r||(r=this.lang)}},{key:"lang",get:function(){return this.player.lang}},{key:"i18n",get:function(){return this.player.i18n}},{key:"i18nKeys",get:function(){return this.player.i18nKeys}},{key:"domEventType",get:function(){var r=v.checkTouchSupport()?"touch":"mouse";return this.playerConfig&&(this.playerConfig.domEventType==="touch"||this.playerConfig.domEventType==="mouse")&&(r=this.playerConfig.domEventType),r}},{key:"on",value:function(r,t){var e=this;if(!r||!t||!this.player){Vi(this.pluginName,"plugin.on(event, callback)");return}typeof r=="string"?(this.__events[r]=t,this.player.on(r,t)):Array.isArray(r)&&r.forEach(function(i){e.__events[i]=t,e.player.on(i,t)})}},{key:"once",value:function(r,t){var e=this;if(!r||!t||!this.player){Vi(this.pluginName,"plugin.once(event, callback)");return}typeof r=="string"?(this.__onceEvents[r]=t,this.player.once(r,t)):Array.isArray(r)&&r.forEach(function(i){e.__onceEvents[i]=t,e.player.once(r,t)})}},{key:"off",value:function(r,t){var e=this;if(!r||!t||!this.player){Vi(this.pluginName,"plugin.off(event, callback)");return}typeof r=="string"?(delete this.__events[r],this.player.off(r,t)):Array.isArray(r)&&r.forEach(function(i){delete e.__events[r],e.player.off(i,t)})}},{key:"offAll",value:function(){var r=this;["__events","__onceEvents"].forEach(function(t){Object.keys(r[t]).forEach(function(e){r[t][e]&&r.off(e,r[t][e]),e&&delete r[t][e]})}),this.__events={},this.__onceEvents={}}},{key:"emit",value:function(r){var t;if(this.player){for(var e=arguments.length,i=new Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];(t=this.player).emit.apply(t,[r].concat(i))}}},{key:"emitUserAction",value:function(r,t){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(this.player){var i=Ne(Ne({},e),{},{pluginName:this.pluginName});this.player.emitUserAction(r,t,i)}}},{key:"hook",value:function(r,t){return mi.call.apply(mi,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"useHooks",value:function(r,t){for(var e=arguments.length,i=new Array(e>2?e-2:0),n=2;n<e;n++)i[n-2]=arguments[n];return yi.call.apply(yi,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"removeHooks",value:function(r,t){for(var e=arguments.length,i=new Array(e>2?e-2:0),n=2;n<e;n++)i[n-2]=arguments[n];return bi.call.apply(bi,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"registerPlugin",value:function(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";if(this.player)return e&&(t.pluginName=e),this.player.registerPlugin({plugin:r,options:t})}},{key:"getPlugin",value:function(r){return this.player?this.player.getPlugin(r):null}},{key:"__destroy",value:function(){var r=this,t=this.player,e=this.pluginName;this.offAll(),v.clearAllTimers(this),v.checkIsFunction(this.destroy)&&this.destroy(),["player","playerConfig","pluginName","logger","__args","__hooks"].map(function(i){r[i]=null}),t.unRegisterPlugin(e),oa(this)}}],[{key:"defineGetterOrSetter",value:function(r,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&Object.defineProperty(r,e,t[e])}},{key:"defaultConfig",get:function(){return{}}},{key:"pluginName",get:function(){return"pluginName"}}]),s}(),hc=9;if(typeof Element<"u"&&!Element.prototype.matches){var Qt=Element.prototype;Qt.matches=Qt.matchesSelector||Qt.mozMatchesSelector||Qt.msMatchesSelector||Qt.oMatchesSelector||Qt.webkitMatchesSelector}function gc(s,a){for(;s&&s.nodeType!==hc;){if(typeof s.matches=="function"&&s.matches(a))return s;s=s.parentNode}}var vc=gc,pc=vc;function Wi(s,a,r,t,e){var i=yc.apply(this,arguments);return s.addEventListener(r,i,e),{destroy:function(){s.removeEventListener(r,i,e)}}}function mc(s,a,r,t,e){return typeof s.addEventListener=="function"?Wi.apply(null,arguments):typeof r=="function"?Wi.bind(null,document).apply(null,arguments):(typeof s=="string"&&(s=document.querySelectorAll(s)),Array.prototype.map.call(s,function(i){return Wi(i,a,r,t,e)}))}function yc(s,a,r,t){return function(e){e.delegateTarget=pc(e.target,a),e.delegateTarget&&t.call(s,e)}}var bc=mc;const to=Ti(bc);var Sc={CONTROLS:"controls",ROOT:"root"},Ce={ROOT:"root",ROOT_LEFT:"rootLeft",ROOT_RIGHT:"rootRight",ROOT_TOP:"rootTop",CONTROLS_LEFT:"controlsLeft",CONTROLS_RIGTH:"controlsRight",CONTROLS_RIGHT:"controlsRight",CONTROLS_CENTER:"controlsCenter",CONTROLS:"controls"};function Ki(s){return s?s.indexOf&&/^(?:http|data:|\/)/.test(s):!1}function Ec(s,a){return $e(s)==="object"&&s.class&&typeof s.class=="string"?"".concat(a," ").concat(s.class):a}function Cc(s,a){return $e(s)==="object"&&s.attr&&$e(s.attr)==="object"&&Object.keys(s.attr).map(function(r){a[r]=s.attr[r]}),a}function no(s,a){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"",t=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},e=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"",i=null;if(s instanceof window.Element)return v.addClass(s,r),Object.keys(t).map(function(n){s.setAttribute(n,t[n])}),s;if(Ki(s)||Ki(s.url))return t.src=Ki(s)?s:s.url||"",i=v.createDom(s.tag||"img","",t,"xg-img ".concat(r)),i;if(typeof s=="function")try{return i=s(),i instanceof window.Element?(v.addClass(i,r),Object.keys(t).map(function(n){i.setAttribute(n,t[n])}),i):(ge.logWarn("warn>>icons.".concat(a," in config of plugin named [").concat(e,"] is a function mast return an Element Object")),null)}catch(n){return ge.logError("Plugin named [".concat(e,"]:createIcon"),n),null}return typeof s=="string"?v.createDomFromHtml(s,t,r):(ge.logWarn("warn>>icons.".concat(a," in config of plugin named [").concat(e,"] is invalid")),null)}function Tc(s,a){var r=a.config.icons||a.playerConfig.icons;Object.keys(s).map(function(t){var e=s[t],i=e&&e.class?e.class:"",n=e&&e.attr?e.attr:{},o=null;r&&r[t]&&(i=Ec(r[t],i),n=Cc(r[t],n),o=no(r[t],t,i,n,a.pluginName)),!o&&e&&(o=no(e.icon?e.icon:e,n,i,{},a.pluginName)),a.icons[t]=o})}function xc(s,a){Object.keys(s).map(function(r){Object.defineProperty(a.langText,r,{get:function(){var e=a.lang,i=a.i18n;return i[r]?i[r]:s[r]&&s[r][e]||""}})})}var be=function(s){oe(r,s);var a=ae(r);function r(){var t,e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Y(this,r),t=a.call(this,e),t.__delegates=[],t}return X(r,[{key:"__init",value:function(e){if(re(ne(r.prototype),"__init",this).call(this,e),!!e.root){var i=e.root,n=null;this.icons={},this.root=null,this.parent=null;var o=this.registerIcons()||{};Tc(o,this),this.langText={};var l=this.registerLanguageTexts()||{};xc(l,this);var u="";try{u=this.render()}catch(d){throw ge.logError("Plugin:".concat(this.pluginName,":render"),d),new Error("Plugin:".concat(this.pluginName,":render:").concat(d.message))}if(u)n=r.insert(u,i,e.index),n.setAttribute("data-index",e.index);else if(e.tag)n=v.createDom(e.tag,"",e.attr,e.name),n.setAttribute("data-index",e.index),i.appendChild(n);else return;this.root=n,this.parent=i;var c=this.config.attr||{},f=this.config.style||{};this.setAttr(c),this.setStyle(f),this.config.index&&this.root.setAttribute("data-index",this.config.index),this.__registerChildren()}}},{key:"__registerChildren",value:function(){var e=this;if(this.root){this._children=[];var i=this.children();i&&$e(i)==="object"&&Object.keys(i).length>0&&Object.keys(i).map(function(n){var o=n,l=i[o],u={root:e.root},c,f;typeof l=="function"?(c=e.config[o]||{},f=l):$e(l)==="object"&&typeof l.plugin=="function"&&(c=l.options?v.deepCopy(e.config[o]||{},l.options):e.config[o]||{},f=l.plugin),u.config=c,c.index!==void 0&&(u.index=c.index),c.root&&(u.root=c.root),e.registerPlugin(f,u,o)})}}},{key:"updateLang",value:function(e){e||(e=this.lang);function i(u,c){for(var f=0;f<u.children.length;f++)u.children[f].children.length>0?i(u.children[f],c):c(u.children[f])}var n=this.root,o=this.i18n,l=this.langText;n&&i(n,function(u){var c=u.getAttribute&&u.getAttribute("lang-key");if(c){var f=o[c.toUpperCase()]||l[c];f&&(u.innerHTML=typeof f=="function"?f(e):f)}})}},{key:"lang",get:function(){return this.player.lang}},{key:"changeLangTextKey",value:function(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",n=this.i18n||{},o=this.langText;e.setAttribute&&e.setAttribute("lang-key",i);var l=n[i]||o[i]||"";l&&(e.innerHTML=l)}},{key:"plugins",value:function(){return this._children}},{key:"children",value:function(){return{}}},{key:"registerPlugin",value:function(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";i.root=i.root||this.root;var o=re(ne(r.prototype),"registerPlugin",this).call(this,e,i,n);return this._children.push(o),o}},{key:"registerIcons",value:function(){return{}}},{key:"registerLanguageTexts",value:function(){return{}}},{key:"find",value:function(e){if(this.root)return this.root.querySelector(e)}},{key:"bind",value:function(e,i,n){var o=this;if(arguments.length<3&&typeof i=="function")Array.isArray(e)?e.forEach(function(u){o.bindEL(u,i)}):this.bindEL(e,i);else{var l=r.delegate.call(this,this.root,e,i,n);this.__delegates=this.__delegates.concat(l)}}},{key:"unbind",value:function(e,i){var n=this;if(arguments.length<3&&typeof i=="function")Array.isArray(e)?e.forEach(function(u){n.unbindEL(u,i)}):this.unbindEL(e,i);else for(var o="".concat(e,"_").concat(i),l=0;l<this.__delegates.length;l++)if(this.__delegates[l].key===o){this.__delegates[l].destroy(),this.__delegates.splice(l,1);break}}},{key:"setStyle",value:function(e,i){var n=this;if(this.root){if(v.typeOf(e)==="String")return this.root.style[e]=i;v.typeOf(e)==="Object"&&Object.keys(e).map(function(o){n.root.style[o]=e[o]})}}},{key:"setAttr",value:function(e,i){var n=this;if(this.root){if(v.typeOf(e)==="String")return this.root.setAttribute(e,i);v.typeOf(e)==="Object"&&Object.keys(e).map(function(o){n.root.setAttribute(o,e[o])})}}},{key:"setHtml",value:function(e,i){this.root&&(this.root.innerHTML=e,typeof i=="function"&&i())}},{key:"bindEL",value:function(e,i){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this.root&&"on".concat(e)in this.root&&typeof i=="function"&&this.root.addEventListener(e,i,n)}},{key:"unbindEL",value:function(e,i){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this.root&&"on".concat(e)in this.root&&typeof i=="function"&&this.root.removeEventListener(e,i,n)}},{key:"show",value:function(e){if(this.root){this.root.style.display=e!==void 0?e:"block";var i=window.getComputedStyle(this.root,null),n=i.getPropertyValue("display");if(n==="none")return this.root.style.display="block"}}},{key:"hide",value:function(){this.root&&(this.root.style.display="none")}},{key:"appendChild",value:function(e,i){if(!this.root)return null;if(arguments.length<2&&arguments[0]instanceof window.Element)return this.root.appendChild(arguments[0]);if(!i||!(i instanceof window.Element))return null;try{return typeof e=="string"?this.find(e).appendChild(i):e.appendChild(i)}catch(n){return ge.logError("Plugin:appendChild",n),null}}},{key:"render",value:function(){return""}},{key:"destroy",value:function(){}},{key:"__destroy",value:function(){var e=this,i=this.player;this.__delegates.map(function(n){n.destroy()}),this.__delegates=[],this._children instanceof Array&&(this._children.map(function(n){i.unRegisterPlugin(n.pluginName)}),this._children=null),this.root&&(this.root.hasOwnProperty("remove")?this.root.remove():this.root.parentNode&&this.root.parentNode.removeChild(this.root)),re(ne(r.prototype),"__destroy",this).call(this),this.icons={},["root","parent"].map(function(n){e[n]=null})}}],[{key:"insert",value:function(e,i){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,o=i.children.length,l=Number(n),u=e instanceof window.Node;if(o){for(var c=0,f=null,d="";c<o;c++){f=i.children[c];var h=Number(f.getAttribute("data-index"));if(h>=l){d="beforebegin";break}else h<l&&(d="afterend")}return u?d==="afterend"?i.appendChild(e):i.insertBefore(e,f):f.insertAdjacentHTML(d,e),d==="afterend"?i.children[i.children.length-1]:i.children[c]}else return u?i.appendChild(e):i.insertAdjacentHTML("beforeend",e),i.children[i.children.length-1]}},{key:"defaultConfig",get:function(){return{}}},{key:"delegate",value:function(e,i,n,o){var l=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1,u=[];if(e instanceof window.Node&&typeof o=="function")if(Array.isArray(n))n.forEach(function(f){var d=to(e,i,f,o,l);d.key="".concat(i,"_").concat(f),u.push(d)});else{var c=to(e,i,n,o,l);c.key="".concat(i,"_").concat(n),u.push(c)}return u}},{key:"ROOT_TYPES",get:function(){return Sc}},{key:"POSITIONS",get:function(){return Ce}}]),r}(Wt),Ic=function(){function s(){var a=this;if(Y(this,s),A(this,"__trigger",function(r){var t=new Date().getTime();a.timeStamp=t;for(var e=0;e<r.length;e++)a.__runHandler(r[e].target)}),this.__handlers=[],this.timeStamp=0,this.observer=null,!!window.ResizeObserver)try{this.observer=new window.ResizeObserver(Xu(this.__trigger,100,{trailing:!0})),this.timeStamp=new Date().getTime()}catch(r){console.error(r)}}return X(s,[{key:"addObserver",value:function(r,t){if(this.observer){this.observer&&this.observer.observe(r);for(var e=r.getAttribute(Ut),i=this.__handlers,n=-1,o=0;o<i.length;o++)i[o]&&r===i[o].target&&(n=o);n>-1?this.__handlers[n].handler=t:this.__handlers.push({target:r,handler:t,playerId:e})}}},{key:"unObserver",value:function(r){var t=-1;this.__handlers.map(function(e,i){r===e.target&&(t=i)});try{this.observer&&this.observer.unobserve(r)}catch{}this.observer&&this.observer.unobserve(r),t>-1&&this.__handlers.splice(t,1)}},{key:"destroyObserver",value:function(){this.observer&&this.observer.disconnect(),this.observer=null,this.__handlers=null}},{key:"__runHandler",value:function(r){for(var t=this.__handlers,e=0;e<t.length;e++)if(t[e]&&r===t[e].target){try{t[e].handler(r)}catch(i){console.error(i)}return!0}return!1}}]),s}(),Pn=null;function wc(s,a){return Pn||(Pn=new Ic),Pn.addObserver(s,a),Pn}function Pc(s,a){Pn.unObserver(s,a)}var _e={pluginGroup:{},init:function(a){var r=a._pluginInfoId;r||(r=new Date().getTime(),a._pluginInfoId=r),!a.config.closeResizeObserver&&wc(a.root,function(){a.resize()}),Object.keys(this.pluginGroup).length===0&&(a.isUserActive=!0),this.pluginGroup[r]={_player:a,_originalOptions:a.config||{},_plugins:{}}},checkPlayerRoot:function(a){if(this.pluginGroup){for(var r=Object.keys(this.pluginGroup),t=0;t<r.length;t++){var e=this.pluginGroup[r[t]]._player;if(e.root===a)return e}return null}return null},formatPluginInfo:function(a,r){var t=null,e=null;return a.plugin&&typeof a.plugin=="function"?(t=a.plugin,e=a.options):(t=a,e={}),r&&(e.config=r||{}),{PLUFGIN:t,options:e}},checkPluginIfExits:function(a,r){for(var t=0;t<r.length;t++)if(a.toLowerCase()===r[t].pluginName.toLowerCase())return!0;return!1},getRootByConfig:function(a,r){for(var t=Object.keys(r),e=null,i=0;i<t.length;i++)if(a.toLowerCase()===t[i].toLowerCase()){e=r[t[i]];break}return v.typeOf(e)==="Object"?{root:e.root,position:e.position}:{}},lazyRegister:function(a,r){var t=this,e=r.timeout||1500;return Promise.race([r.loader().then(function(i){var n;i&&i.__esModule?n=i.default:n=i,t.register(a,n,i.options)}),new Promise(function(i,n){setTimeout(function(){n(new Error("timeout"))},e)})])},register:function(a,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!(!a||!r||typeof r!="function"||r.prototype===void 0)){var e=a._pluginInfoId;if(!(!e||!this.pluginGroup[e])){this.pluginGroup[e]._plugins||(this.pluginGroup[e]._plugins={});var i=this.pluginGroup[e]._plugins,n=this.pluginGroup[e]._originalOptions;t.player=this.pluginGroup[e]._player;var o=t.pluginName||r.pluginName;if(!o)throw new Error("The property pluginName is necessary");if(r.isSupported&&!r.isSupported(a.config.mediaType,a.config.codecType)){console.warn("not supported plugin [".concat(o,"]"));return}t.config||(t.config={});for(var l=Object.keys(n),u=0;u<l.length;u++)if(o.toLowerCase()===l[u].toLowerCase()){var c=n[l[u]];v.typeOf(c)==="Object"?t.config=Object.assign({},t.config,n[l[u]]):v.typeOf(c)==="Boolean"&&(t.config.disable=!c);break}r.defaultConfig&&Object.keys(r.defaultConfig).forEach(function(d){typeof t.config[d]>"u"&&(t.config[d]=r.defaultConfig[d])}),t.root?typeof t.root=="string"&&(t.root=a[t.root]):t.root=a.root,t.index=t.config.index||0;try{i[o.toLowerCase()]&&(this.unRegister(e,o.toLowerCase()),console.warn("the is one plugin with same pluginName [".concat(o,"] exist, destroy the old instance")));var f=new r(t);return i[o.toLowerCase()]=f,i[o.toLowerCase()].func=r,f&&typeof f.afterCreate=="function"&&f.afterCreate(),f}catch(d){throw console.error(d),d}}}},unRegister:function(a,r){a._pluginInfoId&&(a=a._pluginInfoId),r=r.toLowerCase();try{var t=this.pluginGroup[a]._plugins[r];t&&(t.pluginName&&t.__destroy(),delete this.pluginGroup[a]._plugins[r])}catch(e){console.error("[unRegister:".concat(r,"] cgid:[").concat(a,"] error"),e)}},deletePlugin:function(a,r){var t=a._pluginInfoId;t&&this.pluginGroup[t]&&this.pluginGroup[t]._plugins&&delete this.pluginGroup[t]._plugins[r]},getPlugins:function(a){var r=a._pluginInfoId;return r&&this.pluginGroup[r]?this.pluginGroup[r]._plugins:{}},findPlugin:function(a,r){var t=a._pluginInfoId;if(!t||!this.pluginGroup[t])return null;var e=r.toLowerCase();return this.pluginGroup[t]._plugins[e]},beforeInit:function(a){var r=this;function t(e){return!e||!e.then?new Promise(function(i){i()}):e}return new Promise(function(e){if(r.pluginGroup){var i;return a._loadingPlugins&&a._loadingPlugins.length?i=Promise.all(a._loadingPlugins):i=Promise.resolve(),i.then(function(){var n=a._pluginInfoId;if(!r.pluginGroup[n]){e();return}var o=r.pluginGroup[n]._plugins,l=[];Object.keys(o).forEach(function(u){if(o[u]&&o[u].beforePlayerInit)try{var c=o[u].beforePlayerInit();l.push(t(c))}catch(f){throw l.push(t(null)),f}}),Promise.all([].concat(l)).then(function(){e()}).catch(function(u){console.error(u),e()})})}})},afterInit:function(a){var r=a._pluginInfoId;if(!(!r||!this.pluginGroup[r])){var t=this.pluginGroup[r]._plugins;Object.keys(t).forEach(function(e){t[e]&&t[e].afterPlayerInit&&t[e].afterPlayerInit()})}},setLang:function(a,r){var t=r._pluginInfoId;if(!(!t||!this.pluginGroup[t])){var e=this.pluginGroup[t]._plugins;Object.keys(e).forEach(function(i){if(e[i].updateLang)e[i].updateLang(a);else try{e[i].lang=a}catch{console.warn("".concat(i," setLang"))}})}},reRender:function(a){var r=this,t=a._pluginInfoId;if(!(!t||!this.pluginGroup[t])){var e=[],i=this.pluginGroup[t]._plugins;Object.keys(i).forEach(function(n){n!=="controls"&&i[n]&&(e.push({plugin:i[n].func,options:i[n].__args}),r.unRegister(t,n))}),e.forEach(function(n){r.register(a,n.plugin,n.options)})}},onPluginsReady:function(a){var r=a._pluginInfoId;if(!(!r||!this.pluginGroup[r])){var t=this.pluginGroup[r]._plugins||{};Object.keys(t).forEach(function(e){t[e].onPluginsReady&&typeof t[e].onPluginsReady=="function"&&t[e].onPluginsReady()})}},setCurrentUserActive:function(a,r){if(this.pluginGroup[a]){if(!r)return this.pluginGroup[a]._player.isUserActive=r,a;for(var t=Object.keys(this.pluginGroup),e=0;e<t.length;e++){var i=this.pluginGroup[t[e]];i&&i._player&&(this.pluginGroup[t[e]]._player.isUserActive=!1)}return this.pluginGroup[a]._player.isUserActive=r,a}},getCurrentUseActiveId:function(){if(this.pluginGroup){for(var a=Object.keys(this.pluginGroup),r=0;r<a.length;r++){var t=this.pluginGroup[a[r]];if(t&&t._player&&t._player.isUserActive)return a[r]}return null}},destroy:function(a){var r=a._pluginInfoId;if(this.pluginGroup[r]){Pc(a.root);for(var t=this.pluginGroup[r]._plugins,e=0,i=Object.keys(t);e<i.length;e++){var n=i[e];this.unRegister(r,n)}var o=a.isUseActive;if(delete this.pluginGroup[r],delete a._pluginInfoId,o){var l=Object.keys(this.pluginGroup);l.length>0&&this.setCurrentUserActive(l[l.length-1],!0)}}}},M={DEFAULT:"xgplayer",DEFAULT_SKIN:"xgplayer-skin-default",ENTER:"xgplayer-is-enter",PAUSED:"xgplayer-pause",PLAYING:"xgplayer-playing",ENDED:"xgplayer-ended",CANPLAY:"xgplayer-canplay",LOADING:"xgplayer-isloading",ERROR:"xgplayer-is-error",REPLAY:"xgplayer-replay",NO_START:"xgplayer-nostart",ACTIVE:"xgplayer-active",INACTIVE:"xgplayer-inactive",FULLSCREEN:"xgplayer-is-fullscreen",CSS_FULLSCREEN:"xgplayer-is-cssfullscreen",ROTATE_FULLSCREEN:"xgplayer-rotate-fullscreen",PARENT_ROTATE_FULLSCREEN:"xgplayer-rotate-parent",PARENT_FULLSCREEN:"xgplayer-fullscreen-parent",INNER_FULLSCREEN:"xgplayer-fullscreen-inner",NO_CONTROLS:"no-controls",FLEX_CONTROLS:"flex-controls",CONTROLS_FOLLOW:"controls-follow",CONTROLS_AUTOHIDE:"controls-autohide",TOP_BAR_AUTOHIDE:"top-bar-autohide",NOT_ALLOW_AUTOPLAY:"not-allow-autoplay",SEEKING:"seeking",PC:"xgplayer-pc",MOBILE:"xgplayer-mobile",MINI:"xgplayer-mini"};function io(){return{id:"",el:null,url:"",domEventType:"default",nullUrlStart:!1,width:600,height:337.5,fluid:!1,fitVideoSize:"fixed",videoFillMode:"auto",volume:.6,autoplay:!1,autoplayMuted:!1,loop:!1,isLive:!1,zoom:1,videoInit:!0,poster:"",isMobileSimulateMode:!1,defaultPlaybackRate:1,execBeforePluginsCall:null,allowSeekAfterEnded:!0,enableContextmenu:!0,closeVideoClick:!1,closeVideoDblclick:!1,closePlayerBlur:!1,closeDelayBlur:!1,leavePlayerTime:3e3,closePlayVideoFocus:!1,closePauseVideoFocus:!1,closeFocusVideoFocus:!0,closeControlsBlur:!0,topBarAutoHide:!0,videoAttributes:{},startTime:0,seekedStatus:"play",miniprogress:!1,disableSwipeHandler:function(){},enableSwipeHandler:function(){},ignores:[],whitelist:[],inactive:3e3,lang:Ju(),controls:!0,marginControls:!1,fullscreenTarget:null,screenShot:!1,rotate:!1,pip:!1,download:!1,mini:!1,cssFullscreen:!0,keyShortcut:!0,presets:[],plugins:[],playbackRate:1,definition:{list:[]},playsinline:!0,customDuration:0,timeOffset:0,icons:{},i18n:[],tabindex:0,thumbnail:null,videoConfig:{},isHideTips:!1,minWaitDelay:200,commonStyle:{progressColor:"",playedColor:"",cachedColor:"",sliderBtnStyle:{},volumeColor:""}}}var kc=function(a,r){var t,e,i;r.preset&&r.options?i=new r.preset(r.options,a.config):i=new r({},a.config);var n=i,o=n.plugins,l=o===void 0?[]:o,u=n.ignores,c=u===void 0?[]:u,f=n.icons,d=f===void 0?{}:f,h=n.i18n,g=h===void 0?[]:h;a.config.plugins||(a.config.plugins=[]),a.config.ignores||(a.config.ignores=[]),(t=a.config.plugins).push.apply(t,xt(l)),(e=a.config.ignores).push.apply(e,xt(c)),Object.keys(d).map(function(m){a.config.icons[m]||(a.config.icons[m]=d[m])});var p=a.config.i18n||[];g.push.apply(g,xt(p)),a.config.i18n=g},Oc=function(s){oe(r,s);var a=ae(r);function r(){var t;Y(this,r);for(var e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];return t=a.call.apply(a,[this].concat(i)),A(w(t),"onMouseEnter",function(o){var l=w(t),u=l.player,c=l.playerConfig;c.closeControlsBlur&&u.focus({autoHide:!1})}),A(w(t),"onMouseLeave",function(o){var l=w(t),u=l.player;u.focus()}),t}return X(r,[{key:"beforeCreate",value:function(e){!e.config.mode&&ce.device==="mobile"&&(e.config.mode="flex"),e.player.config.marginControls&&(e.config.autoHide=!1)}},{key:"afterCreate",value:function(){var e=this,i=this.config,n=i.disable,o=i.height,l=i.mode;if(!n){l==="flex"&&this.player.addClass(M.FLEX_CONTROLS);var u={height:"".concat(o,"px")};Object.keys(u).map(function(f){e.root.style[f]=u[f]}),this.left=this.find("xg-left-grid"),this.center=this.find("xg-center-grid"),this.right=this.find("xg-right-grid"),this.innerRoot=this.find("xg-inner-controls"),this.on(gi,function(f){f?v.addClass(e.root,"mini-controls"):v.removeClass(e.root,"mini-controls")});var c=this.playerConfig.isMobileSimulateMode;ce.device!=="mobile"&&c!=="mobile"&&(this.bind("mouseenter",this.onMouseEnter),this.bind("mouseleave",this.onMouseLeave))}}},{key:"focus",value:function(){this.player.focus({autoHide:!1})}},{key:"focusAwhile",value:function(){this.player.focus({autoHide:!0})}},{key:"blur",value:function(){this.player.blur({ignorePaused:!0})}},{key:"recoverAutoHide",value:function(){this.config.autoHide&&v.addClass(this.root,M.CONTROLS_AUTOHIDE)}},{key:"pauseAutoHide",value:function(){v.removeClass(this.root,M.CONTROLS_AUTOHIDE)}},{key:"show",value:function(){this.root.style.display="",this.player.focus()}},{key:"hide",value:function(){this.root.style.display="none"}},{key:"mode",get:function(){return this.config.mode}},{key:"registerPlugin",value:function(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;if(this.root){var o=e.defaultConfig||{};if(!i.root){var l=i.position?i.position:i.config&&i.config.position?i.config.position:o.position;switch(l){case Ce.CONTROLS_LEFT:i.root=this.left;break;case Ce.CONTROLS_RIGHT:i.root=this.right;break;case Ce.CONTROLS_CENTER:i.root=this.center;break;case Ce.CONTROLS:i.root=this.root;break;default:i.root=this.left}return re(ne(r.prototype),"registerPlugin",this).call(this,e,i,n)}}}},{key:"destroy",value:function(){ce.device!=="mobile"&&(this.unbind("mouseenter",this.onMouseEnter),this.unbind("mouseleave",this.onMouseLeave))}},{key:"render",value:function(){var e=this.config,i=e.mode,n=e.autoHide,o=e.initShow,l=e.disable;if(!l){var u=v.classNames({"xgplayer-controls":!0},{"flex-controls":i==="flex"},{"bottom-controls":i==="bottom"},A({},M.CONTROLS_AUTOHIDE,n),{"xgplayer-controls-initshow":o||!n});return'<xg-controls class="'.concat(u,`" unselectable="on">
    <xg-inner-controls class="xg-inner-controls xg-pos">
      <xg-left-grid class="xg-left-grid">
      </xg-left-grid>
      <xg-center-grid class="xg-center-grid"></xg-center-grid>
      <xg-right-grid class="xg-right-grid">
      </xg-right-grid>
    </xg-inner-controls>
    </xg-controls>`)}}}],[{key:"pluginName",get:function(){return"controls"}},{key:"defaultConfig",get:function(){return{disable:!1,autoHide:!0,mode:"",initShow:!1}}}]),r}(be),Ac={LANG:"en",TEXT:{ERROR_TYPES:{network:{code:1,msg:"video download error"},mse:{code:2,msg:"stream append error"},parse:{code:3,msg:"parsing error"},format:{code:4,msg:"wrong format"},decoder:{code:5,msg:"decoding error"},runtime:{code:6,msg:"grammatical errors"},timeout:{code:7,msg:"play timeout"},other:{code:8,msg:"other errors"}},HAVE_NOTHING:"There is no information on whether audio/video is ready",HAVE_METADATA:"Audio/video metadata is ready ",HAVE_CURRENT_DATA:"Data about the current play location is available, but there is not enough data to play the next frame/millisecond",HAVE_FUTURE_DATA:"Current and at least one frame of data is available",HAVE_ENOUGH_DATA:"The available data is sufficient to start playing",NETWORK_EMPTY:"Audio/video has not been initialized",NETWORK_IDLE:"Audio/video is active and has been selected for resources, but no network is used",NETWORK_LOADING:"The browser is downloading the data",NETWORK_NO_SOURCE:"No audio/video source was found",MEDIA_ERR_ABORTED:"The fetch process is aborted by the user",MEDIA_ERR_NETWORK:"An error occurred while downloading",MEDIA_ERR_DECODE:"An error occurred while decoding",MEDIA_ERR_SRC_NOT_SUPPORTED:"Audio/video is not supported",REPLAY:"Replay",ERROR:"Network is offline",PLAY_TIPS:"Play",PAUSE_TIPS:"Pause",PLAYNEXT_TIPS:"Play next",DOWNLOAD_TIPS:"Download",ROTATE_TIPS:"Rotate",RELOAD_TIPS:"Reload",FULLSCREEN_TIPS:"Fullscreen",EXITFULLSCREEN_TIPS:"Exit fullscreen",CSSFULLSCREEN_TIPS:"Cssfullscreen",EXITCSSFULLSCREEN_TIPS:"Exit cssfullscreen",TEXTTRACK:"Caption",PIP:"PIP",SCREENSHOT:"Screenshot",LIVE:"LIVE",OFF:"Off",OPEN:"Open",MINI_DRAG:"Click and hold to drag",MINISCREEN:"Miniscreen",REFRESH_TIPS:"Please Try",REFRESH:"Refresh",FORWARD:"forward",LIVE_TIP:"Live"}},nt={lang:{},langKeys:[],textKeys:[]};function Mn(s,a){return Object.keys(a).forEach(function(r){var t=v.typeOf(a[r]),e=v.typeOf(s[r]);if(t==="Array"){var i;e!=="Array"&&(s[r]=[]),(i=s[r]).push.apply(i,xt(a[r]))}else t==="Object"?(e!=="Object"&&(s[r]={}),Mn(s[r],a[r])):s[r]=a[r]}),s}function aa(){Object.keys(nt.lang.en).map(function(s){nt.textKeys[s]=s})}function Dc(s,a){var r=[];if(a||(a=nt),!!a.lang){v.typeOf(s)!=="Array"?r=Object.keys(s).map(function(i){var n=i==="zh"?"zh-cn":i;return{LANG:n,TEXT:s[i]}}):r=s;var t=a,e=t.lang;r.map(function(i){i.LANG==="zh"&&(i.LANG="zh-cn"),e[i.LANG]?Mn(e[i.LANG]||{},i.TEXT||{}):kr(i,a)}),aa()}}function kr(s,a){var r=s.LANG;if(a||(a=nt),!!a.lang){var t=s.TEXT||{};r==="zh"&&(r="zh-cn"),a.lang[r]?Mn(a.lang[r],t):(a.langKeys.push(r),a.lang[r]=t),aa()}}function Lc(s){var a,r={lang:{},langKeys:[],textKeys:{},pId:s};return Mn(r.lang,nt.lang),(a=r.langKeys).push.apply(a,xt(nt.langKeys)),Mn(r.textKeys,nt.textKeys),r}kr(Ac);var ln={get textKeys(){return nt.textKeys},get langKeys(){return nt.langKeys},get lang(){var s={};return nt.langKeys.map(function(a){s[a]=nt.lang[a]}),nt.lang["zh-cn"]&&(s.zh=nt.lang["zh-cn"]||{}),s},extend:Dc,use:kr,init:Lc},pe={INITIAL:1,READY:2,ATTACHING:3,ATTACHED:4,NOTALLOW:5,RUNNING:6,ENDED:7,DESTROYED:8},ro=["ERROR","INITIAL","READY","ATTACHING","ATTACHED","NOTALLOW","RUNNING","ENDED","DESTROYED"],Rc=["play","pause","replay","retry"],oo=0,ao=0,Or=function(s){oe(r,s);var a=ae(r);function r(t){var e;Y(this,r);var i=v.deepMerge(io(),t);e=a.call(this,i),A(w(e),"canPlayFunc",function(){if(e.config){var g=e.config,p=g.autoplay,m=g.startTime,y=g.defaultPlaybackRate;ge.logInfo("player","canPlayFunc, startTime",m),m&&(e.currentTime=m>e.duration?e.duration:m,e.config.startTime=0),e.playbackRate=y,(p||e._useAutoplay)&&e.mediaPlay(),e.off(Ct,e.canPlayFunc),e.removeClass(M.ENTER)}}),A(w(e),"onFullscreenChange",function(g,p){var m=function(){v.setTimeout(w(e),function(){e.resize()},100)},y=v.getFullScreenEl();e._fullActionFrom?e._fullActionFrom="":e.emit(pi,{eventType:"system",action:"switch_fullscreen",pluginName:"player",currentTime:e.currentTime,duration:e.duration,props:[{prop:"fullscreen",from:!0,to:!1}]});var b=Zu(y,e.playerId,Ut);if(p||y&&(y===e._fullscreenEl||b))m(),!e.config.closeFocusVideoFocus&&e.media.focus(),e.fullscreen=!0,e.changeFullStyle(e.root,y,M.FULLSCREEN),e.emit(St,!0,e._fullScreenOffset),e.cssfullscreen&&e.exitCssFullscreen();else if(e.fullscreen){m();var S=w(e),E=S._fullScreenOffset,I=S.config;I.needFullscreenScroll?(window.scrollTo(E.left,E.top),v.setTimeout(w(e),function(){e.fullscreen=!1,e._fullScreenOffset=null},100)):(!e.config.closeFocusVideoFocus&&e.media.focus(),e.fullscreen=!1,e._fullScreenOffset=null),e.cssfullscreen?e.removeClass(M.FULLSCREEN):e.recoverFullStyle(e.root,e._fullscreenEl,M.FULLSCREEN),e._fullscreenEl=null,e.emit(St,!1)}}),A(w(e),"_onWebkitbeginfullscreen",function(g){e._fullscreenEl=e.media,e.onFullscreenChange(g,!0)}),A(w(e),"_onWebkitendfullscreen",function(g){e.onFullscreenChange(g,!1)}),ra(w(e),Rc),e.config=i,e._pluginInfoId=v.generateSessionId(),Ku(w(e));var n=e.constructor.defaultPreset;if(e.config.presets.length){var o=e.config.presets.indexOf("default");o>=0&&n&&(e.config.presets[o]=n)}else n&&e.config.presets.push(n);e.userTimer=null,e.waitTimer=null,e._state=pe.INITIAL,e.isError=!1,e._hasStart=!1,e.isSeeking=!1,e.isCanplay=!1,e._useAutoplay=!1,e.rotateDeg=0,e.isActive=!1,e.fullscreen=!1,e.cssfullscreen=!1,e.isRotateFullscreen=!1,e._fullscreenEl=null,e._cssfullscreenEl=null,e.curDefinition=null,e._orgCss="",e._fullScreenOffset=null,e._videoHeight=0,e._videoWidth=0,e.videoPos={pi:1,scale:0,rotate:0,x:0,y:0,h:-1,w:-1,vy:0,vx:0},e.sizeInfo={width:0,height:0,left:0,top:0},e._accPlayed={t:0,acc:0,loopAcc:0},e.innerContainer=null,e.controls=null,e.topBar=null,e.root=null,e.__i18n=ln.init(e._pluginInfoId),ce.os.isAndroid&&ce.osVersion>0&&ce.osVersion<6&&(e.config.autoplay=!1),e.database=new dc,e.isUserActive=!1,e._onceSeekCanplay=null,e._isPauseBeforeSeek=0;var l=e._initDOM();if(!l)return console.error(new Error("can't find the dom which id is ".concat(e.config.id," or this.config.el does not exist"))),br(e);var u=e.config,c=u.definition,f=c===void 0?{}:c,d=u.url;if(!d&&f.list&&f.list.length>0){var h=f.list.find(function(g){return g.definition&&g.definition===f.defaultDefinition});h||(f.defaultDefinition=f.list[0].definition,h=f.list[0]),e.config.url=h.url,e.curDefinition=h}return e._bindEvents(),e._registerPresets(),e._registerPlugins(),_e.onPluginsReady(w(e)),e.getInitDefinition(),e.setState(pe.READY),v.setTimeout(w(e),function(){e.emit(xr)},0),e.onReady&&e.onReady(),(e.config.videoInit||e.config.autoplay)&&(!e.hasStart||e.state<pe.ATTACHED)&&e.start(),e}return X(r,[{key:"_initDOM",value:function(){var e=this;if(this.root=this.config.id?document.getElementById(this.config.id):null,!this.root){var i=this.config.el;if(i&&i.nodeType===1)this.root=i;else return this.emit(_n,new fi("use",this.config.vid,{line:32,handle:"Constructor",msg:"container id can't be empty"})),console.error("this.confg.id or this.config.el can't be empty"),!1}var n=_e.checkPlayerRoot(this.root);n&&(ge.logWarn("The is an Player instance already exists in this.root, destroy it and reinitialize"),n.destroy()),this.root.setAttribute(Ut,this.playerId),_e.init(this),this._initBaseDoms();var o=this.constructor.XgVideoProxy;if(o&&this.mediaConfig.mediaType===o.mediaType){var l=this.innerContainer||this.root;this.detachVideoEvents(this.media);var u=new o(l,this.config,this.mediaConfig);this.attachVideoEvents(u),this.media=u}if(this.media.setAttribute(Ut,this.playerId),this.config.controls){var c=this.config.controls.root||null,f=_e.register(this,Oc,{root:c});this.controls=f}var d=this.config.isMobileSimulateMode==="mobile"?"mobile":ce.device;if(this.addClass("".concat(M.DEFAULT," ").concat(M.INACTIVE," xgplayer-").concat(d," ").concat(this.config.controls?"":M.NO_CONTROLS)),this.config.autoplay?this.addClass(M.ENTER):this.addClass(M.NO_START),this.config.fluid){var h=this.config,g=h.width,p=h.height;(typeof g!="number"||typeof p!="number")&&(g=600,p=337.5);var m={width:"100%",height:"0","max-width":"100%","padding-top":"".concat(p*100/g,"%")};Object.keys(m).forEach(function(T){e.root.style[T]=m[T]})}else["width","height"].forEach(function(T){e.config[T]&&(typeof e.config[T]!="number"?e.root.style[T]=e.config[T]:e.root.style[T]="".concat(e.config[T],"px"))});var y=this.root.getBoundingClientRect(),b=y.width,S=y.height,E=y.left,I=y.top;return this.sizeInfo.width=b,this.sizeInfo.height=S,this.sizeInfo.left=E,this.sizeInfo.top=I,!0}},{key:"_initBaseDoms",value:function(){this.topBar=null,this.leftBar=null,this.rightBar=null,this.config.marginControls&&(this.innerContainer=v.createDom("xg-video-container","",{"data-index":-1},"xg-video-container"),this.root.appendChild(this.innerContainer))}},{key:"_bindEvents",value:function(){var e=this;["focus","blur"].forEach(function(i){e.on(i,e["on"+i.charAt(0).toUpperCase()+i.slice(1)])}),Jr.forEach(function(i){document&&document.addEventListener(i,e.onFullscreenChange)}),ce.os.isIos&&(this.media.addEventListener("webkitbeginfullscreen",this._onWebkitbeginfullscreen),this.media.addEventListener("webkitendfullscreen",this._onWebkitendfullscreen)),this.once(Rt,this.resize),this.playFunc=function(){e.config.closeFocusVideoFocus||e.media.focus()},this.once(st,this.playFunc)}},{key:"_unbindEvents",value:function(){var e=this;this.root.removeEventListener("mousemove",this.mousemoveFunc),Jr.forEach(function(i){document.removeEventListener(i,e.onFullscreenChange)}),this.playFunc&&this.off(st,this.playFunc),this.off(Ct,this.canPlayFunc),this.media.removeEventListener("webkitbeginfullscreen",this._onWebkitbeginfullscreen),this.media.removeEventListener("webkitendfullscreen",this._onWebkitendfullscreen)}},{key:"_startInit",value:function(e){var i=this;if(this.media&&!((!e||e===""||v.typeOf(e)==="Array"&&e.length===0)&&(e="",this.emit(Yo),ge.logWarn("config.url is null, please get url and run player._startInit(url)"),this.config.nullUrlStart))){this._detachSourceEvents(this.media),v.typeOf(e)==="Array"&&e.length>0?this._attachSourceEvents(this.media,e):!this.media.src||this.media.src!==e?this.media.src=e:e||this.media.removeAttribute("src"),v.typeOf(this.config.volume)==="Number"&&(this.volume=this.config.volume);var n=this.innerContainer?this.innerContainer:this.root;this.media instanceof window.Element&&!n.contains(this.media)&&n.insertBefore(this.media,n.firstChild);var o=this.media.readyState;ge.logInfo("_startInit readyState",o),this.config.autoplay&&(!(/^blob/.test(this.media.currentSrc)||/^blob/.test(this.media.src))&&this.load(),(ce.os.isIpad||ce.os.isPhone)&&this.mediaPlay()),o>=2?this.canPlayFunc():this.once(Ct,this.canPlayFunc),(!this.hasStart||this.state<pe.ATTACHED)&&_e.afterInit(this),this.hasStart=!0,this.setState(pe.ATTACHED),v.setTimeout(this,function(){i.emit(Ii)},0)}}},{key:"_registerPlugins",value:function(){var e=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this._loadingPlugins=[];var n=this.config.ignores||[],o=this.config.plugins||[],l=this.config.i18n||[];i&&ln.extend(l,this.__i18n);var u=n.join("||").toLowerCase().split("||"),c=this.plugins;o.forEach(function(f){try{var d=f.plugin?f.plugin.pluginName:f.pluginName;if(d&&u.indexOf(d.toLowerCase())>-1)return null;if(!i&&c[d.toLowerCase()])return;if(f.lazy&&f.loader){var h=_e.lazyRegister(e,f);f.forceBeforeInit&&(h.then(function(){e._loadingPlugins.splice(e._loadingPlugins.indexOf(h),1)}).catch(function(g){ge.logError("_registerPlugins:loadingPlugin",g),e._loadingPlugins.splice(e._loadingPlugins.indexOf(h),1)}),e._loadingPlugins.push(h));return}return e.registerPlugin(f)}catch(g){ge.logError("_registerPlugins:",g)}})}},{key:"_registerPresets",value:function(){var e=this;this.config.presets.forEach(function(i){kc(e,i)})}},{key:"_getRootByPosition",value:function(e){var i=null;switch(e){case Ce.ROOT_RIGHT:this.rightBar||(this.rightBar=v.createPositionBar("xg-right-bar",this.root)),i=this.rightBar;break;case Ce.ROOT_LEFT:this.leftBar||(this.leftBar=v.createPositionBar("xg-left-bar",this.root)),i=this.leftBar;break;case Ce.ROOT_TOP:this.topBar||(this.topBar=v.createPositionBar("xg-top-bar",this.root),this.config.topBarAutoHide&&v.addClass(this.topBar,M.TOP_BAR_AUTOHIDE)),i=this.topBar;break;default:i=this.innerContainer||this.root;break}return i}},{key:"registerPlugin",value:function(e,i){var n=_e.formatPluginInfo(e,i),o=n.PLUFGIN,l=n.options,u=this.config.plugins,c=_e.checkPluginIfExits(o.pluginName,u);!c&&u.push(o);var f=_e.getRootByConfig(o.pluginName,this.config);f.root&&(l.root=f.root),f.position&&(l.position=f.position);var d=l.position?l.position:l.config&&l.config.position||o.defaultConfig&&o.defaultConfig.position;return!l.root&&typeof d=="string"&&d.indexOf("controls")>-1?this.controls&&this.controls.registerPlugin(o,l,o.pluginName):(l.root||(l.root=this._getRootByPosition(d)),_e.register(this,o,l))}},{key:"deregister",value:function(e){typeof e=="string"?_e.unRegister(this,e):e instanceof Wt&&_e.unRegister(this,e.pluginName)}},{key:"unRegisterPlugin",value:function(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;this.deregister(e),i&&this.removePluginFromConfig(e)}},{key:"removePluginFromConfig",value:function(e){var i;if(typeof e=="string"?i=e:e instanceof Wt&&(i=e.pluginName),!!i)for(var n=this.config.plugins.length-1;n>-1;n--){var o=this.config.plugins[n];if(o.pluginName.toLowerCase()===i.toLowerCase()){this.config.plugins.splice(n,1);break}}}},{key:"plugins",get:function(){return _e.getPlugins(this)}},{key:"getPlugin",value:function(e){var i=_e.findPlugin(this,e);return i&&i.pluginName?i:null}},{key:"addClass",value:function(e){this.root&&(v.hasClass(this.root,e)||v.addClass(this.root,e))}},{key:"removeClass",value:function(e){this.root&&v.removeClass(this.root,e)}},{key:"hasClass",value:function(e){if(this.root)return v.hasClass(this.root,e)}},{key:"setAttribute",value:function(e,i){this.root&&this.root.setAttribute(e,i)}},{key:"removeAttribute",value:function(e,i){this.root&&this.root.removeAttribute(e,i)}},{key:"start",value:function(e){var i=this;if(!(this.state>pe.ATTACHING))return!e&&!this.config.url&&this.getInitDefinition(),this.hasStart=!0,this.setState(pe.ATTACHING),this._registerPlugins(!1),_e.beforeInit(this).then(function(){if(i.config){e||(e=i.url||i.config.url);var n=i._startInit(e);return n}}).catch(function(n){throw n.fileName="player",n.lineNumber="236",ge.logError("start:beforeInit:",n),n})}},{key:"switchURL",value:function(e,i){var n=this,o=e;v.typeOf(e)==="Object"&&(o=e.url);var l=this.currentTime,u=this.paused&&!this.isError;return this.src=o,new Promise(function(c,f){var d=function(p){n.off("timeupdate",h),n.off("canplay",h),f(p)},h=function(){n.currentTime=l,u&&n.pause(),n.off("error",d),c(!0)};if(n.once("error",d),!o){n.errorHandler("error",{code:6,message:"empty_src"});return}ce.os.isAndroid?n.once("timeupdate",h):n.once("canplay",h),n.play()})}},{key:"videoPlay",value:function(){this.mediaPlay()}},{key:"mediaPlay",value:function(){var e=this;if(!this.hasStart&&this.state<pe.ATTACHED){this.removeClass(M.NO_START),this.addClass(M.ENTER),this.start(),this._useAutoplay=!0;return}this.state<pe.RUNNING&&(this.removeClass(M.NO_START),!this.isCanplay&&this.addClass(M.ENTER));var i=re(ne(r.prototype),"play",this).call(this);return i!==void 0&&i&&i.then?i.then(function(){e.removeClass(M.NOT_ALLOW_AUTOPLAY),e.addClass(M.PLAYING),e.state<pe.RUNNING&&(ge.logInfo(">>>>playPromise.then"),e.setState(pe.RUNNING),e.emit(Vt))}).catch(function(n){if(ge.logWarn(">>>>playPromise.catch",n.name),e.media&&e.media.error){e.onError(),e.removeClass(M.ENTER);return}n.name==="NotAllowedError"&&(e._errorTimer=v.setTimeout(e,function(){e._errorTimer=null,e.emit(Ir),e.addClass(M.NOT_ALLOW_AUTOPLAY),e.removeClass(M.ENTER),e.pause(),e.setState(pe.NOTALLOW)},0))}):(ge.logWarn("video.play not return promise"),this.state<pe.RUNNING&&(this.setState(pe.RUNNING),this.removeClass(M.NOT_ALLOW_AUTOPLAY),this.removeClass(M.NO_START),this.removeClass(M.ENTER),this.addClass(M.PLAYING),this.emit(Vt))),i}},{key:"mediaPause",value:function(){re(ne(r.prototype),"pause",this).call(this)}},{key:"videoPause",value:function(){re(ne(r.prototype),"pause",this).call(this)}},{key:"play",value:function(){var e=this;return this.removeClass(M.PAUSED),Et(this,"play",function(){return e.mediaPlay()})}},{key:"pause",value:function(){var e=this;Et(this,"pause",function(){re(ne(r.prototype),"pause",e).call(e)})}},{key:"seek",value:function(e,i){var n=this;if(!(!this.media||Number.isNaN(Number(e))||!this.hasStart)){var o=this.config,l=o.isSeekedPlay,u=o.seekedStatus,c=i||(l?"play":u);e=e<0?0:e>this.duration?parseInt(this.duration,10):e,!this._isPauseBeforeSeek&&(this._isPauseBeforeSeek=this.paused?2:1),this._onceSeekCanplay&&this.off(Lt,this._onceSeekCanplay),this._onceSeekCanplay=function(){switch(n.removeClass(M.ENTER),n.isSeeking=!1,c){case"play":n.play();break;case"pause":n.pause();break;default:n._isPauseBeforeSeek>1||n.paused?n.pause():n.play()}n._isPauseBeforeSeek=0,n._onceSeekCanplay=null},this.once(Lt,this._onceSeekCanplay),this.state<pe.RUNNING?(this.removeClass(M.NO_START),this.currentTime=e,this.play()):this.currentTime=e}}},{key:"getInitDefinition",value:function(){var e=this,i=this.config,n=i.definition,o=i.url;!o&&n&&n.list&&n.list.length>0&&n.defaultDefinition&&n.list.map(function(l){l.definition===n.defaultDefinition&&(e.config.url=l.url,e.curDefinition=l)})}},{key:"changeDefinition",value:function(e,i){var n=this,o=this.config.definition;if(Array.isArray(o==null?void 0:o.list)&&o.list.forEach(function(u){(e==null?void 0:e.definition)===u.definition&&(n.curDefinition=u)}),e!=null&&e.bitrate&&typeof e.bitrate!="number"&&(e.bitrate=parseInt(e.bitrate,10)||0),this.emit(Pr,{from:i,to:e}),!this.hasStart){this.config.url=e.url;return}var l=this.switchURL(e.url,Ne({seamless:o.seamless!==!1&&typeof MediaSource<"u"&&typeof MediaSource.isTypeSupported=="function"},e));l&&l.then?l.then(function(){n.emit(cr,{from:i,to:e})}):this.emit(cr,{from:i,to:e})}},{key:"reload",value:function(){this.load(),this.reloadFunc=function(){this.play()},this.once(Rt,this.reloadFunc)}},{key:"resetState",value:function(){var e=this,i=M.NOT_ALLOW_AUTOPLAY,n=M.PLAYING,o=M.NO_START,l=M.PAUSED,u=M.REPLAY,c=M.ENTER,f=M.ENDED,d=M.ERROR,h=M.LOADING,g=[i,n,o,l,u,c,f,d,h];this.hasStart=!1,this.isError=!1,this._useAutoplay=!1,this.mediaPause(),this._accPlayed.acc=0,this._accPlayed.t=0,this._accPlayed.loopAcc=0,g.forEach(function(p){e.removeClass(p)}),this.addClass(M.ENTER),this.emit(Pi)}},{key:"reset",value:function(){var e=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0;this.resetState();var o=this.plugins;if(o&&(i.map(function(u){e.deregister(u)}),n)){var l=io();Object.keys(this.config).keys(function(u){e.config[u]!=="undefined"&&(u==="plugins"||u==="presets"||u==="el"||u==="id")&&(e.config[u]=l[u])})}}},{key:"destroy",value:function(){var e=this,i=this.innerContainer,n=this.root,o=this.media;if(!(!n||!o)){if(this.hasStart=!1,this._useAutoplay=!1,n.removeAttribute(Ut),this.updateAcc("destroy"),this._unbindEvents(),this._detachSourceEvents(this.media),v.clearAllTimers(this),this.emit(wr),_e.destroy(this),oa(this),re(ne(r.prototype),"destroy",this).call(this),this.fullscreen&&this._fullscreenEl===this.root&&this.exitFullscreen(),i)for(var l=i.children,u=0;u<l.length;u++)i.removeChild(l[u]);!i&&o instanceof window.Node&&n.contains(o)&&n.removeChild(o),["topBar","leftBar","rightBar","innerContainer"].map(function(f){e[f]&&n.removeChild(e[f]),e[f]=null});var c=n.className.split(" ");c.length>0?n.className=c.filter(function(f){return f.indexOf("xgplayer")<0}).join(" "):n.className="",this.removeAttribute("data-xgfill"),["isSeeking","isCanplay","isActive","cssfullscreen","fullscreen"].forEach(function(f){e[f]=!1})}}},{key:"replay",value:function(){var e=this;this.removeClass(M.ENDED),this.currentTime=0,this.isSeeking=!1,Et(this,"replay",function(){e.once(Lt,function(){var i=e.mediaPlay();i&&i.catch&&i.catch(function(n){console.log(n)})}),e.play(),e.emit(di),e.onPlay()})}},{key:"retry",value:function(){var e=this;this.removeClass(M.ERROR),this.addClass(M.LOADING),Et(this,"retry",function(){var i=e.currentTime;e.src=e.config.url,!e.config.isLive&&(e.currentTime=i),e.once(Ct,function(){e.mediaPlay()})})}},{key:"changeFullStyle",value:function(e,i,n,o){e&&(o||(o=M.PARENT_FULLSCREEN),this._orgCss||(this._orgCss=v.filterStyleFromText(e)),v.addClass(e,n),i&&i!==e&&!this._orgPCss&&(this._orgPCss=v.filterStyleFromText(i),v.addClass(i,o),i.setAttribute(Ut,this.playerId)))}},{key:"recoverFullStyle",value:function(e,i,n,o){o||(o=M.PARENT_FULLSCREEN),this._orgCss&&(v.setStyleFromCsstext(e,this._orgCss),this._orgCss=""),v.removeClass(e,n),i&&i!==e&&this._orgPCss&&(v.setStyleFromCsstext(i,this._orgPCss),this._orgPCss="",v.removeClass(i,o),i.removeAttribute(Ut))}},{key:"getFullscreen",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.config.fullscreenTarget,i=this.root,n=this.media;e||(e=i),this._fullScreenOffset={top:v.scrollTop(),left:v.scrollLeft()},this._fullscreenEl=e,this._fullActionFrom="get";var o=v.getFullScreenEl();if(o===this._fullscreenEl)return this.onFullscreenChange(),Promise.resolve();try{for(var l=0;l<Zr.length;l++){var u=Zr[l];if(e[u]){var c=u==="webkitRequestFullscreen"?e.webkitRequestFullscreen(window.Element.ALLOW_KEYBOARD_INPUT):e[u]();return c&&c.then?c:Promise.resolve()}}return n.fullscreenEnabled||n.webkitSupportsFullscreen?(n.webkitEnterFullscreen(),Promise.resolve()):Promise.reject(new Error("call getFullscreen fail"))}catch{return Promise.reject(new Error("call getFullscreen fail"))}}},{key:"exitFullscreen",value:function(e){if(this.isRotateFullscreen&&this.exitRotateFullscreen(),!(!this._fullscreenEl&&!v.getFullScreenEl())){this.root;var i=this.media;this._fullActionFrom="exit";try{for(var n=0;n<Qr.length;n++){var o=Qr[n];if(document[o]){var l=document[o]();return l&&l.then?l:Promise.resolve()}}return i&&i.webkitSupportsFullscreen?(i.webkitExitFullScreen(),Promise.resolve()):Promise.reject(new Error("call exitFullscreen fail"))}catch{return Promise.reject(new Error("call exitFullscreen fail"))}}}},{key:"getCssFullscreen",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.config.fullscreenTarget;this.isRotateFullscreen?this.exitRotateFullscreen():this.fullscreen&&this.exitFullscreen();var i=e?"".concat(M.INNER_FULLSCREEN," ").concat(M.CSS_FULLSCREEN):M.CSS_FULLSCREEN;this.changeFullStyle(this.root,e,i);var n=this.config.fullscreen,o=n===void 0?{}:n,l=o.useCssFullscreen===!0||typeof o.useCssFullscreen=="function"&&o.useCssFullscreen();l&&(this.fullscreen=!0,this.emit(St,!0)),this._cssfullscreenEl=e,this.cssfullscreen=!0,this.emit(hi,!0)}},{key:"exitCssFullscreen",value:function(){var e=this._cssfullscreenEl?"".concat(M.INNER_FULLSCREEN," ").concat(M.CSS_FULLSCREEN):M.CSS_FULLSCREEN;if(!this.fullscreen)this.recoverFullStyle(this.root,this._cssfullscreenEl,e);else{var i=this.config.fullscreen,n=i===void 0?{}:i,o=n.useCssFullscreen===!0||typeof n.useCssFullscreen=="function"&&n.useCssFullscreen();o?(this.recoverFullStyle(this.root,this._cssfullscreenEl,e),this.fullscreen=!1,this.emit(St,!1)):this.removeClass(e)}this._cssfullscreenEl=null,this.cssfullscreen=!1,this.emit(hi,!1)}},{key:"getRotateFullscreen",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.config.fullscreenTarget;this.cssfullscreen&&this.exitCssFullscreen(e);var i=e?"".concat(M.INNER_FULLSCREEN," ").concat(M.ROTATE_FULLSCREEN):M.ROTATE_FULLSCREEN;this._fullscreenEl=e||this.root,this.changeFullStyle(this.root,e,i,M.PARENT_ROTATE_FULLSCREEN),this.isRotateFullscreen=!0,this.fullscreen=!0,this.setRotateDeg(90),this._rootStyle=this.root.getAttribute("style"),this.root.style.width="".concat(window.innerHeight,"px"),this.emit(St,!0)}},{key:"exitRotateFullscreen",value:function(e){var i=this._fullscreenEl!==this.root?"".concat(M.INNER_FULLSCREEN," ").concat(M.ROTATE_FULLSCREEN):M.ROTATE_FULLSCREEN;this.recoverFullStyle(this.root,this._fullscreenEl,i,M.PARENT_ROTATE_FULLSCREEN),this.isRotateFullscreen=!1,this.fullscreen=!1,this.setRotateDeg(0),this.emit(St,!1),this._rootStyle&&(this.root.style.style=this._rootStyle,this._rootStyle=!1)}},{key:"setRotateDeg",value:function(e){window.orientation===90||window.orientation===-90?this.rotateDeg=0:this.rotateDeg=e}},{key:"focus",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{autoHide:!this.config.closeDelayBlur,delay:this.config.inactive};if(this.isActive){this.onFocus(e);return}this.emit(Tr,Ne({paused:this.paused,ended:this.ended},e))}},{key:"blur",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{ignorePaused:!1};if(!this.isActive){this.onBlur(e);return}this.emit($o,Ne({paused:this.paused,ended:this.ended},e))}},{key:"onFocus",value:function(){var e=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{autoHide:!0,delay:3e3};if(this.isActive=!0,this.removeClass(M.INACTIVE),this.userTimer&&(v.clearTimeout(this,this.userTimer),this.userTimer=null),i.autoHide===!1||i.isLock===!0){this.userTimer&&(v.clearTimeout(this,this.userTimer),this.userTimer=null);return}var n=i.delay||this.config.inactive;this.userTimer=v.setTimeout(this,function(){e.userTimer=null,e.blur()},n)}},{key:"onBlur",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=e.ignorePaused,n=i===void 0?!1:i;if(this.isActive){var o=this.config.closePauseVideoFocus;this.isActive=!1,(n||o||!this.paused&&!this.ended)&&this.addClass(M.INACTIVE)}}},{key:"onEmptied",value:function(){this.updateAcc("emptied")}},{key:"onCanplay",value:function(){this.removeClass(M.ENTER),this.removeClass(M.ERROR),this.removeClass(M.LOADING),this.isCanplay=!0,this.waitTimer&&v.clearTimeout(this,this.waitTimer)}},{key:"onLoadeddata",value:function(){this.isError=!1,this.isSeeking=!1}},{key:"onLoadstart",value:function(){this.removeClass(M.ERROR),this.isCanplay=!1}},{key:"onPlay",value:function(){this.state===pe.ENDED&&this.setState(pe.RUNNING),this.removeClass(M.PAUSED),this.ended&&this.removeClass(M.ENDED),!this.config.closePlayVideoFocus&&this.focus()}},{key:"onPause",value:function(){this.addClass(M.PAUSED),this.updateAcc("pause"),this.config.closePauseVideoFocus||(this.userTimer&&(v.clearTimeout(this,this.userTimer),this.userTimer=null),this.focus())}},{key:"onEnded",value:function(){this.updateAcc("ended"),this.addClass(M.ENDED),this.setState(pe.ENDED)}},{key:"onError",value:function(){this.isError=!0,this.updateAcc("error"),this.removeClass(M.NOT_ALLOW_AUTOPLAY),this.removeClass(M.NO_START),this.removeClass(M.ENTER),this.removeClass(M.LOADING),this.addClass(M.ERROR)}},{key:"onSeeking",value:function(){this.isSeeking||this.updateAcc("seeking"),this.isSeeking=!0,this.addClass(M.SEEKING)}},{key:"onSeeked",value:function(){this.isSeeking=!1,this.waitTimer&&v.clearTimeout(this,this.waitTimer),this.removeClass(M.LOADING),this.removeClass(M.SEEKING)}},{key:"onWaiting",value:function(){var e=this;this.waitTimer&&v.clearTimeout(this,this.waitTimer),this.updateAcc("waiting"),this.waitTimer=v.setTimeout(this,function(){e.addClass(M.LOADING),v.clearTimeout(e,e.waitTimer),e.waitTimer=null},this.config.minWaitDelay)}},{key:"onPlaying",value:function(){var e=this;this.isError=!1;var i=M.NO_START,n=M.PAUSED,o=M.ENDED,l=M.ERROR,u=M.REPLAY,c=M.LOADING,f=[i,n,o,l,u,c];f.forEach(function(d){e.removeClass(d)})}},{key:"onTimeupdate",value:function(){!this._videoHeight&&this.media.videoHeight&&this.resize(),(this.waitTimer||this.hasClass(M.LOADING))&&this.media.readyState>2&&(this.removeClass(M.LOADING),v.clearTimeout(this,this.waitTimer),this.waitTimer=null),!this.paused&&this.state<pe.RUNNING&&this.duration&&(this.setState(pe.RUNNING),this.emit(Vt)),!this._accPlayed.t&&!this.paused&&!this.ended&&(this._accPlayed.t=new Date().getTime())}},{key:"onVolumechange",value:function(){v.typeOf(this.config.volume)==="Number"&&(this.config.volume=this.volume)}},{key:"onRatechange",value:function(){this.config.defaultPlaybackRate=this.playbackRate}},{key:"emitUserAction",value:function(e,i,n){if(!(!this.media||!i||!e)){var o=v.typeOf(e)==="String"?e:e.type||"";n.props&&v.typeOf(n.props)!=="Array"&&(n.props=[n.props]),this.emit(pi,Ne({eventType:o,action:i,currentTime:this.currentTime,duration:this.duration,ended:this.ended,event:e},n))}}},{key:"updateAcc",value:function(e){if(this._accPlayed.t){var i=new Date().getTime()-this._accPlayed.t;this._accPlayed.acc+=i,this._accPlayed.t=0,(e==="ended"||this.ended)&&(this._accPlayed.loopAcc=this._accPlayed.acc)}}},{key:"checkBuffer",value:function(e){var i=this.media.buffered;if(!i||i.length===0||!this.duration)return!0;for(var n=e||this.media.currentTime||.2,o=i.length,l=0;l<o;l++)if(i.start(l)<=n&&i.end(l)>n)return!0;return!1}},{key:"resizePosition",value:function(){var e=this.videoPos,i=e.rotate,n=e.vy,o=e.vx,l=e.h,u=e.w;if(!(!i&&!n&&!o)){var c=this.videoPos._pi;if(!c&&this.media.videoHeight&&(c=this.media.videoWidth/this.media.videoHeight*100),!!c){this.videoPos.pi=c;var f={rotate:i},d=0,h=0,g=1,p=Math.abs(i/90),m=this.root,y=this.innerContainer,b=m.offsetWidth,S=y?y.offsetHeight:m.offsetHeight,E=S,I=b;if(p%2===0)g=l>0?100/l:u>0?100/u:1,f.scale=g,d=n>0?(100-l)/2-n:0,f.y=p===2?0-d:d,h=o>0?(100-u)/2-o:0,f.x=p===2?0-h:h,this.media.style.width="".concat(I,"px"),this.media.style.height="".concat(E,"px");else if(p%2===1){I=S,E=b;var T=S-b;h=-T/2/I*100,f.x=p===3?h+n/2:h-n/2,d=T/2/E*100,f.y=p===3?d+o/2:d-o/2,f.scale=g,this.media.style.width="".concat(I,"px"),this.media.style.height="".concat(E,"px")}var D=v.getTransformStyle(f);this.media.style.transform=D,this.media.style.webkitTransform=D}}}},{key:"position",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{h:0,y:0,x:0,w:0};if(!(!this.media||!e||!e.h)){var i=this.videoPos;i.h=e.h*100||0,i.w=e.w*100||0,i.vx=e.x*100||0,i.vy=e.y*100||0,this.resizePosition()}}},{key:"setConfig",value:function(e){var i=this;e&&Object.keys(e).map(function(n){if(n!=="plugins"){i.config[n]=e[n];var o=i.plugins[n.toLowerCase()];o&&v.typeOf(o.setConfig)==="Function"&&o.setConfig(e[n])}})}},{key:"playNext",value:function(e){var i=this;this.resetState(),this.setConfig(e),this._currentTime=0,this._duration=0,Et(this,"playnext",function(){i.start(),i.emit(vi,e)})}},{key:"resize",value:function(){var e=this;if(this.media){var i=this.root.getBoundingClientRect();this.sizeInfo.width=i.width,this.sizeInfo.height=i.height,this.sizeInfo.left=i.left,this.sizeInfo.top=i.top;var n=this.media,o=n.videoWidth,l=n.videoHeight,u=this.config,c=u.fitVideoSize,f=u.videoFillMode;if((f==="fill"||f==="cover"||f==="contain")&&this.setAttribute("data-xgfill",f),!(!l||!o)){this._videoHeight=l,this._videoWidth=o;var d=this.controls&&this.innerContainer?this.controls.root.getBoundingClientRect().height:0,h=i.width,g=i.height-d,p=parseInt(o/l*1e3,10),m=parseInt(h/g*1e3,10),y=h,b=g,S={};c==="auto"&&m>p||c==="fixWidth"?(b=h/p*1e3,this.config.fluid?S.paddingTop="".concat(b*100/y,"%"):S.height="".concat(b+d,"px")):(c==="auto"&&m<p||c==="fixHeight")&&(y=p*g/1e3,S.width="".concat(y,"px")),!this.fullscreen&&!this.cssfullscreen&&Object.keys(S).forEach(function(I){e.root.style[I]=S[I]}),(f==="fillHeight"&&m<p||f==="fillWidth"&&m>p)&&this.setAttribute("data-xgfill","cover");var E={videoScale:p,vWidth:y,vHeight:b,cWidth:y,cHeight:b+d};this.resizePosition(),this.emit(Mt,E)}}}},{key:"updateObjectPosition",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(this.media.updateObjectPosition){this.media.updateObjectPosition(e,i);return}this.media.style.objectPosition="".concat(e*100,"% ").concat(i*100,"%")}},{key:"setState",value:function(e){ge.logInfo("setState","state from:".concat(ro[this.state]," to:").concat(ro[e])),this._state=e}},{key:"state",get:function(){return this._state}},{key:"isFullscreen",get:function(){return this.fullscreen}},{key:"isCssfullScreen",get:function(){return this.cssfullscreen}},{key:"hasStart",get:function(){return this._hasStart},set:function(e){typeof e=="boolean"&&(this._hasStart=e,e===!1&&this.setState(pe.READY),this.emit("hasstart"))}},{key:"isPlaying",get:function(){return this._state===pe.RUNNING||this._state===pe.ENDED},set:function(e){e?this.setState(pe.RUNNING):this._state>=pe.RUNNING&&this.setState(pe.ATTACHED)}},{key:"definitionList",get:function(){return!this.config||!this.config.definition?[]:this.config.definition.list||[]},set:function(e){var i=this,n=this.config.definition,o=null,l=null;n.list=e,this.emit("resourceReady",e),e.forEach(function(u){var c;((c=i.curDefinition)===null||c===void 0?void 0:c.definition)===u.definition&&(o=u),n.defaultDefinition===u.definition&&(l=u)}),!l&&e.length>0&&(l=e[0]),o?this.changeDefinition(o):l&&this.changeDefinition(l)}},{key:"videoFrameInfo",get:function(){var e={total:0,dropped:0,corrupted:0,droppedRate:0,droppedDuration:0};if(!this.media||!this.media.getVideoPlaybackQuality)return e;var i=this.media.getVideoPlaybackQuality();return e.dropped=i.droppedVideoFrames||0,e.total=i.totalVideoFrames||0,e.corrupted=i.corruptedVideoFrames||0,e.total>0&&(e.droppedRate=e.dropped/e.total*100,e.droppedDuration=parseInt(this.cumulateTime/e.total*e.dropped,0)),e}},{key:"lang",get:function(){return this.config.lang},set:function(e){var i=ln.langKeys.filter(function(n){return n===e});if(i.length===0&&e!=="zh"){console.error("Sorry, set lang fail, because the language [".concat(e,"] is not supported now, list of all supported languages is [").concat(ln.langKeys.join(),"] "));return}this.config.lang=e,_e.setLang(e,this)}},{key:"i18n",get:function(){var e=this.config.lang;return e==="zh"&&(e="zh-cn"),this.__i18n.lang[e]||this.__i18n.lang.en}},{key:"i18nKeys",get:function(){return this.__i18n.textKeys||{}}},{key:"version",get:function(){return lr}},{key:"playerId",get:function(){return this._pluginInfoId}},{key:"url",get:function(){return this.__url||this.config.url},set:function(e){this.__url=e}},{key:"poster",get:function(){return this.plugins.poster?this.plugins.poster.config.poster:this.config.poster},set:function(e){this.plugins.poster&&this.plugins.poster.update(e)}},{key:"readyState",get:function(){return re(ne(r.prototype),"readyState",this)}},{key:"error",get:function(){var e=re(ne(r.prototype),"error",this);return this.i18n[e]||e}},{key:"networkState",get:function(){return re(ne(r.prototype),"networkState",this)}},{key:"fullscreenChanging",get:function(){return this._fullScreenOffset!==null}},{key:"cumulateTime",get:function(){var e=this._accPlayed;return this.updateAcc("get"),e.acc}},{key:"zoom",get:function(){return this.config.zoom},set:function(e){this.config.zoom=e}},{key:"videoRotateDeg",get:function(){return this.videoPos.rotate},set:function(e){e=v.convertDeg(e),!(e%90!==0||e===this.videoPos.rotate)&&(this.videoPos.rotate=e,this.resizePosition())}},{key:"avgSpeed",get:function(){return ao},set:function(e){ao=e}},{key:"realTimeSpeed",get:function(){return oo},set:function(e){oo=e}},{key:"hook",value:function(e,i){return mi.call.apply(mi,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"useHooks",value:function(e,i){return yi.call.apply(yi,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"removeHooks",value:function(e,i){return bi.call.apply(bi,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"usePluginHooks",value:function(e,i,n){for(var o=arguments.length,l=new Array(o>3?o-3:0),u=3;u<o;u++)l[u-3]=arguments[u];return qr.call.apply(qr,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"removePluginHooks",value:function(e,i,n){for(var o=arguments.length,l=new Array(o>3?o-3:0),u=3;u<o;u++)l[u-3]=arguments[u];return eo.call.apply(eo,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"setUserActive",value:function(e,i){typeof i=="boolean"&&i!==this.muted&&(this.addInnerOP("volumechange"),this.muted=i),_e.setCurrentUserActive(this.playerId,e)}}],[{key:"debugger",get:function(){return ge.config.debug},set:function(e){ge.config.debug=e}},{key:"getCurrentUserActivePlayerId",value:function(){return _e.getCurrentUseActiveId()}},{key:"setCurrentUserActive",value:function(e,i){_e.setCurrentUserActive(e,i)}},{key:"isHevcSupported",value:function(){return ce.isHevcSupported()}},{key:"probeConfigSupported",value:function(e){return ce.probeConfigSupported(e)}},{key:"install",value:function(e,i){r.plugins||(r.plugins={}),r.plugins[e]||(r.plugins[e]=i)}},{key:"use",value:function(e,i){r.plugins||(r.plugins={}),r.plugins[e]=i}}]),r}(fc);A(Or,"defaultPreset",null);A(Or,"XgVideoProxy",null);function Ke(){return new Date().getTime()}var Pt={LOAD_START:"loadstart",LOADED_DATA:"loadeddata",FIRST_FRAME:"firstFrame",WAIT_START:"waitingStart",WAIT_END:"waitingEnd",SEEK_START:"seekStart",SEEK_END:"seekEnd"},Mc=function(s){oe(r,s);var a=ae(r);function r(){var t;Y(this,r);for(var e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];return t=a.call.apply(a,[this].concat(i)),A(w(t),"_onTimeupdate",function(){t._state.isTimeUpdate=!0,t._state.autoplayStart&&(ge.logInfo("[xgLogger]".concat(t.player.playerId," _onTimeupdate")),t._sendFF("onTimeupdate"))}),A(w(t),"_onAutoplayStart",function(){ge.logInfo("[xgLogger]".concat(t.player.playerId," _onAutoplayStart")),t._state.autoplayStart=!0,t.vt&&t._sendFF("onAutoplayStart")}),A(w(t),"_onReset",function(){t._state={autoplayStart:!1,isFFLoading:!1,isTimeUpdate:!1,isFFSend:!1,isLs:!1},t.vt=0,t.pt=0,t.fvt=0,t.newPointTime=Ke(),t.loadedCostTime=0,t.startCostTime=0,t._isSeeking=!1,t.seekingStart=0,t.waitingStart=0,t.fixedWaitingStart=0,t._isWaiting=!1,t._waitTimer&&v.clearTimeout(w(t),t._waitTimer),t._waittTimer&&v.clearTimeout(w(t),t._waittTimer),t._waitTimer=null,t._waittTimer=null,t._waitType=0}),A(w(t),"_onSeeking",function(){t.seekingStart||(t.suspendWaitingStatus("seek"),t.seekingStart=Ke(),t.emitLog(Pt.SEEK_START,{start:Ke()}))}),A(w(t),"_onSeeked",function(){t.suspendSeekingStatus("seeked")}),A(w(t),"_onWaitingLoadStart",function(){t._isWaiting||t.vt||(t._isWaiting=!0,t.waitingStart=Ke(),t.fixedWaitingStart=Ke(),t._waitType=1,t.emitLog(Pt.WAIT_START,{fixedStart:t.fixedWaitingStart,start:t.waitingStart,type:1,endType:"loadstart"}))}),A(w(t),"_onWaiting",function(){t._isWaiting||!t.vt||(t._isWaiting=!0,t.vt?t.seekingStart?t._waitType=2:t._waitType=0:t._waitType=1,t.fixedWaitingStart=Ke(),t._waitTimer=v.setTimeout(w(t),function(){t._isWaiting&&(t.waitingStart=Ke(),v.clearTimeout(w(t),t._waitTimer),t._waitTimer=null,t._startWaitTimeout(),t.emitLog(Pt.WAIT_START,{fixedStart:t.fixedWaitingStart,start:t.waitingStart,type:t._waitType,endType:t._waitType===2?"seek":"playing"}))},200))}),A(w(t),"_onError",function(){t.suspendSeekingStatus("error"),t.suspendWaitingStatus("error")}),A(w(t),"_onPlaying",function(){t._isWaiting&&t.suspendWaitingStatus("playing")}),t}return X(r,[{key:"afterCreate",value:function(){var e=this;this._onReset(),this._waitType="firstFrame",this._initOnceEvents(),this.newPointTime=Ke(),this.loadedCostTime=0,this.startCostTime=0,this.on(Cr,function(){var i=e._state,n=i.autoplayStart,o=i.isFFSend;e.startCostTime=Ke()-e.newPointTime,ge.logInfo("[xgLogger]".concat(e.player.playerId," LOAD_START"),"autoplayStart:".concat(n," isFFSend:").concat(o," startCostTime:").concat(e.startCostTime," newPointTime").concat(e.newPointTime)),!o&&(!i.isLs&&e.emitLog(Pt.LOAD_START,{}),i.isLs=!0,i.isTimeUpdate=!1,i.isFFLoading=!0,e.pt=Ke(),e.vt=0,e.fvt=0,e._initOnceEvents(),e._onWaitingLoadStart())}),this.on(Rt,function(){e.vt=Ke(),e.fvt=e.vt-e.pt,e.loadedCostTime=e.vt-e.newPointTime;var i=e._state,n=i.isTimeUpdate,o=i.isFFSend,l=i.autoplayStart;ge.logInfo("[xgLogger]".concat(e.player.playerId," LOADED_DATA"),"fvt:".concat(e.fvt," isTimeUpdate:").concat(e._state.isTimeUpdate," loadedCostTime:").concat(e.loadedCostTime)),(n||l)&&e._sendFF("loadedData"),o||e.emitLog(Pt.LOADED_DATA,{}),e.suspendWaitingStatus("loadeddata")}),this.on(Er,this._onSeeking),this.on(Lt,this._onSeeked),this.on(wr,function(){e.endState("destroy")}),this.on(wi,function(){e.endState("urlChange"),ge.logInfo("[xgLogger]".concat(e.player.playerId," URL_CHANGE")),e._state.isFFSend&&e._onReset()}),this.on([Sr,Ct],this._onPlaying),this.on(Bn,this._onWaiting),this.on(_n,this._onError),this.on(Pi,function(){ge.logInfo("[xgLogger]".concat(e.player.playerId," RESET")),e.endState("reset"),e._initOnceEvents(),e._onReset()})}},{key:"_initOnceEvents",value:function(){this.off(Vt,this._onAutoplayStart),this.off(dt,this._onTimeupdate),this.once(Vt,this._onAutoplayStart),this.once(dt,this._onTimeupdate)}},{key:"_sendFF",value:function(e){this.s=Ke();var i=this._state,n=i.isFFLoading,o=i.isFFSend;ge.logInfo("[xgLogger]".concat(this.player.playerId," _sendFF"),"".concat(e," fvt:").concat(this.fvt," isFFLoading:").concat(n," !isFFSend:").concat(!o)),this.vt>0&&n&&!o&&(ge.logInfo("[xgLogger]".concat(this.player.playerId," emitLog_firstFrame"),e),this._state.isFFLoading=!1,this._state.isFFSend=!0,this.emitLog(Pt.FIRST_FRAME,{fvt:this.fvt,costTime:this.fvt,vt:this.vt,startCostTime:this.startCostTime,loadedCostTime:this.loadedCostTime}))}},{key:"_startWaitTimeout",value:function(){var e=this;this._waittTimer&&v.clearTimeout(this,this._waittTimer),this._waittTimer=v.setTimeout(this,function(){e.suspendWaitingStatus("timeout"),v.clearTimeout(e,e._waittTimer),e._waittTimer=null},this.config.waitTimeout)}},{key:"endState",value:function(e){this.suspendWaitingStatus(e),this.suspendSeekingStatus(e)}},{key:"suspendSeekingStatus",value:function(e){if(this.seekingStart){var i=Ke(),n=i-this.seekingStart;this.seekingStart=0,this.emitLog(Pt.SEEK_END,{end:i,costTime:n,endType:e})}}},{key:"suspendWaitingStatus",value:function(e){if(this._waitTimer&&(v.clearTimeout(this,this._waitTimer),this._waitTimer=null),this._waittTimer&&(v.clearTimeout(this,this._waittTimer),this._waittTimer=null),this._isWaiting=!1,!!this.waitingStart){var i=Ke(),n=i-this.waitingStart,o=i-this.fixedWaitingStart,l=this.config.waitTimeout;this._isWaiting=!1,this.waitingStart=0,this.fixedWaitingStart=0,this.emitLog(Pt.WAIT_END,{fixedCostTime:o>l?l:o,costTime:n>l?l:n,type:e==="loadeddata"?1:this._waitType,endType:this._waitType===2?"seek":e})}}},{key:"emitLog",value:function(e,i){var n=this.player;this.emit(Qo,Ne({t:Ke(),host:v.getHostFromUrl(n.currentSrc),vtype:n.vtype,eventType:e,currentTime:this.player.currentTime,readyState:n.video.readyState,networkState:n.video.networkState},i))}}],[{key:"pluginName",get:function(){return"xgLogger"}},{key:"defaultConfig",get:function(){return{waitTimeout:1e4}}}]),r}(be);function Nc(){return new DOMParser().parseFromString(`<svg class="xgplayer-replay-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 78 78" width="78" height="78">
  <path fill="#fff" transform="translate(20, 20)" d="M8.22708362,13.8757234 L11.2677371,12.6472196 C11.7798067,12.4403301 12.3626381,12.6877273 12.5695276,13.1997969 L12.9441342,14.1269807 C13.1510237,14.6390502 12.9036264,15.2218816 12.3915569,15.4287712 L6.8284538,17.6764107 L5.90126995,18.0510173 C5.38920044,18.2579068 4.80636901,18.0105096 4.5994795,17.49844 L1.97723335,11.0081531 C1.77034384,10.4960836 2.0177411,9.91325213 2.52981061,9.70636262 L3.45699446,9.33175602 C3.96906396,9.12486652 4.5518954,9.37226378 4.75878491,9.88433329 L5.67885163,12.1615783 C7.99551726,6.6766934 13.3983951,3 19.5,3 C27.7842712,3 34.5,9.71572875 34.5,18 C34.5,26.2842712 27.7842712,33 19.5,33 C15.4573596,33 11.6658607,31.3912946 8.87004692,28.5831991 C8.28554571,27.9961303 8.28762719,27.0463851 8.87469603,26.4618839 C9.46176488,25.8773827 10.4115101,25.8794641 10.9960113,26.466533 C13.2344327,28.7147875 16.263503,30 19.5,30 C26.127417,30 31.5,24.627417 31.5,18 C31.5,11.372583 26.127417,6 19.5,6 C14.4183772,6 9.94214483,9.18783811 8.22708362,13.8757234 Z"></path>
</svg>
`,"image/svg+xml").firstChild}var Fc=function(s){oe(r,s);var a=ae(r);function r(){return Y(this,r),a.apply(this,arguments)}return X(r,[{key:"registerIcons",value:function(){return{replay:Nc}}},{key:"afterCreate",value:function(){var e=this;be.insert(this.icons.replay,this.root,0),this.__handleReplay=this.hook("replayClick",function(){e.player.replay()},{pre:function(n){n.preventDefault(),n.stopPropagation()}}),this.bind(".xgplayer-replay",["click","touchend"],this.__handleReplay),this.on(Kt,function(){if(e.playerConfig.loop||v.addClass(e.player.root,"replay"),!e.config.disable){e.show();var i=e.root.querySelector("path");if(i){var n=window.getComputedStyle(i).getPropertyValue("transform");if(typeof n=="string"&&n.indexOf("none")>-1)return null;i.setAttribute("transform",n)}}}),this.on(st,function(){e.hide()})}},{key:"handleReplay",value:function(e){e.preventDefault(),e.stopPropagation(),this.player.replay(),v.removeClass(this.player.root,"replay")}},{key:"show",value:function(){this.config.disable||(this.root.style.display="flex")}},{key:"enable",value:function(){this.config.disable=!1}},{key:"disable",value:function(){this.config.disable=!0,this.hide()}},{key:"destroy",value:function(){this.unbind(".xgplayer-replay",["click","touchend"],this.__handleReplay)}},{key:"render",value:function(){return`<xg-replay class="xgplayer-replay">
      <xg-replay-txt class="xgplayer-replay-txt" lang-key="`.concat(this.i18nKeys.REPLAY,'">').concat(this.i18n.REPLAY,`</xg-replay-txt>
    </xg-replay>`)}}],[{key:"pluginName",get:function(){return"replay"}},{key:"defaultConfig",get:function(){return{disable:!1}}}]),r}(be),_c=function(s){oe(r,s);var a=ae(r);function r(){return Y(this,r),a.apply(this,arguments)}return X(r,[{key:"isEndedShow",get:function(){return this.config.isEndedShow},set:function(e){this.config.isEndedShow=e}},{key:"hide",value:function(){v.addClass(this.root,"hide")}},{key:"show",value:function(){v.removeClass(this.root,"hide")}},{key:"beforeCreate",value:function(e){typeof e.player.config.poster=="string"&&(e.config.poster=e.player.config.poster)}},{key:"afterCreate",value:function(){var e=this;this.on(Kt,function(){e.isEndedShow&&v.removeClass(e.root,"hide")}),this.config.hideCanplay?(this.once(dt,function(){e.onTimeUpdate()}),this.on(wi,function(){v.removeClass(e.root,"hide"),v.addClass(e.root,"xg-showplay"),e.once(dt,function(){e.onTimeUpdate()})})):this.on(st,function(){v.addClass(e.root,"hide")})}},{key:"onTimeUpdate",value:function(){var e=this;this.player.currentTime?v.removeClass(this.root,"xg-showplay"):this.once(dt,function(){e.onTimeUpdate()})}},{key:"update",value:function(e){e&&(this.config.poster=e,this.root.style.backgroundImage="url(".concat(e,")"))}},{key:"render",value:function(){var e=this.config,i=e.poster,n=e.hideCanplay,o=i?"background-image:url(".concat(i,");"):"";return'<xg-poster class="xgplayer-poster '.concat(n?"xg-showplay":"",'" style="').concat(o,`">
    </xg-poster>`)}}],[{key:"pluginName",get:function(){return"poster"}},{key:"defaultConfig",get:function(){return{isEndedShow:!0,hideCanplay:!1,poster:""}}}]),r}(be);function Ar(){return new DOMParser().parseFromString(`<svg class="play" xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="3 -4 28 40">
  <path fill="#fff" transform="scale(0.0320625 0.0320625)" d="M576,363L810,512L576,661zM342,214L576,363L576,661L342,810z"></path>
</svg>
`,"image/svg+xml").firstChild}function Dr(){return new DOMParser().parseFromString(`<svg class="pause" xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="3 -4 28 40">
  <path fill="#fff" transform="scale(0.0320625 0.0320625)" d="M598,214h170v596h-170v-596zM256 810v-596h170v596h-170z"></path>
</svg>
`,"image/svg+xml").firstChild}var pt={};function Bc(s,a){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{start:null,end:null};return pt[s]&&window.clearTimeout(pt[s].id),pt[s]={},r.start&&r.start(),pt[s].id=window.setTimeout(function(){r.end&&r.end(),window.clearTimeout(pt[s].id),delete pt[s]},a),pt[s].id}function so(s){if(s){window.clearTimeout(s);return}Object.keys(pt).map(function(a){window.clearTimeout(pt[a].id),delete pt[a]})}var Hc=function(s){oe(r,s);var a=ae(r);function r(t){var e;return Y(this,r),e=a.call(this,t),A(w(e),"onPlayerReset",function(){e.autoPlayStart=!1;var i=e.config.mode==="auto"?"auto-hide":"hide";e.setAttr("data-state","play"),v.removeClass(e.root,i),e.show()}),A(w(e),"onAutoplayStart",function(){if(!e.autoPlayStart){var i=e.config.mode==="auto"?"auto-hide":"hide";v.addClass(e.root,i),e.autoPlayStart=!0,e.onPlayPause("play")}}),e.autoPlayStart=!1,e}return X(r,[{key:"afterCreate",value:function(){var e=this,i=this.player,n=this.playerConfig;this.initIcons(),this.once(xr,function(){n&&(n.lang&&n.lang==="en"?v.addClass(i.root,"lang-is-en"):n.lang==="jp"&&v.addClass(i.root,"lang-is-jp"))}),this.on(Vt,this.onAutoplayStart),n.autoplay||this.show(),this.on(Ir,function(){var o=e.config.mode==="auto"?"auto-hide":"hide";e.setAttr("data-state","play"),v.removeClass(e.root,o),e.show()}),this.on(st,function(){e.onPlayPause("play")}),this.on(cn,function(){e.onPlayPause("pause")}),this.on(Pi,function(){e.onPlayerReset()}),this.clickHandler=this.hook("startClick",this.switchPausePlay,{pre:function(l){l.cancelable&&l.preventDefault(),l.stopPropagation();var u=e.player.paused;e.emitUserAction(l,"switch_play_pause",{props:"paused",from:u,to:!u})}}),this.bind(["click","touchend"],this.clickHandler)}},{key:"registerIcons",value:function(){return{startPlay:{icon:Ar,class:"xg-icon-play"},startPause:{icon:Dr,class:"xg-icon-pause"}}}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild("xg-start-inner",e.startPlay),this.appendChild("xg-start-inner",e.startPause)}},{key:"hide",value:function(){v.addClass(this.root,"hide")}},{key:"show",value:function(){v.removeClass(this.root,"hide")}},{key:"focusHide",value:function(){v.addClass(this.root,"focus-hide")}},{key:"recover",value:function(){v.removeClass(this.root,"focus-hide")}},{key:"switchStatus",value:function(e){e?this.setAttr("data-state",this.player.paused?"pause":"play"):this.setAttr("data-state",this.player.paused?"play":"pause")}},{key:"animate",value:function(e){var i=this;this._animateId=Bc("pauseplay",400,{start:function(){v.addClass(i.root,"interact"),i.show(),i.switchStatus(!0)},end:function(){v.removeClass(i.root,"interact"),!e&&i.hide(),i._animateId=null}})}},{key:"endAnimate",value:function(){v.removeClass(this.root,"interact"),so(this._animateId),this._animateId=null}},{key:"switchPausePlay",value:function(e){var i=this.player;if(e.cancelable&&e.preventDefault(),e.stopPropagation(),!(i.state<pe.READY)){var n=this.player.paused;!n&&i.state===pe.RUNNING?i.pause():i.play()}}},{key:"onPlayPause",value:function(e){var i=this.config,n=this.player;if(!(!n||n.state<pe.RUNNING||!this.autoPlayStart)){if(i.mode==="show"){this.switchStatus(),this.show();return}if(i.mode==="auto"){this.switchStatus();return}if(i.isShowPause&&n.paused&&!n.ended||i.isShowEnd&&n.ended){this.switchStatus(),this.show(),this.endAnimate();return}if(i.disableAnimate){this.switchStatus(),this.hide();return}if(e==="play")this.autoPlayStart?this.animate():this.hide();else{if(!this.autoPlayStart||n.ended)return;this.animate()}}}},{key:"destroy",value:function(){this.unbind(["click","touchend"],this.clickHandler),so(this._animateId)}},{key:"render",value:function(){var e=this.playerConfig.autoplay?this.config.mode==="auto"?"auto-hide":"hide":"";return`
    <xg-start class="xgplayer-start `.concat(e,`">
    <xg-start-inner></xg-start-inner>
    </xg-start>`)}}],[{key:"pluginName",get:function(){return"start"}},{key:"defaultConfig",get:function(){return{isShowPause:!1,isShowEnd:!1,disableAnimate:!1,mode:"hide"}}}]),r}(be),Uc=function(s){oe(r,s);var a=ae(r);function r(){return Y(this,r),a.apply(this,arguments)}return X(r,[{key:"render",value:function(){var e=this.config.innerHtml,i=v.createDom("xg-enter","",{},"xgplayer-enter");if(e&&e instanceof window.HTMLElement)i.appendChild(e);else if(e&&typeof e=="string")i.innerHTML=e;else{for(var n="",o=1;o<=12;o++)n+='<div class="xgplayer-enter-bar'.concat(o,'"></div>');i.innerHTML='<div class="xgplayer-enter-spinner">'.concat(n,"</div>")}return i}}],[{key:"pluginName",get:function(){return"enter"}},{key:"defaultConfig",get:function(){return{innerHtml:"",logo:""}}}]),r}(be);function Nt(s,a,r){try{return' <div class="xg-tips '.concat(r?"hide":" ",'" lang-key="').concat(s.i18nKeys[a],`">
    `).concat(s.i18n[a],`
    </div>`)}catch{return'<div class="xg-tips hide"></div>'}}var lo=function(s){oe(r,s);var a=ae(r);function r(){return Y(this,r),a.apply(this,arguments)}return X(r,[{key:"afterCreate",value:function(){this.getMini=this.getMini.bind(this),this.exitMini=this.exitMini.bind(this),this.bind("click",this.getMini)}},{key:"getMini",value:function(){this.config.onClick&&this.config.onClick()}},{key:"exitMini",value:function(){this.config.onClick&&this.config.onClick()}},{key:"destroy",value:function(){this.unbind(["click","touchend"],this.getMini)}},{key:"render",value:function(){var e="MINISCREEN";return`
      <xg-icon class="xgplayer-miniicon">
      <div class="xgplayer-icon btn-text"><span class="icon-text" lang-key="`.concat(this.i18nKeys[e],'">').concat(this.i18n[e],`</span></div>
      </xg-icon>`)}}],[{key:"pluginName",get:function(){return"miniscreenIcon"}},{key:"defaultConfig",get:function(){return{position:Ce.CONTROLS_RIGHT,index:10}}}]),r}(be);function uo(s){var a=parseFloat(s),r=s.indexOf("%")===-1&&!Number.isNaN(a);return r&&a}var Lr=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"],sa=Lr.length;function jc(){for(var s={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},a=0;a<sa;a++){var r=Lr[a];s[r]=0}return s}function Gc(s){var a=window.getComputedStyle(s);return a}function co(s){if(typeof s=="string"&&(s=document.querySelector(s)),!(!s||$e(s)!=="object"||!s.nodeType)){var a=Gc(s);if(a.display==="none")return jc();var r={};r.width=s.offsetWidth,r.height=s.offsetHeight;for(var t=r.isBorderBox=a.boxSizing==="border-box",e=0;e<sa;e++){var i=Lr[e],n=a[i],o=parseFloat(n);r[i]=Number.isNaN(o)?0:o}var l=r.paddingLeft+r.paddingRight,u=r.paddingTop+r.paddingBottom,c=r.marginLeft+r.marginRight,f=r.marginTop+r.marginBottom,d=r.borderLeftWidth+r.borderRightWidth,h=r.borderTopWidth+r.borderBottomWidth,g=t,p=uo(a.width);p!==!1&&(r.width=p+(g?0:l+d));var m=uo(a.height);return m!==!1&&(r.height=m+(g?0:u+h)),r.innerWidth=r.width-(l+d),r.innerHeight=r.height-(u+h),r.outerWidth=r.width+c,r.outerHeight=r.height+f,r}}function zi(s,a){for(var r=0;r<s.length;r++){var t=s[r];if(t.identifier===a)return t}}var $i={START:"dragStart",MOVE:"dragMove",ENDED:"dragEnded"},fo={mousedown:["mousemove","mouseup"],touchstart:["touchmove","touchend","touchcancel"],pointerdown:["pointermove","pointerup","pointercancel"]},Vc=function(s){oe(r,s);var a=ae(r);function r(t){var e,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Y(this,r),e=a.call(this),e.isEnabled=!0,e.isDragging=!1,e.isDown=!1,e.position={},e.downPoint={},e.dragPoint={x:0,y:0},e.startPos={x:0,y:0},e._root=t instanceof Element?t:document.querySelector(t),e._handlerDom=i.handle instanceof Element?i.handle:document.querySelector(i.handle),!e._root||!e._handlerDom?br(e):(e._bindStartEvent(),e)}return X(r,[{key:"_bindStartEvent",value:function(){var e=this;"ontouchstart"in window?this._startKey="touchstart":this._startKey="mousedown",this["on".concat(this._startKey)]=this["on".concat(this._startKey)].bind(this),this._handlerDom.addEventListener(this._startKey,this["on".concat(this._startKey)]),fo[this._startKey].map(function(i){e["on".concat(i)]=e["on".concat(i)].bind(e)})}},{key:"_unbindStartEvent",value:function(){this._handlerDom.removeEventListener(this._startKey,this["on".concat(this._startKey)])}},{key:"_bindPostStartEvents",value:function(e){var i=this;if(e){var n=fo[this._startKey];n.map(function(o){window.addEventListener(o,i["on".concat(o)])}),this._boundPointerEvents=n}}},{key:"_unbindPostStartEvents",value:function(){var e=this;this._boundPointerEvents&&(this._boundPointerEvents.map(function(i){window.removeEventListener(i,e["on".concat(i)])}),delete this._boundPointerEvents)}},{key:"enable",value:function(){this.isEnabled=!0}},{key:"disable",value:function(){this.isEnabled=!1,this.isDragging&&this.onUp()}},{key:"onDocUp",value:function(e){this.onUp()}},{key:"animate",value:function(){var e=this;this.isDragging&&(this.positionDrag(),window.requestAnimationFrame(function(){e.animate()}))}},{key:"positionDrag",value:function(){var e="translate3d(".concat(this.dragPoint.x,"px, ").concat(this.dragPoint.y,"px, 0)");this._root.style.transform=e,this._root.style.webKitTransform=e}},{key:"setLeftTop",value:function(){this._root.style.left=this.position.x+"px",this._root.style.top=this.position.y+"px"}},{key:"onmousedown",value:function(e){this.dragStart(e,e)}},{key:"onmousemove",value:function(e){this.dragMove(e,e)}},{key:"onmouseup",value:function(e){this.dragEnd(e,e)}},{key:"ontouchstart",value:function(e){var i=e.changedTouches[0];this.dragStart(e,i),this.touchIdentifier=i.pointerId!==void 0?i.pointerId:i.identifier,e.preventDefault()}},{key:"ontouchmove",value:function(e){var i=zi(e.changedTouches,this.touchIdentifier);i&&this.dragMove(e,i)}},{key:"ontouchend",value:function(e){var i=zi(e.changedTouches,this.touchIdentifier);i&&this.dragEnd(e,i),e.preventDefault()}},{key:"ontouchcancel",value:function(e){var i=zi(e.changedTouches,this.touchIdentifier);i&&this.dragCancel(e,i)}},{key:"dragStart",value:function(e,i){if(!(!this._root||this.isDown||!this.isEnabled)){this.downPoint=i,this.dragPoint.x=0,this.dragPoint.y=0,this._getPosition();var n=co(this._root);this.startPos.x=this.position.x,this.startPos.y=this.position.y,this.startPos.maxY=window.innerHeight-n.height,this.startPos.maxX=window.innerWidth-n.width,this.setLeftTop(),this.isDown=!0,this._bindPostStartEvents(e)}}},{key:"dragRealStart",value:function(e,i){this.isDragging=!0,this.animate(),this.emit($i.START,this.startPos)}},{key:"dragEnd",value:function(e,i){this._root&&(this._unbindPostStartEvents(),this.isDragging&&(this._root.style.transform="",this.setLeftTop(),this.emit($i.ENDED)),this.presetInfo())}},{key:"_dragPointerMove",value:function(e,i){var n={x:i.pageX-this.downPoint.pageX,y:i.pageY-this.downPoint.pageY};return!this.isDragging&&this.hasDragStarted(n)&&this.dragRealStart(e,i),n}},{key:"dragMove",value:function(e,i){if(e=e||window.event,!!this.isDown){var n=this.startPos,o=n.x,l=n.y,u=this._dragPointerMove(e,i),c=u.x,f=u.y;c=this.checkContain("x",c,o),f=this.checkContain("y",f,l),this.position.x=o+c,this.position.y=l+f,this.dragPoint.x=c,this.dragPoint.y=f,this.emit($i.MOVE,this.position)}}},{key:"dragCancel",value:function(e,i){this.dragEnd(e,i)}},{key:"presetInfo",value:function(){this.isDragging=!1,this.startPos={x:0,y:0},this.dragPoint={x:0,y:0},this.isDown=!1}},{key:"destroy",value:function(){this._unbindStartEvent(),this._unbindPostStartEvents(),this.isDragging&&this.dragEnd(),this.removeAllListeners(),this._handlerDom=null}},{key:"hasDragStarted",value:function(e){return Math.abs(e.x)>3||Math.abs(e.y)>3}},{key:"checkContain",value:function(e,i,n){return i+n<0?0-n:e==="x"&&i+n>this.startPos.maxX?this.startPos.maxX-n:e==="y"&&i+n>this.startPos.maxY?this.startPos.maxY-n:i}},{key:"_getPosition",value:function(){var e=window.getComputedStyle(this._root),i=this._getPositionCoord(e.left,"width"),n=this._getPositionCoord(e.top,"height");this.position.x=Number.isNaN(i)?0:i,this.position.y=Number.isNaN(n)?0:n,this._addTransformPosition(e)}},{key:"_addTransformPosition",value:function(e){var i=e.transform;if(i.indexOf("matrix")===0){var n=i.split(","),o=i.indexOf("matrix3d")===0?12:4,l=parseInt(n[o],10),u=parseInt(n[o+1],10);this.position.x+=l,this.position.y+=u}}},{key:"_getPositionCoord",value:function(e,i){if(e.indexOf("%")!==-1){var n=co(this._root.parentNode);return n?parseFloat(e)/100*n[i]:0}return parseInt(e,10)}}]),r}(Go),Wc=function(s){oe(r,s);var a=ae(r);function r(t){var e;Y(this,r),e=a.call(this,t),A(w(e),"onCancelClick",function(o){e.exitMini(),e.isClose=!0}),A(w(e),"onCenterClick",function(o){var l=w(e),u=l.player;u.paused?u.play():u.pause()}),A(w(e),"onScroll",function(o){if(!(!window.scrollY&&window.scrollY!==0||Math.abs(window.scrollY-e.pos.scrollY)<50)){var l=parseInt(v.getCss(e.player.root,"height"));l+=e.config.scrollTop,e.pos.scrollY=window.scrollY,window.scrollY>l+5?!e.isMini&&!e.isClose&&e.getMini():window.scrollY<=l&&(e.isMini&&e.exitMini(),e.isClose=!1)}}),e.isMini=!1,e.isClose=!1;var i=w(e),n=i.config;return e.pos={left:n.left<0?window.innerWidth-n.width-20:n.left,top:n.top<0?window.innerHeight-n.height-20:n.top,height:e.config.height,width:e.config.width,scrollY:window.scrollY||0},e.lastStyle=null,e}return X(r,[{key:"beforeCreate",value:function(e){typeof e.player.config.mini=="boolean"&&(e.config.isShowIcon=e.player.config.mini)}},{key:"afterCreate",value:function(){var e=this;this.initIcons(),this.on(cn,function(){e.setAttr("data-state","pause")}),this.on(st,function(){e.setAttr("data-state","play")})}},{key:"onPluginsReady",value:function(){var e=this,i=this.player,n=this.config;if(!n.disable){if(this.config.isShowIcon){var o={config:{onClick:function(){e.getMini()}}};i.controls.registerPlugin(lo,o,lo.pluginName)}var l=v.checkTouchSupport()?"touchend":"click";this.bind(".mini-cancel-btn",l,this.onCancelClick),this.bind(".play-icon",l,this.onCenterClick),this.config.disableDrag||(this._draggabilly=new Vc(this.player.root,{handle:this.root})),this.config.isScrollSwitch&&window.addEventListener("scroll",this.onScroll)}}},{key:"registerIcons",value:function(){return{play:{icon:Ar,class:"xg-icon-play"},pause:{icon:Dr,class:"xg-icon-pause"}}}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(".play-icon",e.play),this.appendChild(".play-icon",e.pause)}},{key:"getMini",value:function(){var e=this;if(!this.isMini){var i=this.player,n=this.playerConfig,o=this.config.target||this.player.root;this.lastStyle={},v.addClass(i.root,"xgplayer-mini"),["width","height","top","left"].map(function(l){e.lastStyle[l]=o.style[l],o.style[l]="".concat(e.pos[l],"px")}),n.fluid&&(o.style["padding-top"]=""),this.emit(gi,!0),i.isMini=this.isMini=!0}}},{key:"exitMini",value:function(){var e=this;if(!this.isMini)return!1;var i=this.player,n=this.playerConfig,o=this.config.target||this.player.root;v.removeClass(i.root,"xgplayer-mini"),this.lastStyle&&Object.keys(this.lastStyle).map(function(l){o.style[l]=e.lastStyle[l]}),this.lastStyle=null,n.fluid&&(i.root.style.width="100%",i.root.style.height="0",i.root.style["padding-top"]="".concat(n.height*100/n.width,"%")),this.emit(gi,!1),this.isMini=i.isMini=!1}},{key:"destroy",value:function(){window.removeEventListener("scroll",this.onScroll);var e=v.checkTouchSupport()?"touchend":"click";this.unbind(".mini-cancel-btn",e,this.onCancelClick),this.unbind(".play-icon",e,this.onCenterClick),this._draggabilly&&this._draggabilly.destroy(),this._draggabilly=null,this.exitMini()}},{key:"render",value:function(){if(!this.config.disable)return`
      <xg-mini-layer class="xg-mini-layer">
      <xg-mini-header class="xgplayer-mini-header">
      `.concat(Nt(this,"MINI_DRAG",this.playerConfig.isHideTips),`
      </xg-mini-header>
      <div class="mini-cancel-btn">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20">
          <path fill="#fff" fill-rule="evenodd" d="M3.99 3.49a1 1 0 0 1 1.414 0L10 8.085l4.596-4.595a1 1 0 1 1 1.414 1.414L11.414 9.5l4.596 4.596a1 1 0 0 1 .084 1.32l-.084.094a1 1 0 0 1-1.414 0L10 10.914 5.404 15.51a1 1 0 0 1-1.414-1.414L8.585 9.5 3.99 4.904a1 1 0 0 1-.084-1.32z"></path>
        </svg>
      </div>
      <div class="play-icon">
      </div>
      </xg-mini-layer>`)}}],[{key:"pluginName",get:function(){return"miniscreen"}},{key:"defaultConfig",get:function(){return{index:10,disable:!1,width:320,height:180,left:-1,top:-1,isShowIcon:!1,isScrollSwitch:!1,scrollTop:0,disableDrag:!1}}}]),r}(be),Yn={mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mousemove:"onMouseMove"},Yi=["videoClick","videoDbClick"],Xi=function(s){oe(r,s);var a=ae(r);function r(){var t;Y(this,r);for(var e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];return t=a.call.apply(a,[this].concat(i)),A(w(t),"onMouseMove",function(o){var l=w(t),u=l.player,c=l.playerConfig;u.isActive||(u.focus({autoHide:!c.closeDelayBlur}),!c.closeFocusVideoFocus&&u.media.focus())}),A(w(t),"onMouseEnter",function(o){var l=w(t),u=l.playerConfig,c=l.player;!u.closeFocusVideoFocus&&c.media.focus(),u.closeDelayBlur?c.focus({autoHide:!1}):c.focus()}),A(w(t),"onMouseLeave",function(o){var l=t.playerConfig,u=l.closePlayerBlur,c=l.leavePlayerTime,f=l.closeDelayBlur;!u&&!f&&(c?t.player.focus({autoHide:!0,delay:c}):t.player.blur())}),A(w(t),"onVideoClick",function(o){var l=w(t),u=l.player,c=l.playerConfig;o.target&&c.closeVideoClick||(o.target===u.root||o.target===u.media||o.target===u.innerContainer||o.target===u.media.__canvas)&&(o.preventDefault(),c.closeVideoStopPropagation||o.stopPropagation(),t._clickCount++,t.clickTimer&&(clearTimeout(t.clickTimer),t.clickTimer=null),t.clickTimer=setTimeout(function(){t._clickCount&&(t._clickCount--,Et(w(t),Yi[0],function(f,d){t.switchPlayPause(d.e)},{e:o,paused:u.paused}),clearTimeout(t.clickTimer),t.clickTimer=null)},300))}),A(w(t),"onVideoDblClick",function(o){var l=w(t),u=l.player,c=l.playerConfig;if(!(c.closeVideoDblclick||!o.target||o.target!==u.media&&o.target!==u.media.__canvas)){if(!c.closeVideoClick&&t._clickCount<2){t._clickCount=0;return}t._clickCount=0,t.clickTimer&&(clearTimeout(t.clickTimer),t.clickTimer=null),o.preventDefault(),o.stopPropagation(),Et(w(t),Yi[1],function(f,d){t.emitUserAction(d.e,"switch_fullscreen",{props:"fullscreen",from:u.fullscreen,to:!u.fullscreen}),u.fullscreen?u.exitFullscreen():u.getFullscreen()},{e:o,fullscreen:u.fullscreen})}}),t}return X(r,[{key:"afterCreate",value:function(){var e=this;this._clickCount=0,Yi.map(function(n){e.__hooks[n]=null});var i=this.playerConfig.isMobileSimulateMode;i==="mobile"||ce.device==="mobile"&&!ce.os.isIpad||this.initEvents()}},{key:"initEvents",value:function(){var e=this,i=this.player,n=i.video,o=i.root,l=this.playerConfig.enableContextmenu;o&&o.addEventListener("click",this.onVideoClick,!1),o&&o.addEventListener("dblclick",this.onVideoDblClick,!1),Object.keys(Yn).map(function(u){o.addEventListener(u,e[Yn[u]],!1)}),l&&n&&n.addEventListener("contextmenu",this.onContextmenu,!1)}},{key:"switchPlayPause",value:function(e){var i=this.player;this.emitUserAction(e,"switch_play_pause",{props:"paused",from:i.paused,to:!i.paused}),i.ended?i.duration!==1/0&&i.duration>0&&i.replay():i.paused?i.play():i.pause()}},{key:"onContextmenu",value:function(e){e=e||window.event,e.preventDefault&&e.preventDefault(),e.stopPropagation?e.stopPropagation():(e.returnValue=!1,e.cancelBubble=!0)}},{key:"destroy",value:function(){var e=this,i=this.player,n=i.video,o=i.root;this.clickTimer&&clearTimeout(this.clickTimer),o.removeEventListener("click",this.onVideoClick,!1),o.removeEventListener("dblclick",this.onVideoDblClick,!1),n.removeEventListener("contextmenu",this.onContextmenu,!1),Object.keys(Yn).map(function(l){o.removeEventListener(l,e[Yn[l]],!1)})}}],[{key:"pluginName",get:function(){return"pc"}},{key:"defaultConfig",get:function(){return{}}}]),r}(Wt),kt={PRESS:"press",PRESS_END:"pressend",DOUBlE_CLICK:"doubleclick",CLICK:"click",TOUCH_MOVE:"touchmove",TOUCH_START:"touchstart",TOUCH_END:"touchend"},Kc={start:"touchstart",end:"touchend",move:"touchmove",cancel:"touchcancel"},zc={start:"mousedown",end:"mouseup",move:"mousemove",cancel:"mouseleave"};function ho(s){return s&&s.length>0?s[s.length-1]:null}function $c(){return{pressDelay:600,dbClickDelay:200,disablePress:!1,disableDbClick:!1,miniStep:2,needPreventDefault:!0}}var Yc=function(){function s(a){var r=this,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{eventType:"touch"};Y(this,s),this._pos={moving:!1,start:!1,x:0,y:0},this.config=$c(),Object.keys(t).map(function(e){r.config[e]=t[e]}),this.root=a,this.events=t.eventType==="mouse"?zc:Kc,this.pressIntrvalId=null,this.dbIntrvalId=null,this.__handlers={},this._initEvent()}return X(s,[{key:"_initEvent",value:function(){this.onTouchStart=this.onTouchStart.bind(this),this.onTouchMove=this.onTouchMove.bind(this),this.onTouchEnd=this.onTouchEnd.bind(this),this.onTouchCancel=this.onTouchCancel.bind(this),this.root.addEventListener(this.events.start,this.onTouchStart)}},{key:"__setPress",value:function(r){var t=this,e=this.config;this.pressIntrvalId&&this.__clearPress(),this.pressIntrvalId=setTimeout(function(){t.trigger(kt.PRESS,r),t._pos.press=!0,t.__clearPress()},e.pressDelay)}},{key:"__clearPress",value:function(){window.clearTimeout(this.pressIntrvalId),this.pressIntrvalId=null}},{key:"__setDb",value:function(r){var t=this,e=this.config;if(this.dbIntrvalId){this.__clearDb(),this.trigger(kt.DOUBlE_CLICK,r);return}this.dbIntrvalId=setTimeout(function(){t.__clearDb(),!t._pos.start&&!t._pos.press&&!t._pos.moving&&t.trigger(kt.CLICK,r)},e.dbClickDelay)}},{key:"__clearDb",value:function(){clearTimeout(this.dbIntrvalId),this.dbIntrvalId=null}},{key:"on",value:function(r,t){this.__handlers[r]||(this.__handlers[r]=[]),this.__handlers[r].push(t)}},{key:"off",value:function(r,t){if(this.__handlers[r]){for(var e=this.__handlers[r],i=-1,n=0;n<e.length;n++)if(e[n]===t){i=n;break}i>=0&&this.__handlers[r].splice(i,1)}}},{key:"trigger",value:function(r,t){this.__handlers[r]&&this.__handlers[r].map(function(e){try{e(t)}catch(i){console.error("trigger>>:".concat(r),i)}})}},{key:"onTouchStart",value:function(r){var t=this._pos,e=this.root,i=ho(r.touches);t.x=i?parseInt(i.pageX,10):r.pageX,t.y=i?parseInt(i.pageX,10):r.pageX,t.start=!0,this.__setPress(r),e.addEventListener(this.events.end,this.onTouchEnd),e.addEventListener(this.events.cancel,this.onTouchCancel),e.addEventListener(this.events.move,this.onTouchMove),this.trigger(kt.TOUCH_START,r)}},{key:"onTouchCancel",value:function(r){this.onTouchEnd(r)}},{key:"onTouchEnd",value:function(r){var t=this._pos,e=this.root;this.__clearPress(),e.removeEventListener(this.events.cancel,this.onTouchCancel),e.removeEventListener(this.events.end,this.onTouchEnd),e.removeEventListener(this.events.move,this.onTouchMove),r.moving=t.moving,r.press=t.press,t.press&&this.trigger(kt.PRESS_END,r),this.trigger(kt.TOUCH_END,r),!t.press&&!t.moving&&this.__setDb(r),t.press=!1,t.start=!1,t.moving=!1}},{key:"onTouchMove",value:function(r){var t=this._pos,e=this.config,i=ho(r.touches),n=i?parseInt(i.pageX,10):r.pageX,o=i?parseInt(i.pageY,10):r.pageX,l=n-t.x,u=o-t.y;Math.abs(u)<e.miniStep&&Math.abs(l)<e.miniStep||(this.__clearPress(),t.press&&this.trigger(kt.PRESS_END,r),t.press=!1,t.moving=!0,this.trigger(kt.TOUCH_MOVE,r))}},{key:"destroy",value:function(){var r=this,t={touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart"};Object.keys(t).map(function(e){r.root.removeEventListener("touchend",r[t[e]])})}}]),s}();function Xc(){return new DOMParser().parseFromString(`<svg width="20" height="9" viewBox="0 0 8 9" fill="none" xmlns="http://www.w3.org/2000/svg"
  xmlns:xlink="http://www.w3.org/1999/xlink">
  <path opacity="0.54"
    d="M7.5 3.63397C8.16667 4.01887 8.16667 4.98113 7.5 5.36603L1.5 8.83013C0.833334 9.21503 0 8.7339 0 7.9641L0 1.0359C0 0.266098 0.833333 -0.215027 1.5 0.169873L7.5 3.63397Z"
    fill="white" />
  <path transform="translate(5 0)" d="M7.5 3.63397C8.16667 4.01887 8.16667 4.98113 7.5 5.36603L1.5 8.83013C0.833334 9.21503 0 8.7339 0 7.9641L0 1.0359C0 0.266098 0.833333 -0.215027 1.5 0.169873L7.5 3.63397Z" fill="white"/>
</svg>`,"image/svg+xml").firstChild}var qt={AUTO:"auto",SEEKING:"seeking",PLAYBACK:"playbackrate",LIGHT:""},Ji=["videoClick","videoDbClick"],Jc=function(s){oe(r,s);var a=ae(r);function r(t){var e;return Y(this,r),e=a.call(this,t),A(w(e),"onTouchStart",function(i){var n=w(e),o=n.player,l=n.config,u=n.pos,c=n.playerConfig,f=e.getTouche(i);if(f&&!l.disableGesture&&e.duration>0&&!o.ended){u.isStart=!0,v.checkIsFunction(c.disableSwipeHandler)&&c.disableSwipeHandler(),e.find(".xg-dur").innerHTML=v.format(e.duration);var d=e.root.getBoundingClientRect();o.rotateDeg===90?(u.top=d.left,u.left=d.top,u.width=d.height,u.height=d.width):(u.top=d.top,u.left=d.left,u.width=d.width,u.height=d.height);var h=parseInt(f.pageX-u.left,10),g=parseInt(f.pageY-u.top,10);u.x=o.rotateDeg===90?g:h,u.y=o.rotateDeg===90?h:g,u.scopeL=l.scopeL*u.width,u.scopeR=(1-l.scopeR)*u.width,u.scopeM1=u.width*(1-l.scopeM)/2,u.scopeM2=u.width-u.scopeM1}}),A(w(e),"onTouchMove",function(i){var n=e.getTouche(i),o=w(e),l=o.pos,u=o.config,c=o.player;if(!(!n||u.disableGesture||!e.duration||!l.isStart)){var f=u.miniMoveStep,d=u.hideControlsActive,h=parseInt(n.pageX-l.left,10),g=parseInt(n.pageY-l.top,10),p=c.rotateDeg===90?g:h,m=c.rotateDeg===90?h:g;if(Math.abs(p-l.x)>f||Math.abs(m-l.y)>f){var y=p-l.x,b=m-l.y,S=l.scope;if(S===-1&&(S=e.checkScope(p,m,y,b,l),S===0&&(d?c.blur():c.focus({autoHide:!1}),!l.time&&(l.time=parseInt(c.currentTime*1e3,10)+e.timeOffset*1e3)),l.scope=S),S===-1||S>0&&!u.gestureY||S===0&&!u.gestureX)return;i.cancelable&&i.preventDefault(),e.executeMove(y,b,S,l.width,l.height),l.x=p,l.y=m}}}),A(w(e),"onTouchEnd",function(i){var n=w(e),o=n.player,l=n.pos,u=n.playerConfig;if(l.isStart){l.scope>-1&&i.cancelable&&i.preventDefault();var c=e.config,f=c.disableGesture,d=c.gestureX;!f&&d?(e.endLastMove(l.scope),setTimeout(function(){o.getPlugin("progress")&&o.getPlugin("progress").resetSeekState()},10)):l.time=0,l.scope=-1,e.resetPos(),v.checkIsFunction(u.enableSwipeHandler)&&u.enableSwipeHandler(),e.changeAction(qt.AUTO)}}),A(w(e),"onRootTouchMove",function(i){e.config.disableGesture||!e.config.gestureX||e.checkIsRootTarget(i)&&(i.stopPropagation(),e.pos.isStart?e.onTouchMove(i):e.onTouchStart(i))}),A(w(e),"onRootTouchEnd",function(i){e.pos.isStart&&e.checkIsRootTarget(i)&&(i.stopPropagation(),e.onTouchEnd(i))}),e.pos={isStart:!1,x:0,y:0,time:0,volume:0,rate:1,light:0,width:0,height:0,scopeL:0,scopeR:0,scopeM1:0,scopeM2:0,scope:-1},e.timer=null,e}return X(r,[{key:"duration",get:function(){return this.playerConfig.customDuration||this.player.duration}},{key:"timeOffset",get:function(){return this.playerConfig.timeOffset||0}},{key:"registerIcons",value:function(){return{seekTipIcon:{icon:Xc,class:"xg-seek-pre"}}}},{key:"afterCreate",value:function(){var e=this;Ji.map(function(f){e.__hooks[f]=null});var i=this.playerConfig,n=this.config,o=this.player;i.closeVideoDblclick===!0&&(n.closedbClick=!0),this.resetPos(),v.isUndefined(i.disableGesture)||(n.disableGesture=!!i.disableGesture),this.appendChild(".xg-seek-icon",this.icons.seekTipIcon),this.xgMask=v.createDom("xg-mask","",{},"xgmask"),o.root.appendChild(this.xgMask),this.initCustomStyle(),this.registerThumbnail();var l=this.domEventType==="mouse"?"mouse":"touch";this.touch=new Yc(this.root,{eventType:l,needPreventDefault:!this.config.disableGesture}),this.root.addEventListener("contextmenu",function(f){f.preventDefault()}),o.root.addEventListener("touchmove",this.onRootTouchMove,!0),o.root.addEventListener("touchend",this.onRootTouchEnd,!0),this.on(zt,function(){var f=e.player,d=e.config;f.duration*1e3<d.moveDuration&&(d.moveDuration=f.duration*1e3)}),this.on([Ct,Kt],function(){var f=e.pos,d=f.time,h=f.isStart;!h&&d>0&&(e.pos.time=0)});var u={touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd",press:"onPress",pressend:"onPressEnd",click:"onClick",doubleclick:"onDbClick"};if(Object.keys(u).map(function(f){e.touch.on(f,function(d){e[u[f]](d)})}),!n.disableActive){var c=o.plugins.progress;c&&(c.addCallBack("dragmove",function(f){e.activeSeekNote(f.currentTime,f.forward)}),c.addCallBack("dragend",function(){e.changeAction(qt.AUTO)}))}}},{key:"registerThumbnail",value:function(){var e=this.player,i=e.plugins.thumbnail;if(i&&i.usable){this.thumbnail=i.createThumbnail(null,"mobile-thumbnail");var n=this.find(".time-preview");n.insertBefore(this.thumbnail,n.children[0])}}},{key:"initCustomStyle",value:function(){var e=this.playerConfig||{},i=e.commonStyle,n=i.playedColor,o=i.progressColor;n&&(this.find(".xg-curbar").style.backgroundColor=n,this.find(".xg-cur").style.color=n),o&&(this.find(".xg-bar").style.backgroundColor=o,this.find(".time-preview").style.color=o),this.config.disableTimeProgress&&v.addClass(this.find(".xg-timebar"),"hide")}},{key:"resetPos",value:function(){var e=this;this.pos?(this.pos.isStart=!1,this.pos.scope=-1,["x","y","width","height","scopeL","scopeR","scopeM1","scopeM2"].map(function(i){e.pos[i]=0})):this.pos={isStart:!1,x:0,y:0,volume:0,rate:1,light:0,width:0,height:0,scopeL:0,scopeR:0,scopeM1:0,scopeM2:0,scope:-1,time:0}}},{key:"changeAction",value:function(e){var i=this.player,n=this.root;n.setAttribute("data-xg-action",e);var o=i.plugins.start;o&&o.recover()}},{key:"getTouche",value:function(e){var i=this.player.rotateDeg,n=e.touches&&e.touches.length>0?e.touches[e.touches.length-1]:e;return i===0?{pageX:n.pageX,pageY:n.pageY}:{pageX:n.pageX,pageY:n.pageY}}},{key:"checkScope",value:function(e,i,n,o,l){var u=l.width,c=-1;if(e<0||e>u)return c;var f=Math.abs(o===0?n:n/o);return Math.abs(n)>0&&f>=1.73&&e>l.scopeM1&&e<l.scopeM2?c=0:(Math.abs(n)===0||f<=.57)&&(c=e<l.scopeL?1:e>l.scopeR?2:3),c}},{key:"executeMove",value:function(e,i,n,o,l){switch(n){case 0:this.updateTime(e/o*this.config.scopeM);break;case 1:this.updateBrightness(i/l);break;case 2:ce.os.isIos||this.updateVolume(i/l);break}}},{key:"endLastMove",value:function(e){var i=this,n=this.pos,o=this.player,l=this.config,u=(n.time-this.timeOffset)/1e3;switch(e){case 0:o.seek(Number(u).toFixed(1)),l.hideControlsEnd?o.blur():o.focus(),this.timer=setTimeout(function(){i.pos.time=0},500);break}this.changeAction(qt.AUTO)}},{key:"checkIsRootTarget",value:function(e){var i=this.player.plugins||{};return i.progress&&i.progress.root.contains(e.target)?!1:i.start&&i.start.root.contains(e.target)||i.controls&&i.controls.root.contains(e.target)}},{key:"sendUseAction",value:function(e){var i=this.player.paused;this.emitUserAction(e,"switch_play_pause",{prop:"paused",from:i,to:!i})}},{key:"clickHandler",value:function(e){var i=this.player,n=this.config,o=this.playerConfig;if(i.state<pe.RUNNING){o.closeVideoClick||(this.sendUseAction(v.createEvent("click")),i.play());return}!n.closedbClick||o.closeVideoClick?i.isActive?i.blur():i.focus():o.closeVideoClick||((i.isActive||n.focusVideoClick)&&(this.sendUseAction(v.createEvent("click")),this.switchPlayPause()),i.focus())}},{key:"dbClickHandler",value:function(e){var i=this.config,n=this.player;!i.closedbClick&&n.state>=pe.RUNNING&&(this.sendUseAction(v.createEvent("dblclick")),this.switchPlayPause())}},{key:"onClick",value:function(e){var i=this,n=this.player;Et(this,Ji[0],function(o,l){i.clickHandler(l.e)},{e,paused:n.paused})}},{key:"onDbClick",value:function(e){var i=this,n=this.player;Et(this,Ji[1],function(o,l){i.dbClickHandler(l.e)},{e,paused:n.paused})}},{key:"onPress",value:function(e){var i=this.pos,n=this.config,o=this.player;n.disablePress||(i.rate=this.player.playbackRate,this.emitUserAction("press","change_rate",{prop:"playbackRate",from:o.playbackRate,to:n.pressRate}),o.playbackRate=n.pressRate,this.changeAction(qt.PLAYBACK))}},{key:"onPressEnd",value:function(e){var i=this.pos,n=this.config,o=this.player;n.disablePress||(this.emitUserAction("pressend","change_rate",{prop:"playbackRate",from:o.playbackRate,to:i.rate}),o.playbackRate=i.rate,i.rate=1,this.changeAction(qt.AUTO))}},{key:"updateTime",value:function(e){var i=this.player,n=this.config,o=this.player.duration;e=Number(e.toFixed(4));var l=parseInt(e*n.moveDuration,10)+this.timeOffset;l+=this.pos.time,l=l<0?0:l>o*1e3?o*1e3-200:l,i.getPlugin("time")&&i.getPlugin("time").updateTime(l/1e3),i.getPlugin("progress")&&i.getPlugin("progress").updatePercent(l/1e3/this.duration,!0),this.activeSeekNote(l/1e3,e>0),n.isTouchingSeek&&i.seek(Number((l-this.timeOffset)/1e3).toFixed(1)),this.pos.time=l}},{key:"updateVolume",value:function(e){this.player.rotateDeg&&(e=-e);var i=this.player,n=this.pos;if(e=parseInt(e*100,10),n.volume+=e,!(Math.abs(n.volume)<10)){var o=parseInt(i.volume*10,10)-parseInt(n.volume/10,10);o=o>10?10:o<1?0:o,i.volume=o/10,n.volume=0}}},{key:"updateBrightness",value:function(e){this.player.rotateDeg&&(e=-e);var i=this.pos,n=this.config,o=this.xgMask,l=i.light+.8*e;l=l>n.maxDarkness?n.maxDarkness:l<0?0:l,o&&(o.style.backgroundColor="rgba(0,0,0,".concat(l,")")),i.light=l}},{key:"activeSeekNote",value:function(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,n=this.player,o=this.config,l=!(this.duration!==1/0&&this.duration>0);if(!(!e||typeof e!="number"||l||o.disableActive)){e<0?e=0:e>n.duration&&(e=n.duration-.2),this.changeAction(qt.SEEKING);var u=n.plugins.start;u&&u.focusHide(),this.find(".xg-dur").innerHTML=v.format(this.duration),this.find(".xg-cur").innerHTML=v.format(e),this.find(".xg-curbar").style.width="".concat(e/this.duration*100,"%"),i?v.removeClass(this.find(".xg-seek-show"),"xg-back"):v.addClass(this.find(".xg-seek-show"),"xg-back"),this.updateThumbnails(e)}}},{key:"updateThumbnails",value:function(e){var i=this.player,n=i.plugins.thumbnail;n&&n.usable&&this.thumbnail&&n.update(this.thumbnail,e,160,90)}},{key:"switchPlayPause",value:function(){var e=this.player;if(e.state<pe.ATTACHED)return!1;e.ended||(e.paused?e.play():e.pause())}},{key:"disableGesture",value:function(){this.config.disableGesture=!1}},{key:"enableGesture",value:function(){this.config.disableGesture=!0}},{key:"destroy",value:function(){var e=this.player;this.timer&&clearTimeout(this.timer),this.thumbnail=null,e.root.removeChild(this.xgMask),this.xgMask=null,this.touch&&this.touch.destroy(),this.touch=null,e.root.removeEventListener("touchmove",this.onRootTouchMove,!0),e.root.removeEventListener("touchend",this.onRootTouchEnd,!0)}},{key:"render",value:function(){var e=this.config.gradient!=="normal"?"gradient ".concat(this.config.gradient):"gradient";return`
     <xg-trigger class="trigger">
     <div class="`.concat(e,`"></div>
        <div class="time-preview">
            <div class="xg-seek-show `).concat(this.config.disableSeekIcon?" hide-seek-icon":"",`">
              <i class="xg-seek-icon"></i>
              <span class="xg-cur">00:00</span>
              <span>/</span>
              <span class="xg-dur">00:00</span>
            </div>
              <div class="xg-bar xg-timebar">
                <div class="xg-curbar"></div>
              </div>
        </div>
        <div class="xg-playbackrate xg-top-note">
            <span><i>`).concat(this.config.pressRate,"X</i>").concat(this.i18n.FORWARD,`</span>
        </div>
     </xg-trigger>
    `)}}],[{key:"pluginName",get:function(){return"mobile"}},{key:"defaultConfig",get:function(){return{index:0,disableGesture:!1,gestureX:!0,gestureY:!0,gradient:"normal",isTouchingSeek:!1,miniMoveStep:5,miniYPer:5,scopeL:.25,scopeR:.25,scopeM:.9,pressRate:2,darkness:!0,maxDarkness:.8,disableActive:!1,disableTimeProgress:!1,hideControlsActive:!1,hideControlsEnd:!1,moveDuration:60*6*1e3,closedbClick:!1,disablePress:!0,disableSeekIcon:!1,focusVideoClick:!1}}}]),r}(be);function Zc(s){s.preventDefault(),s.returnValue=!1}function Qc(s){var a=s.tagName;return!!(a==="INPUT"||a==="TEXTAREA"||s.isContentEditable)}var go=function(s){oe(r,s);var a=ae(r);function r(){var t;Y(this,r);for(var e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];return t=a.call.apply(a,[this].concat(i)),A(w(t),"onBodyKeyDown",function(o){if(t.player){var l=o||window.event,u=l.keyCode,c=w(t),f=c._keyState;if(!o.repeat){if(f.isKeyDown||t.config.disable||t.config.disableBodyTrigger||!t.player.isUserActive&&!t.config.isIgnoreUserActive||!t.checkIsVisible()||l.metaKey||l.altKey||l.ctrlKey)return;(l.target===document.body||t.config.isGlobalTrigger&&!Qc(l.target))&&t.checkCode(u,!0)&&(f.isBodyKeyDown=!0),document.addEventListener("keyup",t.onBodyKeyUp)}f.isBodyKeyDown&&t.handleKeyDown(l)}}),A(w(t),"onBodyKeyUp",function(o){t.player&&(document.removeEventListener("keyup",t.onBodyKeyUp),t.handleKeyUp(o))}),A(w(t),"onKeydown",function(o){if(t.player){var l=o||window.event,u=w(t),c=u._keyState;if(!l.repeat){if(t.config.disable||t.config.disableRootTrigger||l.metaKey||l.altKey||l.ctrlKey||!t.player.isUserActive&&!t.config.isIgnoreUserActive)return;l&&(l.keyCode===37||t.checkCode(l.keyCode))&&(l.target===t.player.root||l.target===t.player.video||l.target===t.player.controls.el)&&(c.isKeyDown=!0),t.player.root.addEventListener("keyup",t.onKeyup)}c.isKeyDown&&t.handleKeyDown(l)}}),A(w(t),"onKeyup",function(o){t.player&&(t.player.root.removeEventListener("keyup",t.onKeyup),t.handleKeyUp(o))}),t}return X(r,[{key:"mergekeyCodeMap",value:function(){var e=this,i=this.config.keyCodeMap;i&&Object.keys(i).map(function(n){e.keyCodeMap[n]?["keyCode","action","disable","pressAction","disablePress","isBodyTarget"].map(function(o){i[n][o]&&(e.keyCodeMap[n][o]=i[n][o])}):e.keyCodeMap[n]=i[n]})}},{key:"afterCreate",value:function(){this.config.disable=!this.playerConfig.keyShortcut;var e=typeof this.config.seekStep=="function"?this.config.seekStep(this.player):this.config.seekStep;!e||typeof e!="number"||(this.seekStep=e),this.keyCodeMap={space:{keyCode:32,action:"playPause",disable:!1,disablePress:!1,noBodyTarget:!1},up:{keyCode:38,action:"upVolume",disable:!1,disablePress:!1,noBodyTarget:!0},down:{keyCode:40,action:"downVolume",disable:!1,disablePress:!1,noBodyTarget:!0},left:{keyCode:37,action:"seekBack",disablePress:!1,disable:!1},right:{keyCode:39,action:"seek",pressAction:"changePlaybackRate",disablePress:!1,disable:!1},esc:{keyCode:27,action:"exitFullscreen",disablePress:!0,disable:!1}},this.mergekeyCodeMap(),this._keyState={isKeyDown:!1,isBodyKeyDown:!1,isPress:!1,tt:0,playbackRate:0},this.player.root.addEventListener("keydown",this.onKeydown),document.addEventListener("keydown",this.onBodyKeyDown)}},{key:"checkIsVisible",value:function(){if(!this.config.checkVisible)return!0;var e=this.player.root.getBoundingClientRect(),i=e.height,n=e.top,o=e.bottom,l=window.innerHeight;return!(n<0&&n<0-i*.9||o>0&&o-l>i*.9)}},{key:"checkCode",value:function(e,i){var n=this,o=!1;return Object.keys(this.keyCodeMap).map(function(l){n.keyCodeMap[l]&&e===n.keyCodeMap[l].keyCode&&!n.keyCodeMap[l].disable&&(o=!i||i&&!n.keyCodeMap[l].noBodyTarget)}),o}},{key:"downVolume",value:function(e){var i=this.player;if(!(i.volume<=0)){var n=parseFloat((i.volume-.1).toFixed(1)),o={volume:{from:i.volume,to:n}};this.emitUserAction(e,"change_volume",{props:o}),n>=0?i.volume=n:i.volume=0}}},{key:"upVolume",value:function(e){var i=this.player;if(!(i.volume>=1)){var n=parseFloat((i.volume+.1).toFixed(1)),o={volume:{from:i.volume,to:n}};this.emitUserAction(e,"change_volume",{props:o}),n<=1?i.volume=n:i.volume=1}}},{key:"seek",value:function(e){var i=this.player,n=i.currentTime,o=i.duration,l=n,u=e.repeat&&this.seekStep>=4?parseInt(this.seekStep/2,10):this.seekStep;n+u<=o?l=n+u:l=o;var c={currentTime:{from:n,to:l}};this.emitUserAction(e,"seek",{props:c}),this.player.currentTime=l}},{key:"seekBack",value:function(e){var i=this.player.currentTime,n=e.repeat?parseInt(this.seekStep/2,10):this.seekStep,o=0;i-n>=0&&(o=i-n);var l={currentTime:{from:i,to:o}};this.emitUserAction(e,"seek",{props:l}),this.player.currentTime=o}},{key:"changePlaybackRate",value:function(e){var i=this._keyState,n=this.config,o=this.player;i.playbackRate===0&&(i.playbackRate=o.playbackRate,o.playbackRate=n.playbackRate)}},{key:"playPause",value:function(e){var i=this.player;i&&(this.emitUserAction(e,"switch_play_pause"),i.paused?i.play():i.pause())}},{key:"exitFullscreen",value:function(e){var i=this.player,n=i.fullscreen,o=i.cssfullscreen;n&&(this.emitUserAction("keyup","switch_fullscreen",{prop:"fullscreen",from:n,to:!n}),i.exitFullscreen()),o&&(this.emitUserAction("keyup","switch_css_fullscreen",{prop:"cssfullscreen",from:o,to:!o}),i.exitCssFullscreen())}},{key:"handleKeyDown",value:function(e){var i=this._keyState;if(e.repeat){i.isPress=!0;var n=Date.now();if(n-i.tt<200)return;i.tt=n}Zc(e),this.handleKeyCode(e.keyCode,e,i.isPress)}},{key:"handleKeyUp",value:function(e){var i=this._keyState;i.playbackRate>0&&(this.player.playbackRate=i.playbackRate,i.playbackRate=0),i.isKeyDown=!1,i.isPress=!1,i.tt=0}},{key:"handleKeyCode",value:function(e,i,n){for(var o=Object.keys(this.keyCodeMap),l=0;l<o.length;l++){var u=this.keyCodeMap[o[l]],c=u.action,f=u.keyCode,d=u.disable,h=u.pressAction,g=u.disablePress;if(f===e){if(!d&&!(n&&g)){var p=n&&h||c;typeof p=="function"?c(i,this.player,n):typeof p=="string"&&typeof this[p]=="function"&&this[p](i,this.player,n),this.emit(Zo,Ne({key:o[l],target:i.target,isPress:n},this.keyCodeMap[o[l]]))}break}}}},{key:"destroy",value:function(){this.player.root.removeEventListener("keydown",this.onKeydown),document.removeEventListener("keydown",this.onBodyKeyDown),this.player.root.removeEventListener("keyup",this.onKeyup),document.removeEventListener("keyup",this.onBodyKeyUp)}},{key:"disable",value:function(){this.config.disable=!0}},{key:"enable",value:function(){this.config.disable=!1}}],[{key:"pluginName",get:function(){return"keyboard"}},{key:"defaultConfig",get:function(){return{seekStep:10,checkVisible:!1,disableBodyTrigger:!1,disableRootTrigger:!1,isGlobalTrigger:!1,keyCodeMap:{},disable:!1,playbackRate:2,isIgnoreUserActive:!1}}}]),r}(Wt);function qc(){return new DOMParser().parseFromString(`<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="-5 -5 110 110">
  <path d="M100,50A50,50,0,1,1,50,0" stroke-width="5" stroke="#ddd" stroke-dasharray="236" fill="none"></path>
</svg>
`,"image/svg+xml").firstChild}var ef=function(s){oe(r,s);var a=ae(r);function r(){return Y(this,r),a.apply(this,arguments)}return X(r,[{key:"registerIcons",value:function(){return{loadingIcon:qc}}},{key:"afterCreate",value:function(){this.appendChild("xg-loading-inner",this.icons.loadingIcon)}},{key:"render",value:function(){return`
    <xg-loading class="xgplayer-loading">
      <xg-loading-inner></xg-loading-inner>
    </xg-loading>`}}],[{key:"pluginName",get:function(){return"loading"}},{key:"defaultConfig",get:function(){return{position:Ce.ROOT}}}]),r}(be),tf=[{tag:"xg-cache",className:"xgplayer-progress-cache",styleKey:"cachedColor"},{tag:"xg-played",className:"xgplayer-progress-played",styleKey:"playedColor"}],nf=function(){function s(a){Y(this,s),this.fragments=a.fragments||[],this.fragments.length===0&&this.fragments.push({percent:1}),this._callBack=a.actionCallback,this.fragConfig={fragFocusClass:a.fragFocusClass||"inner-focus-point",fragAutoFocus:!!a.fragAutoFocus,fragClass:a.fragClass||""},this.style=a.style||{playedColor:"",cachedColor:"",progressColor:""},this.duration=0,this.cachedIndex=0,this.playedIndex=0,this.focusIndex=-1}return X(s,[{key:"updateDuration",value:function(r){var t=this;this.duration=r;var e=0,i=this.fragments;this.fragments=i.map(function(n){return n.start=parseInt(e,10),n.end=parseInt(e+n.percent*t.duration,10),n.duration=parseInt(n.percent*t.duration,10),e+=n.percent*t.duration,n})}},{key:"updateProgress",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"played",t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{newIndex:0,curIndex:0,millisecond:0},e=this.progressList,i=this.fragments;if(!(e.length<1)){var n=t.newIndex,o=t.curIndex,l=t.millisecond;n!==o&&e.map(function(f,d){d<n?f[r].style.width="100%":d>n&&(f[r].style.width=0)});var u=i[n],c=l===0?0:(l-u.start)/u.duration;e[n][r].style.width=c<0?0:"".concat(c*100,"%")}}},{key:"updateFocus",value:function(r){if(!(!this.fragConfig.fragAutoFocus||this.fragments.length<2)){if(!r){if(this.focusIndex>-1){this.unHightLight(this.focusIndex);var t={index:-1,preIndex:this.focusIndex,fragment:null};this._callBack&&this._callBack(t),this.focusIndex=-1}return}var e=this.findIndex(r.currentTime*1e3,this.focusIndex);if(e>=0&&e!==this.focusIndex){this.focusIndex>-1&&this.unHightLight(this.focusIndex),this.setHightLight(e);var i={index:e,preIndex:this.focusIndex,fragment:this.fragments[this.focusIndex]};this.focusIndex=e,this._callBack&&this._callBack(i)}}}},{key:"update",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{cached:0,played:0},t=arguments.length>1?arguments[1]:void 0;if(!this.duration||parseInt(t*1e3,10)!==this.duration){if(!t&&t!==0)return;this.updateDuration(parseInt(t*1e3,10))}var e=this.playedIndex,i=this.cachedIndex;if(v.typeOf(r.played)!=="Undefined"){var n=this.findIndex(r.played*1e3,e);if(n<0)return;this.updateProgress("played",{newIndex:n,curIndex:e,millisecond:parseInt(r.played*1e3,10)}),this.playedIndex=n}if(v.typeOf(r.cached)!=="Undefined"){var o=this.findIndex(r.cached*1e3,i);if(o<0)return;this.updateProgress("cached",{newIndex:o,curIndex:i,millisecond:parseInt(r.cached*1e3,10)}),this.cachedIndex=o}}},{key:"findIndex",value:function(r,t){var e=this.fragments;if(!e||e.length===0)return-1;if(e.length===1)return 0;if(t>-1&&t<e.length&&r>e[t].start&&r<e[t].end)return t;if(r>e[e.length-1].start)return e.length-1;for(var i=0;i<e.length;i++)if(r>e[i].start&&r<=e[i].end){t=i;break}return t}},{key:"findHightLight",value:function(){for(var r=this.root.children,t=0;t<r.length;t++)if(v.hasClass(r[t],this.fragConfig.fragFocusClass))return{dom:r[t],pos:r[t].getBoundingClientRect()}}},{key:"findFragment",value:function(r){var t=this.root.children;return r<0||r>=t.length?null:{dom:t[r],pos:t[r].getBoundingClientRect()}}},{key:"unHightLight",value:function(){for(var r=this.root.children,t=0;t<r.length;t++)v.removeClass(r[t],this.fragConfig.fragFocusClass)}},{key:"setHightLight",value:function(r){var t=this.root.children;if(r<t.length)return v.addClass(t[r],this.fragConfig.fragFocusClass),{dom:t[r],pos:t[r].getBoundingClientRect()}}},{key:"destroy",value:function(){this.progressList=null,this.fragments=null,this.root.innerHTML=""}},{key:"reset",value:function(r){var t=this;if(Object.keys(this.fragConfig).forEach(function(i){r[i]!==void 0&&(t.fragConfig[i]=r[i])}),r.fragments){if(this.fragments=r.fragments.length===0?[{percent:1}]:r.fragments,this.updateDuration(this.duration),this.playedIndex=0,this.cachedIndex=0,this.root)for(var e=this.root.children;e.length>0;)this.root.removeChild(e[0]);this.render()}}},{key:"render",value:function(){var r=this,t=this.style.progressColor;if(this.root||(this.root=v.createDom("xg-inners","",{},"progress-list")),this.fragments){var e=this.fragConfig,i=e.fragClass,n=e.fragFocusClass;this.progressList=this.fragments.map(function(o){var l=v.createDom("xg-inner","",{style:t?"background:".concat(t,"; flex: ").concat(o.percent):"flex: ".concat(o.percent)},"".concat(o.isFocus?n:""," xgplayer-progress-inner ").concat(i));return r.root.appendChild(l),tf.forEach(function(u){l.appendChild(v.createDom(u.tag,"",{style:u.styleKey?"background: ".concat(r.style[u.styleKey],"; width:0;"):"width:0;"},u.className))}),{cached:l.children[0],played:l.children[1]}})}return this.root}}]),s}(),vo={POINT:"inner-focus-point",HIGHLIGHT:"inner-focus-highlight"},rf=function(s){oe(r,s);var a=ae(r);function r(t){var e;return Y(this,r),e=a.call(this,t),A(w(e),"onMoveOnly",function(i,n){var o=w(e),l=o.pos,u=o.config,c=o.player,f=n;if(i){v.event(i);var d=v.getEventPos(i,c.zoom),h=c.rotateDeg===90?d.clientY:d.clientX;if(l.moving&&Math.abs(l.x-h)<u.miniMoveStep)return;l.moving=!0,l.x=h,f=e.computeTime(i,h)}e.triggerCallbacks("dragmove",f,i),e._updateInnerFocus(f)}),A(w(e),"onBodyClick",function(i){e.pos.isLocked&&(e.pos.isLocked=!1,i.preventDefault(),i.stopPropagation())}),A(w(e),"_mouseDownHandler",function(i,n){e._state.time=n.currentTime,e.updateWidth(n.currentTime,n.percent,0),e._updateInnerFocus(n)}),A(w(e),"_mouseUpHandler",function(i,n){var o=w(e),l=o.pos;l.moving&&e.updateWidth(n.currentTime,n.percent,2)}),A(w(e),"_mouseMoveHandler",function(i,n){var o=w(e),l=o._state,u=o.pos,c=o.config,f=o.player;l.time<n.currentTime?n.forward=!0:n.forward=!1,l.time=n.currentTime,u.isDown&&!u.moving&&(u.moving=!0,c.isPauseMoving&&f.pause(),e.triggerCallbacks("dragstart",n,i),e.emitUserAction("drag","dragstart",n)),e.updateWidth(n.currentTime,n.percent,1),e.triggerCallbacks("dragmove",n,i),e._updateInnerFocus(n)}),A(w(e),"onMouseDown",function(i){var n=w(e),o=n._state,l=n.player,u=n.pos,c=n.config,f=n.playerConfig,d=v.getEventPos(i,l.zoom),h=l.rotateDeg===90?d.clientY:d.clientX;if(!(l.isMini||c.closeMoveSeek||!f.allowSeekAfterEnded&&l.ended)){if(!l.duration&&!l.isPlaying){l.play();return}i.stopPropagation(),e.focus(),v.checkIsFunction(f.disableSwipeHandler)&&f.disableSwipeHandler(),v.checkIsFunction(c.onMoveStart)&&c.onMoveStart(),v.event(i),u.x=h,u.isDown=!0,u.moving=!1,o.prePlayTime=l.currentTime,l.focus({autoHide:!1}),e.isProgressMoving=!0,v.addClass(e.progressBtn,"active");var g=e.computeTime(i,h);g.prePlayTime=o.prePlayTime,e._mouseDownHandlerHook(i,g);var p=i.type;return p==="touchstart"?(e.root.addEventListener("touchmove",e.onMouseMove),e.root.addEventListener("touchend",e.onMouseUp)):(e.unbind("mousemove",e.onMoveOnly),document.addEventListener("mousemove",e.onMouseMove,!1),document.addEventListener("mouseup",e.onMouseUp,!1)),!0}}),A(w(e),"onMouseUp",function(i){var n=w(e),o=n.player,l=n.config,u=n.pos,c=n.playerConfig,f=n._state;i.stopPropagation(),i.preventDefault(),v.checkIsFunction(c.enableSwipeHandler)&&c.enableSwipeHandler(),v.checkIsFunction(l.onMoveEnd)&&l.onMoveEnd(),v.event(i),v.removeClass(e.progressBtn,"active");var d=e.computeTime(i,u.x);d.prePlayTime=f.prePlayTime,u.moving?(e.triggerCallbacks("dragend",d,i),e.emitUserAction("drag","dragend",d)):(e.triggerCallbacks("click",d,i),e.emitUserAction("click","click",d)),e._mouseUpHandlerHook(i,d),u.moving=!1,u.isDown=!1,u.x=0,u.y=0,u.isLocked=!0,f.prePlayTime=0,f.time=0;var h=i.type;h==="touchend"?(e.root.removeEventListener("touchmove",e.onMouseMove),e.root.removeEventListener("touchend",e.onMouseUp),e.blur()):(document.removeEventListener("mousemove",e.onMouseMove,!1),document.removeEventListener("mouseup",e.onMouseUp,!1),u.isEnter?c.isMobileSimulateMode!=="mobile"&&e.bind("mousemove",e.onMoveOnly):e.onMouseLeave(i)),v.setTimeout(w(e),function(){e.resetSeekState()},10),o.focus()}),A(w(e),"onMouseMove",function(i){var n=w(e),o=n._state,l=n.pos,u=n.player,c=n.config;v.checkTouchSupport()&&i.preventDefault(),v.event(i);var f=v.getEventPos(i,u.zoom),d=u.rotateDeg===90?f.clientY:f.clientX,h=Math.abs(l.x-d);if(!(l.moving&&h<c.miniMoveStep||!l.moving&&h<c.miniStartStep)){l.x=d;var g=e.computeTime(i,d);g.prePlayTime=o.prePlayTime,e._mouseMoveHandlerHook(i,g)}}),A(w(e),"onMouseOut",function(i){e.triggerCallbacks("mouseout",null,i)}),A(w(e),"onMouseOver",function(i){e.triggerCallbacks("mouseover",null,i)}),A(w(e),"onMouseEnter",function(i){var n=w(e),o=n.player,l=n.pos;if(!(l.isDown||l.isEnter||o.isMini||!o.config.allowSeekAfterEnded&&o.ended)){l.isEnter=!0,e.bind("mousemove",e.onMoveOnly),e.bind("mouseleave",e.onMouseLeave),v.event(i);var u=v.getEventPos(i,o.zoom),c=o.rotateDeg===90?u.clientY:u.clientX,f=e.computeTime(i,c);e.triggerCallbacks("mouseenter",f,i),e.focus()}}),A(w(e),"onMouseLeave",function(i){e.triggerCallbacks("mouseleave",null,i),e.unlock(),e._updateInnerFocus(null)}),A(w(e),"onVideoResize",function(){var i=e.pos,n=i.x,o=i.isDown,l=i.isEnter;if(l&&!o){var u=e.computeTime(null,n);e.onMoveOnly(null,u)}}),e.useable=!1,e.isProgressMoving=!1,e.__dragCallBacks=[],e._state={now:-1,direc:0,time:0,prePlayTime:-1},e._disableBlur=!1,e}return X(r,[{key:"duration",get:function(){return this.playerConfig.customDuration||this.player.duration}},{key:"timeOffset",get:function(){return this.playerConfig.timeOffset||0}},{key:"changeState",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.useable=e}},{key:"show",value:function(){this.root&&(this.root.style.display="flex")}},{key:"_initInner",value:function(){var e=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};(!i||i.length===0)&&(i=[{percent:1}]);var o=Ne(Ne({fragments:i},n),{},{actionCallback:function(u){e.emitUserAction("fragment_focus","fragment_focus",u)}});this.innerList?this.innerList.reset(o):(this.innerList=new nf(o),this.outer.insertBefore(this.innerList.render(),this.outer.children[0]),["findHightLight","unHightLight","setHightLight","findFragment"].map(function(l){e[l]=e.innerList[l].bind(e.innerList)}))}},{key:"_updateInnerFocus",value:function(e){this.innerList&&this.innerList.updateFocus(e)}},{key:"afterCreate",value:function(){var e=this;if(!(this.config.disable||this.playerConfig.isLive)){this.pos={x:0,y:0,moving:!1,isDown:!1,isEnter:!1,isLocked:!1},this.outer=this.find("xg-outer");var i=this.config,n=i.fragFocusClass,o=i.fragAutoFocus,l=i.fragClass;this._initInner(this.config.fragments,{fragFocusClass:n,fragAutoFocus:o,fragClass:l,style:this.playerConfig.commonStyle||{}}),ce.device==="mobile"&&(this.config.isDragingSeek=!1,this.isMobile=!0),this.progressBtn=this.find(".xgplayer-progress-btn"),this.on(zt,function(){e.onMouseLeave()}),this.on(dt,function(){e.onTimeupdate()}),this.on(Lt,function(){e.onTimeupdate(),e.onCacheUpdate()}),this.on(zo,function(){e.onCacheUpdate()}),this.on(Kt,function(){e.onCacheUpdate(!0),e.onTimeupdate(!0),e._state.now=0}),this.on(fn,function(){e.onReset()}),this.on(Mt,function(){e.onVideoResize()}),this.bindDomEvents(),this.initCustomStyle()}}},{key:"setConfig",value:function(e){var i=this,n=null;Object.keys(e).forEach(function(o){i.config[o]=e[o],o==="fragments"&&(n=e[o])}),n&&this._initInner(n,e)}},{key:"initCustomStyle",value:function(){var e=this.playerConfig||{},i=e.commonStyle,n=i.sliderBtnStyle,o=this.progressBtn;n&&(typeof n=="string"?o.style.boxShadow=n:$e(n)==="object"&&Object.keys(n).map(function(l){o.style[l]=n[l]}))}},{key:"triggerCallbacks",value:function(e,i,n){this.__dragCallBacks.length>0&&this.__dragCallBacks.map(function(o){if(o&&o.handler&&o.type===e)try{o.handler(i,n)}catch(l){console.error("[XGPLAYER][triggerCallbacks] ".concat(o," error"),l)}})}},{key:"addCallBack",value:function(e,i){i&&typeof i=="function"&&this.__dragCallBacks.push({type:e,handler:i})}},{key:"removeCallBack",value:function(e,i){var n=this.__dragCallBacks,o=-1;n.map(function(l,u){l&&l.type===e&&l.handler===i&&(o=u)}),o>-1&&n.splice(o,1)}},{key:"unlock",value:function(){var e=this.player,i=this.pos;if(i.isEnter=!1,!e.isMini){if(this.unbind("mousemove",this.onMoveOnly),i.isDown){this.unbind("mouseleave",this.onMouseLeave);return}this.blur()}}},{key:"bindDomEvents",value:function(){var e=this.player,i=e.controls,n=e.config;this._mouseDownHandlerHook=this.hook("dragstart",this._mouseDownHandler),this._mouseUpHandlerHook=this.hook("dragend",this._mouseUpHandler),this._mouseMoveHandlerHook=this.hook("drag",this._mouseMoveHandler),(this.domEventType==="touch"||this.domEventType==="compatible")&&(this.root.addEventListener("touchstart",this.onMouseDown),i&&(i.root&&i.root.addEventListener("touchmove",v.stopPropagation),i.center&&i.center.addEventListener("touchend",v.stopPropagation))),(this.domEventType==="mouse"||this.domEventType==="compatible")&&(this.bind("mousedown",this.onMouseDown),n.isMobileSimulateMode!=="mobile"&&this.bind("mouseenter",this.onMouseEnter),this.bind("mouseover",this.onMouseOver),this.bind("mouseout",this.onMouseOut),this.player.root.addEventListener("click",this.onBodyClick,!0))}},{key:"focus",value:function(){this.player.controls.pauseAutoHide(),v.addClass(this.root,"active")}},{key:"blur",value:function(){this._disableBlur||(this.player.controls.recoverAutoHide(),v.removeClass(this.root,"active"))}},{key:"disableBlur",value:function(){this._disableBlur=!0}},{key:"enableBlur",value:function(){this._disableBlur=!1}},{key:"updateWidth",value:function(e,i,n){var o=this.config,l=this.player;if(!(o.isCloseClickSeek&&n===0)){var u=e>=l.duration?l.duration-o.endedDiff:Number(e).toFixed(1);this.updatePercent(i),this.updateTime(e),!(n===1&&(!o.isDragingSeek||l.config.mediaType==="audio"))&&(this._state.now=u,this._state.direc=u>l.currentTime?0:1,l.seek(u))}}},{key:"computeTime",value:function(e,i){var n=this.player,o=this.root.getBoundingClientRect(),l=o.width,u=o.height,c=o.top,f=o.left,d,h,g=i;n.rotateDeg===90?(d=u,h=c):(d=l,h=f);var p=g-h;p=p>d?d:p<0?0:p;var m=p/d;m=m<0?0:m>1?1:m;var y=parseInt(m*this.duration*1e3,10)/1e3;return{percent:m,currentTime:y,offset:p,width:d,left:h,e}}},{key:"updateTime",value:function(e){var i=this.player,n=this.duration;e>n?e=n:e<0&&(e=0);var o=i.plugins.time;o&&o.updateTime(e)}},{key:"resetSeekState",value:function(){this.isProgressMoving=!1;var e=this.player.plugins.time;e&&e.resetActive()}},{key:"updatePercent",value:function(e,i){if(this.isProgressMoving=!0,!this.config.disable){e=e>1?1:e<0?0:e,this.progressBtn.style.left="".concat(e*100,"%"),this.innerList.update({played:e*this.duration},this.duration);var n=this.player.plugins.miniprogress;n&&n.update({played:e*this.duration},this.duration)}}},{key:"onTimeupdate",value:function(e){var i=this.player,n=this._state,o=this.duration;if(!(i.isSeeking||this.isProgressMoving)){if(n.now>-1){var l=parseInt(n.now*1e3,10)-parseInt(i.currentTime*1e3,10);if(n.direc===0&&l>300||n.direc===1&&l>-300){n.now=-1;return}else n.now=-1}var u=this.timeOffset+i.currentTime;u=v.adjustTimeByDuration(u,o,e),this.innerList.update({played:u},o),this.progressBtn.style.left="".concat(u/o*100,"%");var c=this.player.plugins.miniprogress;c&&c.update({played:u},o)}}},{key:"onCacheUpdate",value:function(e){var i=this.player,n=this.duration;if(i){var o=i.bufferedPoint.end;o=v.adjustTimeByDuration(o,n,e),this.innerList.update({cached:o},n);var l=this.player.plugins.miniprogress;l&&l.update({cached:o},n)}}},{key:"onReset",value:function(){this.innerList.update({played:0,cached:0},0);var e=this.player.plugins.miniprogress;e&&e.update({cached:0,played:0},0)}},{key:"destroy",value:function(){var e=this.player,i=e.controls;this.thumbnailPlugin=null,this.innerList.destroy(),this.innerList=null;var n=this.domEventType;(n==="touch"||n==="compatible")&&(this.root.removeEventListener("touchstart",this.onMouseDown),this.root.removeEventListener("touchmove",this.onMouseMove),this.root.removeEventListener("touchend",this.onMouseUp),i&&(i.root&&i.root.removeEventListener("touchmove",v.stopPropagation),i.center&&i.center.removeEventListener("touchend",v.stopPropagation))),(n==="mouse"||n==="compatible")&&(this.unbind("mousedown",this.onMouseDown),this.unbind("mouseenter",this.onMouseEnter),this.unbind("mousemove",this.onMoveOnly),this.unbind("mouseleave",this.onMouseLeave),document.removeEventListener("mousemove",this.onMouseMove,!1),document.removeEventListener("mouseup",this.onMouseUp,!1),e.root.removeEventListener("click",this.onBodyClick,!0))}},{key:"render",value:function(){if(!(this.config.disable||this.playerConfig.isLive)){var e=this.player.controls?this.player.controls.config.mode:"",i=e==="bottom"?"xgplayer-progress-bottom":"";return`
    <xg-progress class="xgplayer-progress `.concat(i,`">
      <xg-outer class="xgplayer-progress-outer">
        <xg-progress-btn class="xgplayer-progress-btn"></xg-progress-btn>
      </xg-outer>
    </xg-progress>
    `)}}}],[{key:"pluginName",get:function(){return"progress"}},{key:"defaultConfig",get:function(){return{position:Ce.CONTROLS_CENTER,index:0,disable:!1,isDragingSeek:!0,closeMoveSeek:!1,isPauseMoving:!1,isCloseClickSeek:!1,fragments:[{percent:1}],fragFocusClass:vo.POINT,fragClass:"",fragAutoFocus:!1,miniMoveStep:5,miniStartStep:2,onMoveStart:function(){},onMoveEnd:function(){},endedDiff:.2}}},{key:"FRAGMENT_FOCUS_CLASS",get:function(){return vo}}]),r}(be),$t=function(s){oe(r,s);var a=ae(r);function r(){var t;Y(this,r);for(var e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];return t=a.call.apply(a,[this].concat(i)),A(w(t),"_onMouseenter",function(o){t.emit("icon_mouseenter",{pluginName:t.pluginName})}),A(w(t),"_onMouseLeave",function(o){t.emit("icon_mouseleave",{pluginName:t.pluginName})}),t}return X(r,[{key:"afterCreate",value:function(){this.bind("mouseenter",this._onMouseenter),this.bind("mouseleave",this._onMouseLeave)}},{key:"destroy",value:function(){this.unbind("mouseenter",this._onMouseenter),this.unbind("mouseleave",this._onMouseLeave)}}]),r}(be),of=function(s){oe(r,s);var a=ae(r);function r(){return Y(this,r),a.apply(this,arguments)}return X(r,[{key:"afterCreate",value:function(){var e=this;re(ne(r.prototype),"afterCreate",this).call(this);var i=this.player,n=this.config;n.disable||(this.initIcons(),this.btnClick=this.btnClick.bind(this),this.bind(["touchend","click"],this.btnClick),this.on([cn,_n,fn],function(){e.animate(i.paused)}),this.on(st,function(){e.animate(i.paused)}),this.animate(!0))}},{key:"registerIcons",value:function(){return{play:{icon:Ar,class:"xg-icon-play"},pause:{icon:Dr,class:"xg-icon-pause"}}}},{key:"btnClick",value:function(e){e.preventDefault(),e.stopPropagation();var i=this.player;return this.emitUserAction(e,"switch_play_pause",{prop:"paused",from:i.paused,to:!i.paused}),i.ended?i.replay():i.paused?(i.play(),this.animate(!1)):(i.pause(),this.animate(!0)),!1}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(".xgplayer-icon",e.play),this.appendChild(".xgplayer-icon",e.pause)}},{key:"animate",value:function(e){if(this.player){var i=this.i18nKeys,n=this.find(".xg-tips");e?(this.setAttr("data-state","pause"),n&&this.changeLangTextKey(n,i.PLAY_TIPS)):(this.setAttr("data-state","play"),n&&this.changeLangTextKey(n,i.PAUSE_TIPS))}}},{key:"destroy",value:function(){re(ne(r.prototype),"destroy",this).call(this),this.unbind(["touchend","click"],this.btnClick)}},{key:"render",value:function(){if(!this.config.disable)return`<xg-icon class="xgplayer-play">
    <div class="xgplayer-icon">
    </div>
    `.concat(Nt(this,"PLAY_TIPS",this.playerConfig.isHideTips),`
    </xg-icon>`)}}],[{key:"pluginName",get:function(){return"play"}},{key:"defaultConfig",get:function(){return{position:Ce.CONTROLS_LEFT,index:0,disable:!1}}}]),r}($t);function af(){return new DOMParser().parseFromString(`<svg width="32px" height="40px" viewBox="0 0 32 32" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <path d="M11.2374369,14 L17.6187184,7.61871843 C17.9604272,7.27700968 17.9604272,6.72299032 17.6187184,6.38128157 C17.2770097,6.03957281 16.7229903,6.03957281 16.3812816,6.38128157 L9.38128157,13.3812816 C9.03957281,13.7229903 9.03957281,14.2770097 9.38128157,14.6187184 L16.3812816,21.6187184 C16.7229903,21.9604272 17.2770097,21.9604272 17.6187184,21.6187184 C17.9604272,21.2770097 17.9604272,20.7229903 17.6187184,20.3812816 L11.2374369,14 L11.2374369,14 Z" fill="#FFFFFF"></path>
    </g>
</svg>`,"image/svg+xml").firstChild}var sf=function(s){oe(r,s);var a=ae(r);function r(){return Y(this,r),a.apply(this,arguments)}return X(r,[{key:"afterCreate",value:function(){var e=this;this.initIcons(),this.onClick=function(i){i.preventDefault(),i.stopPropagation(),e.config.onClick(i)},this.bind(["click","touchend"],this.onClick)}},{key:"registerIcons",value:function(){return{screenBack:{icon:af,class:"xg-fullscreen-back"}}}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(this.root,e.screenBack)}},{key:"show",value:function(){v.addClass(this.root,"show")}},{key:"hide",value:function(){v.removeClass(this.root,"show")}},{key:"render",value:function(){return`<xg-icon class="xgplayer-back">
    </xg-icon>`}}],[{key:"pluginName",get:function(){return"topbackicon"}},{key:"defaultConfig",get:function(){return{position:Ce.ROOT_TOP,index:0}}}]),r}(be);function lf(){return new DOMParser().parseFromString(`<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="2 -4 28 40">
  <path fill="#fff" transform="scale(0.0320625 0.0320625)" d="M598 214h212v212h-84v-128h-128v-84zM726 726v-128h84v212h-212v-84h128zM214 426v-212h212v84h-128v128h-84zM298 598v128h128v84h-212v-212h84z"></path>
</svg>
`,"image/svg+xml").firstChild}function uf(){return new DOMParser().parseFromString(`<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="2 -4 28 40">
  <path fill="#fff" transform="scale(0.0320625 0.0320625)" d="M682 342h128v84h-212v-212h84v128zM598 810v-212h212v84h-128v128h-84zM342 342v-128h84v212h-212v-84h128zM214 682v-84h212v212h-84v-128h-128z"></path>
</svg>
`,"image/svg+xml").firstChild}var cf=function(s){oe(r,s);var a=ae(r);function r(){var t;Y(this,r);for(var e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];return t=a.call.apply(a,[this].concat(i)),A(w(t),"_onOrientationChange",function(o){t.player.fullscreen&&t.config.rotateFullscreen&&(window.orientation===90||window.orientation===-90?t.player.setRotateDeg(0):t.player.setRotateDeg(90))}),t}return X(r,[{key:"afterCreate",value:function(){var e=this;re(ne(r.prototype),"afterCreate",this).call(this);var i=this.config,n=this.playerConfig;if(!i.disable){i.target&&(this.playerConfig.fullscreenTarget=this.config.target);var o=v.getFullScreenEl();n.fullscreenTarget===o&&this.player.getFullscreen().catch(function(l){}),this.initIcons(),this.handleFullscreen=this.hook("fullscreenChange",this.toggleFullScreen,{pre:function(u){var c=e.player.fullscreen;e.emitUserAction(u,"switch_fullscreen",{prop:"fullscreen",from:c,to:!c})}}),this.bind(".xgplayer-fullscreen",["touchend","click"],this.handleFullscreen),this.on(St,function(l){var u=e.find(".xg-tips");u&&e.changeLangTextKey(u,l?e.i18nKeys.EXITFULLSCREEN_TIPS:e.i18nKeys.FULLSCREEN_TIPS),e.animate(l)}),this.config.needBackIcon&&(this.topBackIcon=this.player.registerPlugin({plugin:sf,options:{config:{onClick:function(u){e.handleFullscreen(u)}}}})),ce.device==="mobile"&&window.addEventListener("orientationchange",this._onOrientationChange)}}},{key:"registerIcons",value:function(){return{fullscreen:{icon:lf,class:"xg-get-fullscreen"},exitFullscreen:{icon:uf,class:"xg-exit-fullscreen"}}}},{key:"destroy",value:function(){re(ne(r.prototype),"destroy",this).call(this),this.unbind(".xgplayer-icon",ce.device==="mobile"?"touchend":"click",this.handleFullscreen),ce.device==="mobile"&&window.removeEventListener("orientationchange",this._onOrientationChange)}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(".xgplayer-icon",e.fullscreen),this.appendChild(".xgplayer-icon",e.exitFullscreen)}},{key:"toggleFullScreen",value:function(e){e&&(e.preventDefault(),e.stopPropagation());var i=this.player,n=this.config,o=n.useCssFullscreen===!0||typeof n.useCssFullscreen=="function"&&n.useCssFullscreen();o?(i.fullscreen?i.exitCssFullscreen():i.getCssFullscreen(),this.animate(i.fullscreen)):n.rotateFullscreen?(i.fullscreen?i.exitRotateFullscreen():i.getRotateFullscreen(),this.animate(i.fullscreen)):n.switchCallback&&typeof n.switchCallback=="function"?n.switchCallback(i.fullscreen):i.fullscreen?i.exitFullscreen():i.getFullscreen().catch(function(l){})}},{key:"animate",value:function(e){e?this.setAttr("data-state","full"):this.setAttr("data-state","normal"),this.topBackIcon&&(e?(this.topBackIcon.show(),this.hide()):(this.topBackIcon.hide(),this.show()))}},{key:"show",value:function(){re(ne(r.prototype),"show",this).call(this)}},{key:"hide",value:function(){re(ne(r.prototype),"hide",this).call(this)}},{key:"render",value:function(){if(!this.config.disable){var e="FULLSCREEN_TIPS";return`<xg-icon class="xgplayer-fullscreen">
    <div class="xgplayer-icon">
    </div>
    `.concat(Nt(this,e,this.playerConfig.isHideTips),`
    </xg-icon>`)}}}],[{key:"pluginName",get:function(){return"fullscreen"}},{key:"defaultConfig",get:function(){return{position:Ce.CONTROLS_RIGHT,index:0,useCssFullscreen:!1,rotateFullscreen:!1,switchCallback:null,target:null,disable:!1,needBackIcon:!1}}}]),r}($t),ff=function(s){oe(r,s);var a=ae(r);function r(t){var e;return Y(this,r),e=a.call(this,t),e.isActiving=!1,e}return X(r,[{key:"duration",get:function(){return this.playerConfig.customDuration||this.player.duration}},{key:"currentTime",get:function(){return this.player.currentTime||0}},{key:"timeOffset",get:function(){return this.playerConfig.timeOffset||0}},{key:"afterCreate",value:function(){var e=this,i=this.player.controls.config.mode;this.mode=i==="flex"?"flex":"normal",!this.config.disable&&(this.mode==="flex"&&(this.createCenterTime(),this.root.style.display="none"),this.durationDom=this.find(".time-duration"),this.timeDom=this.find(".time-current"),this.on(zt,function(){e.onTimeUpdate()}),this.on(dt,function(){e.onTimeUpdate()}),this.on(Kt,function(){e.onTimeUpdate(!0)}),this.on(fn,function(){e.onReset()}))}},{key:"show",value:function(){if(this.mode==="flex"){this.centerCurDom&&(this.centerCurDom.style.display="block"),this.centerDurDom&&(this.centerDurDom.style.display="block");return}this.root.style.display="block"}},{key:"hide",value:function(){if(this.mode==="flex"){this.centerCurDom&&(this.centerCurDom.style.display="none"),this.centerDurDom&&(this.centerDurDom.style.display="none");return}this.root.style.display="none"}},{key:"onTimeUpdate",value:function(e){var i=this.player,n=this.config,o=this.duration;if(!(n.disable||this.isActiving||!i.hasStart)){var l=i.currentTime+this.timeOffset;l=v.adjustTimeByDuration(l,o,e),this.mode==="flex"?(this.centerCurDom.innerHTML=this.minWidthTime(v.format(l)),o!==1/0&&o>0&&(this.centerDurDom.innerHTML=v.format(o))):(this.timeDom.innerHTML=this.minWidthTime(v.format(l)),o!==1/0&&o>0&&(this.durationDom.innerHTML=v.format(o)))}}},{key:"onReset",value:function(){this.mode==="flex"?(this.centerCurDom.innerHTML=this.minWidthTime(v.format(0)),this.centerDurDom.innerHTML=v.format(0)):(this.timeDom.innerHTML=this.minWidthTime(v.format(0)),this.durationDom.innerHTML=v.format(0))}},{key:"createCenterTime",value:function(){var e=this.player;if(!(!e.controls||!e.controls.center)){var i=e.controls.center;this.centerCurDom=v.createDom("xg-icon","00:00",{},"xgplayer-time xg-time-left"),this.centerDurDom=v.createDom("xg-icon","00:00",{},"xgplayer-time xg-time-right"),i.children.length>0?i.insertBefore(this.centerCurDom,i.children[0]):i.appendChild(this.centerCurDom),i.appendChild(this.centerDurDom)}}},{key:"afterPlayerInit",value:function(){var e=this.config;if(this.duration===1/0||this.playerConfig.isLive?(v.hide(this.durationDom),v.hide(this.timeDom),v.hide(this.find(".time-separator")),v.show(this.find(".time-live-tag"))):v.hide(this.find(".time-live-tag")),e.hide){this.hide();return}this.show()}},{key:"changeLiveState",value:function(e){e?(v.hide(this.durationDom),v.hide(this.timeDom),v.hide(this.find(".time-separator")),v.show(this.find(".time-live-tag"))):(v.hide(this.find(".time-live-tag")),v.show(this.find(".time-separator")),v.show(this.durationDom),v.show(this.timeDom))}},{key:"updateTime",value:function(e){if(this.isActiving=!0,!(!e&&e!==0||e>this.duration)){if(this.mode==="flex"){this.centerCurDom.innerHTML=this.minWidthTime(v.format(e));return}this.timeDom.innerHTML=this.minWidthTime(v.format(e))}}},{key:"minWidthTime",value:function(e){return e.split(":").map(function(i){return'<span class="time-min-width">'.concat(i,"</span>")}).join(":")}},{key:"resetActive",value:function(){var e=this,i=this.player,n=function(){e.isActiving=!1};this.off(Lt,n),i.isSeeking?this.once(Lt,n):this.isActiving=!1}},{key:"destroy",value:function(){var e=this.player.controls.center;this.centerCurDom&&e.removeChild(this.centerCurDom),this.centerCurDom=null,this.centerDurDom&&e.removeChild(this.centerDurDom),this.centerDurDom=null}},{key:"render",value:function(){if(!this.config.disable)return`<xg-icon class="xgplayer-time">
    <span class="time-current">00:00</span>
    <span class="time-separator">/</span>
    <span class="time-duration">00:00</span>
    <span class="time-live-tag">`.concat(this.i18n.LIVE_TIP,`</span>
    </xg-icon>`)}}],[{key:"pluginName",get:function(){return"time"}},{key:"defaultConfig",get:function(){return{position:Ce.CONTROLS_LEFT,index:2,disable:!1}}}]),r}(be);function df(){return new DOMParser().parseFromString(`<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="0 -10 28 40">
  <path fill="#fff" transform="scale(0.0220625 0.0220625)" d="M358.4 358.4h-204.8v307.2h204.8l256 256v-819.2l-256 256z"></path>
  <path fill="#fff" transform="scale(0.0220625 0.0220625)" d="M940.632 837.632l-72.192-72.192c65.114-64.745 105.412-154.386 105.412-253.44s-40.299-188.695-105.396-253.424l-0.016-0.016 72.192-72.192c83.639 83.197 135.401 198.37 135.401 325.632s-51.762 242.434-135.381 325.612l-0.020 0.020zM795.648 693.248l-72.704-72.704c27.756-27.789 44.921-66.162 44.921-108.544s-17.165-80.755-44.922-108.546l0.002 0.002 72.704-72.704c46.713 46.235 75.639 110.363 75.639 181.248s-28.926 135.013-75.617 181.227l-0.021 0.021z"></path>
</svg>
`,"image/svg+xml").firstChild}function hf(){return new DOMParser().parseFromString(`<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="0 -10 28 40">
  <path fill="#fff" transform="scale(0.0220625 0.0220625)" d="M358.4 358.4h-204.8v307.2h204.8l256 256v-819.2l-256 256z"></path>
  <path fill="#fff" transform="scale(0.0220625 0.0220625)" d="M795.648 693.248l-72.704-72.704c27.756-27.789 44.921-66.162 44.921-108.544s-17.165-80.755-44.922-108.546l0.002 0.002 72.704-72.704c46.713 46.235 75.639 110.363 75.639 181.248s-28.926 135.013-75.617 181.227l-0.021 0.021zM795.648 693.248l-72.704-72.704c27.756-27.789 44.921-66.162 44.921-108.544s-17.165-80.755-44.922-108.546l0.002 0.002 72.704-72.704c46.713 46.235 75.639 110.363 75.639 181.248s-28.926 135.013-75.617 181.227l-0.021 0.021z"></path>
</svg>
`,"image/svg+xml").firstChild}function gf(){return new DOMParser().parseFromString(`<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="0 -10 28 40">
  <path fill="#fff" transform="scale(0.0220625 0.0220625)" d="M358.4 358.4h-204.8v307.2h204.8l256 256v-819.2l-256 256z"></path>
  <path fill="#fff" transform="scale(0.0220625 0.0220625)" d="M920.4 439.808l-108.544-109.056-72.704 72.704 109.568 108.544-109.056 108.544 72.704 72.704 108.032-109.568 108.544 109.056 72.704-72.704-109.568-108.032 109.056-108.544-72.704-72.704-108.032 109.568z"></path>
</svg>
`,"image/svg+xml").firstChild}var vf=function(s){oe(r,s);var a=ae(r);function r(){var t;Y(this,r);for(var e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];return t=a.call.apply(a,[this].concat(i)),A(w(t),"onBarMousedown",function(o){var l=w(t),u=l.player,c=t.find(".xgplayer-bar");v.event(o);var f=c.getBoundingClientRect(),d=v.getEventPos(o,u.zoom),h=f.height-(d.clientY-f.top);if(d.h=h,d.barH=f.height,t.pos=d,!(h<-2))return t.updateVolumePos(h,o),document.addEventListener("mouseup",t.onBarMouseUp),t._d.isStart=!0,!1}),A(w(t),"onBarMouseMove",function(o){var l=w(t),u=l._d;if(u.isStart){var c=w(t),f=c.pos,d=c.player;o.preventDefault(),o.stopPropagation(),v.event(o);var h=v.getEventPos(o,d.zoom);u.isMoving=!0;var g=f.h-h.clientY+f.clientY;g>f.barH||t.updateVolumePos(g,o)}}),A(w(t),"onBarMouseUp",function(o){v.event(o),document.removeEventListener("mouseup",t.onBarMouseUp);var l=w(t),u=l._d;u.isStart=!1,u.isMoving=!1}),A(w(t),"onMouseenter",function(o){t._d.isActive=!0,t.focus(),t.emit("icon_mouseenter",{pluginName:t.pluginName})}),A(w(t),"onMouseleave",function(o){t._d.isActive=!1,t.unFocus(100,!1,o),t.emit("icon_mouseleave",{pluginName:t.pluginName})}),A(w(t),"onVolumeChange",function(o){if(t.player){var l=t.player,u=l.muted,c=l.volume;t._d.isMoving||(t.find(".xgplayer-drag").style.height=u||c===0?"4px":"".concat(c*100,"%"),t.config.showValueLabel&&t.updateVolumeValue()),t.animate(u,c)}}),t}return X(r,[{key:"registerIcons",value:function(){return{volumeSmall:{icon:hf,class:"xg-volume-small"},volumeLarge:{icon:df,class:"xg-volume"},volumeMuted:{icon:gf,class:"xg-volume-mute"}}}},{key:"afterCreate",value:function(){var e=this;if(this._timerId=null,this._d={isStart:!1,isMoving:!1,isActive:!1},!this.config.disable){this.initIcons();var i=this.playerConfig,n=i.commonStyle,o=i.volume;n.volumeColor&&(this.find(".xgplayer-drag").style.backgroundColor=n.volumeColor),this.changeMutedHandler=this.hook("mutedChange",function(l){e.changeMuted(l)},{pre:function(u){u.preventDefault(),u.stopPropagation()}}),this._onMouseenterHandler=this.hook("mouseenter",this.onMouseenter),this._onMouseleaveHandler=this.hook("mouseleave",this.onMouseleave),ce.device!=="mobile"&&this.playerConfig.isMobileSimulateMode!=="mobile"&&(this.bind("mouseenter",this._onMouseenterHandler),this.bind(["blur","mouseleave"],this._onMouseleaveHandler),this.bind(".xgplayer-slider","mousedown",this.onBarMousedown),this.bind(".xgplayer-slider","mousemove",this.onBarMouseMove),this.bind(".xgplayer-slider","mouseup",this.onBarMouseUp)),this.bind(".xgplayer-icon",["touchend","click"],this.changeMutedHandler),this.on(Wo,this.onVolumeChange),this.once(Rt,this.onVolumeChange),v.typeOf(o)!=="Number"&&(this.player.volume=this.config.default),this.onVolumeChange()}}},{key:"updateVolumePos",value:function(e,i){var n=this.player,o=this.find(".xgplayer-drag"),l=this.find(".xgplayer-bar");if(!(!l||!o)){var u=parseInt(e/l.getBoundingClientRect().height*1e3,10);o.style.height="".concat(e,"px");var c=Math.max(Math.min(u/1e3,1),0),f={volume:{from:n.volume,to:c}};n.muted&&(f.muted={from:!0,to:!1}),this.emitUserAction(i,"change_volume",{muted:n.muted,volume:n.volume,props:f}),n.volume=Math.max(Math.min(u/1e3,1),0),n.muted&&(n.muted=!1),this.config.showValueLabel&&this.updateVolumeValue()}}},{key:"updateVolumeValue",value:function(){var e=this.player,i=e.volume,n=e.muted,o=this.find(".xgplayer-value-label"),l=Math.max(Math.min(i,1),0);o.innerText=n?0:Math.ceil(l*100)}},{key:"focus",value:function(){var e=this.player;e.focus({autoHide:!1}),this._timerId&&(v.clearTimeout(this,this._timerId),this._timerId=null),v.addClass(this.root,"slide-show")}},{key:"unFocus",value:function(){var e=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:100,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,o=arguments.length>2?arguments[2]:void 0,l=this._d,u=this.player;l.isActive||(this._timerId&&(v.clearTimeout(this,this._timerId),this._timerId=null),this._timerId=v.setTimeout(this,function(){l.isActive||(n?u.blur():u.focus(),v.removeClass(e.root,"slide-show"),l.isStart&&e.onBarMouseUp(o)),e._timerId=null},i))}},{key:"changeMuted",value:function(e){e&&e.stopPropagation();var i=this.player,n=this._d;n.isStart&&this.onBarMouseUp(e),this.emitUserAction(e,"change_muted",{muted:i.muted,volume:i.volume,props:{muted:{from:i.muted,to:!i.muted}}}),i.volume>0&&(i.muted=!i.muted),i.volume<.01&&(i.volume=this.config.miniVolume)}},{key:"animate",value:function(e,i){e||i===0?this.setAttr("data-state","mute"):i<.5&&this.icons.volumeSmall?this.setAttr("data-state","small"):this.setAttr("data-state","normal")}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(".xgplayer-icon",e.volumeSmall),this.appendChild(".xgplayer-icon",e.volumeLarge),this.appendChild(".xgplayer-icon",e.volumeMuted)}},{key:"destroy",value:function(){this._timerId&&(v.clearTimeout(this,this._timerId),this._timerId=null),this.unbind("mouseenter",this.onMouseenter),this.unbind(["blur","mouseleave"],this.onMouseleave),this.unbind(".xgplayer-slider","mousedown",this.onBarMousedown),this.unbind(".xgplayer-slider","mousemove",this.onBarMouseMove),this.unbind(".xgplayer-slider","mouseup",this.onBarMouseUp),document.removeEventListener("mouseup",this.onBarMouseUp),this.unbind(".xgplayer-icon",ce.device==="mobile"?"touchend":"click",this.changeMutedHandler)}},{key:"render",value:function(){if(!this.config.disable){var e=this.config.default||this.player.volume,i=this.config.showValueLabel;return`
    <xg-icon class="xgplayer-volume" data-state="normal">
      <div class="xgplayer-icon">
      </div>
      <xg-slider class="xgplayer-slider">
        `.concat(i?'<div class="xgplayer-value-label">'.concat(e*100,"</div>"):"",`
        <div class="xgplayer-bar">
          <xg-drag class="xgplayer-drag" style="height: `).concat(e*100,`%"></xg-drag>
        </div>
      </xg-slider>
    </xg-icon>`)}}}],[{key:"pluginName",get:function(){return"volume"}},{key:"defaultConfig",get:function(){return{position:Ce.CONTROLS_RIGHT,index:1,disable:!1,showValueLabel:!1,default:.6,miniVolume:.2}}}]),r}(be);function pf(){return new DOMParser().parseFromString(`<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="-4 -6 40 40" fill="none">
  <g clip-path="url(#clip0)">
    <path transform="scale(1.5 1.5)" d="M11.6665 9.16663H4.1665C2.78579 9.16663 1.6665 10.2859 1.6665 11.6666V15.8333C1.6665 17.214 2.78579 18.3333 4.1665 18.3333H11.6665C13.0472 18.3333 14.1665 17.214 14.1665 15.8333V11.6666C14.1665 10.2859 13.0472 9.16663 11.6665 9.16663Z" fill="white"/>
    <path transform="scale(1.5 1.5)" fill-rule="evenodd" clip-rule="evenodd" d="M3.88148 4.06298C3.75371 4.21005 3.67667 4.40231 3.67749 4.61242C3.67847 4.87253 3.79852 5.10435 3.98581 5.25646L6.99111 8.05895C7.32771 8.37283 7.85502 8.35443 8.16891 8.01782C8.48279 7.68122 8.46437 7.15391 8.12778 6.84003L6.62061 5.43457L9.8198 5.4224C9.82848 5.42239 9.8372 5.42221 9.84591 5.4219C10.9714 5.38233 12.0885 5.6285 13.0931 6.13744C14.0976 6.64635 14.957 7.40148 15.5908 8.33234C16.2246 9.2632 16.6122 10.3394 16.7177 11.4606C16.823 12.5819 16.6427 13.7115 16.1934 14.7442C16.0098 15.1661 16.203 15.6571 16.6251 15.8408C17.0471 16.0243 17.5381 15.8311 17.7216 15.4091C18.2833 14.1183 18.5087 12.7063 18.3771 11.3047C18.2453 9.90318 17.7607 8.55792 16.9684 7.39433C16.1761 6.23073 15.1021 5.28683 13.8463 4.65065C12.5946 4.01651 11.203 3.70872 9.80072 3.75583L6.43415 3.76862L7.96326 2.12885C8.27715 1.79225 8.25872 1.26494 7.92213 0.951061C7.58553 0.63718 7.05822 0.655585 6.74433 0.99219L3.90268 4.0395C3.89545 4.04724 3.88841 4.05509 3.88154 4.06303L3.88148 4.06298Z" fill="white"/>
  </g>
  <defs>
    <clipPath id="clip0">
      <rect width="40" height="40" fill="white"/>
    </clipPath>
  </defs>
</svg>
`,"image/svg+xml").firstChild}var mf=function(s){oe(r,s);var a=ae(r);function r(t){var e;return Y(this,r),e=a.call(this,t),e.rotateDeg=e.config.rotateDeg||0,e}return X(r,[{key:"afterCreate",value:function(){var e=this;if(!this.config.disable){re(ne(r.prototype),"afterCreate",this).call(this),this.appendChild(".xgplayer-icon",this.icons.rotate),this.onBtnClick=this.onBtnClick.bind(this),this.bind(".xgplayer-icon",["click","touchend"],this.onBtnClick),this.on(Mt,function(){e.rotateDeg&&e.config.innerRotate&&v.setTimeout(e,function(){e.updateRotateDeg(e.rotateDeg,e.config.innerRotate)},100)});var i=this.player.root;this.rootWidth=i.style.width||i.offsetWidth||i.clientWidth,this.rootHeight=i.style.height||i.offsetHeight||i.clientHeight,this.rotateDeg&&this.updateRotateDeg(this.rotateDeg,this.config.innerRotate)}}},{key:"destroy",value:function(){re(ne(r.prototype),"destroy",this).call(this),this.unbind(".xgplayer-icon",["click","touchend"],this.onBtnClick)}},{key:"onBtnClick",value:function(e){e.preventDefault(),e.stopPropagation(),this.emitUserAction(e,"rotate"),this.rotate(this.config.clockwise,this.config.innerRotate,1)}},{key:"updateRotateDeg",value:function(e,i){if(e||(e=0),i){this.player.videoRotateDeg=e;return}var n=this.player,o=this.rootWidth,l=this.rootHeight,u=n.root,c=n.innerContainer,f=n.media,d=u.offsetWidth,h=c&&i?c.offsetHeight:u.offsetHeight,g=o,p=l,m=0,y=0;(e===.75||e===.25)&&(g="".concat(h,"px"),p="".concat(d,"px"),m=-(h-d)/2,y=-(d-h)/2);var b="translate(".concat(m,"px,").concat(y,"px) rotate(").concat(e,"turn)"),S={transformOrigin:"center center",transform:b,webKitTransform:b,height:p,width:g},E=i?f:u,I=i?n.getPlugin("poster"):null;Object.keys(S).map(function(T){E.style[T]=S[T],I&&I.root&&(I.root.style[T]=S[T])})}},{key:"rotate",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,o=this.player;this.rotateDeg||(this.rotateDeg=0);var l=e?1:-1;this.rotateDeg=(this.rotateDeg+1+l*.25*n)%1,this.updateRotateDeg(this.rotateDeg,i),o.emit(Xo,this.rotateDeg*360)}},{key:"registerIcons",value:function(){return{rotate:pf}}},{key:"render",value:function(){if(!this.config.disable)return`
    <xg-icon class="xgplayer-rotate">
      <div class="xgplayer-icon">
      </div>
      `.concat(Nt(this,"ROTATE_TIPS",this.playerConfig.isHideTips),`
    </xg-icon>`)}}],[{key:"pluginName",get:function(){return"rotate"}},{key:"defaultConfig",get:function(){return{position:Ce.CONTROLS_RIGHT,index:6,innerRotate:!0,clockwise:!1,rotateDeg:0,disable:!1}}}]),r}($t);function yf(){return new DOMParser().parseFromString(`<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path fill-rule="evenodd" clip-rule="evenodd"
    d="M16.5 4.3H3.5C3.38954 4.3 3.3 4.38954 3.3 4.5V15.5C3.3 15.6105 3.38954 15.7 3.5 15.7H8.50005L8.50006 17.5H3.5C2.39543 17.5 1.5 16.6046 1.5 15.5V4.5C1.5 3.39543 2.39543 2.5 3.5 2.5H16.5C17.6046 2.5 18.5 3.39543 18.5 4.5V8.5H16.7V4.5C16.7 4.38954 16.6105 4.3 16.5 4.3ZM12 11.5C11.4477 11.5 11 11.9477 11 12.5L11 16.5C11 17.0523 11.4478 17.5 12 17.5H17.5C18.0523 17.5 18.5 17.0523 18.5 16.5L18.5 12.5C18.5 11.9477 18.0523 11.5 17.5 11.5H12Z"
    fill="white" />
</svg>`,"image/svg+xml").firstChild}function bf(){return new DOMParser().parseFromString(`<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path fill-rule="evenodd" clip-rule="evenodd"
    d="M16.5 4.3H3.5C3.38954 4.3 3.3 4.38954 3.3 4.5V15.5C3.3 15.6105 3.38954 15.7 3.5 15.7H8.50005L8.50006 17.5H3.5C2.39543 17.5 1.5 16.6046 1.5 15.5V4.5C1.5 3.39543 2.39543 2.5 3.5 2.5H16.5C17.6046 2.5 18.5 3.39543 18.5 4.5V8.5H16.7V4.5C16.7 4.38954 16.6105 4.3 16.5 4.3ZM12 11.5C11.4477 11.5 11 11.9477 11 12.5L11 16.5C11 17.0523 11.4478 17.5 12 17.5H17.5C18.0523 17.5 18.5 17.0523 18.5 16.5L18.5 12.5C18.5 11.9477 18.0523 11.5 17.5 11.5H12Z"
    fill="white" />
  <path fill-rule="evenodd" clip-rule="evenodd"
    d="M9.4998 7.7C9.77595 7.7 9.9998 7.47614 9.9998 7.2V6.5C9.9998 6.22386 9.77595 6 9.4998 6H5.5402L5.52754 6.00016H5.5C5.22386 6.00016 5 6.22401 5 6.50016V10.4598C5 10.7359 5.22386 10.9598 5.5 10.9598H6.2C6.47614 10.9598 6.7 10.7359 6.7 10.4598V8.83005L8.76983 10.9386C8.96327 11.1357 9.27984 11.1386 9.47691 10.9451L9.97645 10.4548C10.1735 10.2613 10.1764 9.94476 9.983 9.7477L7.97289 7.7H9.4998Z"
    fill="white" />
</svg>`,"image/svg+xml").firstChild}var en={PIP:"picture-in-picture",INLINE:"inline",FULLSCREEN:"fullscreen"},Sf=function(s){oe(r,s);var a=ae(r);function r(){var t;Y(this,r);for(var e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];return t=a.call.apply(a,[this].concat(i)),A(w(t),"switchPIP",function(o){if(!t.isPIPAvailable())return!1;o.stopPropagation&&o.stopPropagation(),t.isPip?(t.exitPIP(),t.emitUserAction(o,"change_pip",{props:"pip",from:!0,to:!1}),t.setAttr("data-state","normal")):t.player.media.readyState===4&&(t.requestPIP(),t.emitUserAction(o,"change_pip",{props:"pip",from:!1,to:!0}),t.setAttr("data-state","pip"))}),t}return X(r,[{key:"beforeCreate",value:function(e){typeof e.player.config.pip=="boolean"&&(e.config.showIcon=e.player.config.pip)}},{key:"afterCreate",value:function(){var e=this;this.isPIPAvailable()&&(re(ne(r.prototype),"afterCreate",this).call(this),this.pMode=en.INLINE,this.initPipEvents(),this.config.showIcon&&this.initIcons(),this.once(Ii,function(){e.config.showIcon&&(v.removeClass(e.find(".xgplayer-icon"),"xg-icon-disable"),e.bind("click",e.switchPIP))}))}},{key:"registerIcons",value:function(){return{pipIcon:{icon:yf,class:"xg-get-pip"},pipIconExit:{icon:bf,class:"xg-exit-pip"}}}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(".xgplayer-icon",e.pipIcon),this.appendChild(".xgplayer-icon",e.pipIconExit)}},{key:"initPipEvents",value:function(){var e=this,i=this.player;this.leavePIPCallback=function(){var n=i.paused;v.setTimeout(e,function(){!n&&i.mediaPlay()},0),!n&&i.mediaPlay(),e.setAttr("data-state","normal"),i.emit(fr,!1)},this.enterPIPCallback=function(n){i.emit(fr,!0),e.pipWindow=n.pictureInPictureWindow,e.setAttr("data-state","pip")},this.onWebkitpresentationmodechanged=function(n){var o=i.media.webkitPresentationMode;e.pMode===en.FULLSCREEN&&o!==en.FULLSCREEN&&i.onFullscreenChange(null,!1),e.pMode=o,o===en.PIP?e.enterPIPCallback(n):o===en.INLINE&&e.leavePIPCallback(n)},i.media&&(i.media.addEventListener("enterpictureinpicture",this.enterPIPCallback),i.media.addEventListener("leavepictureinpicture",this.leavePIPCallback),r.checkWebkitSetPresentationMode(i.media)&&i.media.addEventListener("webkitpresentationmodechanged",this.onWebkitpresentationmodechanged))}},{key:"requestPIP",value:function(){var e=this.player,i=this.playerConfig;if(!(!this.isPIPAvailable()||this.isPip))try{var n=i.poster;return n&&(e.media.poster=v.typeOf(n)==="String"?n:n.poster),r.checkWebkitSetPresentationMode(e.media)?e.media.webkitSetPresentationMode("picture-in-picture"):e.media.requestPictureInPicture(),!0}catch(o){return console.error("requestPiP",o),!1}}},{key:"exitPIP",value:function(){var e=this.player;try{return this.isPIPAvailable()&&this.isPip&&(r.checkWebkitSetPresentationMode(e.media)?e.media.webkitSetPresentationMode("inline"):document.exitPictureInPicture()),!0}catch(i){return console.error("exitPIP",i),!1}}},{key:"isPip",get:function(){var e=this.player;return document.pictureInPictureElement&&document.pictureInPictureElement===e.media||e.media.webkitPresentationMode===en.PIP}},{key:"isPIPAvailable",value:function(){var e=this.player.media,i=v.typeOf(document.pictureInPictureEnabled)==="Boolean"?document.pictureInPictureEnabled:!0;return i&&(v.typeOf(e.disablePictureInPicture)==="Boolean"&&!e.disablePictureInPicture||e.webkitSupportsPresentationMode&&v.typeOf(e.webkitSetPresentationMode)==="Function")}},{key:"destroy",value:function(){re(ne(r.prototype),"destroy",this).call(this);var e=this.player;e.media.removeEventListener("enterpictureinpicture",this.enterPIPCallback),e.media.removeEventListener("leavepictureinpicture",this.leavePIPCallback),r.checkWebkitSetPresentationMode(e.media)&&e.media.removeEventListener("webkitpresentationmodechanged",this.onWebkitpresentationmodechanged),this.exitPIP(),this.unbind("click",this.btnClick)}},{key:"render",value:function(){if(!(!this.config.showIcon||!this.isPIPAvailable()))return`<xg-icon class="xgplayer-pip">
      <div class="xgplayer-icon xg-icon-disable">
      </div>
      `.concat(Nt(this,"PIP",this.playerConfig.isHideTips),`
    </xg-icon>`)}}],[{key:"pluginName",get:function(){return"pip"}},{key:"defaultConfig",get:function(){return{position:Ce.CONTROLS_RIGHT,index:6,showIcon:!1}}},{key:"checkWebkitSetPresentationMode",value:function(e){return typeof e.webkitSetPresentationMode=="function"}}]),r}($t);function Ef(){return new DOMParser().parseFromString(`<svg xmlns="http://www.w3.org/2000/svg" width="24" height="40" viewBox="10 0 24 40">
  <path transform="scale(0.038 0.028)" d="M800 380v768h-128v-352l-320 320v-704l320 320v-352z"></path>
</svg>
`,"image/svg+xml").firstChild}var Cf=function(s){oe(r,s);var a=ae(r);function r(t){var e;return Y(this,r),e=a.call(this,t),A(w(e),"playNext",function(i){var n=w(e),o=n.player;i.preventDefault(),i.stopPropagation(),e.idx+1<e.config.urlList.length?(e.idx++,e.nextHandler(e.config.urlList[e.idx],e.idx),o.emit(vi,e.idx+1)):(e.nextHandler(),o.emit(vi))}),e.idx=-1,e}return X(r,[{key:"afterCreate",value:function(){!this.config.urlList||this.config.urlList.length===0||(this.appendChild(".xgplayer-icon",this.icons.playNext),this.initEvents())}},{key:"registerIcons",value:function(){return{playNext:Ef}}},{key:"initEvents",value:function(){this.nextHandler=this.hook("nextClick",this.changeSrc);var e=ce.device==="mobile"?"touchend":"click";this.bind(e,this.playNext),this.show()}},{key:"changeSrc",value:function(e){var i=this.player;e&&(i.pause(),i.currentTime=0,i.switchURL?i.switchURL(e):i.src=e,i.config.url=e,i.play())}},{key:"destroy",value:function(){this.unbind(["touchend","click"],this.playNext)}},{key:"render",value:function(){if(!(!this.config.urlList||this.config.urlList.length===0))return`
     <xg-icon class="xgplayer-playnext">
      <div class="xgplayer-icon">
      </div>
      `.concat(Nt(this,"PLAYNEXT_TIPS",this.playerConfig.isHideTips),`
     </xg-icon>
    `)}}],[{key:"pluginName",get:function(){return"playNext"}},{key:"defaultConfig",get:function(){return{position:Ce.CONTROLS_LEFT,index:1,url:null,urlList:[]}}}]),r}(be),la={exports:{}};(function(s,a){(function(r,t){s.exports=t()})(wo,function(){return function r(t,e,i){var n=window,o="application/octet-stream",l=i||o,u=t,c=!e&&!i&&u,f=document.createElement("a"),d=function(D){return String(D)},h=n.Blob||n.MozBlob||n.WebKitBlob||d,g=e||"download",p,m;if(h=h.call?h.bind(n):Blob,String(this)==="true"&&(u=[u,l],l=u[0],u=u[1]),c&&c.length<2048&&(g=c.split("/").pop().split("?")[0],f.href=c,f.href.indexOf(c)!==-1)){var y=new XMLHttpRequest;return y.open("GET",c,!0),y.responseType="blob",y.onload=function(D){r(D.target.response,g,o)},setTimeout(function(){y.send()},0),y}if(/^data:([\w+-]+\/[\w+.-]+)?[,;]/.test(u))if(u.length>1024*1024*1.999&&h!==d)u=I(u),l=u.type||o;else return navigator.msSaveBlob?navigator.msSaveBlob(I(u),g):T(u);else if(/([\x80-\xff])/.test(u)){var b=0,S=new Uint8Array(u.length),E=S.length;for(b;b<E;++b)S[b]=u.charCodeAt(b);u=new h([S],{type:l})}p=u instanceof h?u:new h([u],{type:l});function I(D){var _=D.split(/[:;,]/),k=_[1],O=_[2]=="base64"?atob:decodeURIComponent,H=O(_.pop()),z=H.length,L=0,N=new Uint8Array(z);for(L;L<z;++L)N[L]=H.charCodeAt(L);return new h([N],{type:k})}function T(D,_){if("download"in f)return f.href=D,f.setAttribute("download",g),f.className="download-js-link",f.innerHTML="downloading...",f.style.display="none",document.body.appendChild(f),setTimeout(function(){f.click(),document.body.removeChild(f),_===!0&&setTimeout(function(){n.URL.revokeObjectURL(f.href)},250)},66),!0;if(/(Version)\/(\d+)\.(\d+)(?:\.(\d+))?.*Safari\//.test(navigator.userAgent))return/^data:/.test(D)&&(D="data:"+D.replace(/^data:([\w\/\-\+]+)/,o)),window.open(D)||confirm(`Displaying New Document

Use Save As... to download, then click back to return to this page.`)&&(location.href=D),!0;var k=document.createElement("iframe");document.body.appendChild(k),!_&&/^data:/.test(D)&&(D="data:"+D.replace(/^data:([\w\/\-\+]+)/,o)),k.src=D,setTimeout(function(){document.body.removeChild(k)},333)}if(navigator.msSaveBlob)return navigator.msSaveBlob(p,g);if(n.URL)T(n.URL.createObjectURL(p),!0);else{if(typeof p=="string"||p.constructor===d)try{return T("data:"+l+";base64,"+n.btoa(p))}catch{return T("data:"+l+","+encodeURIComponent(p))}m=new FileReader,m.onload=function(D){T(this.result)},m.readAsDataURL(p)}return!0}})})(la);var Tf=la.exports;const xf=Ti(Tf);function If(){return new DOMParser().parseFromString(`<svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" viewBox="0 0 24 24">
  <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
    <g transform="translate(-488.000000, -340.000000)" fill="#FFFFFF">
      <g id="Group-2">
        <g id="volme_big-copy" transform="translate(488.000000, 340.000000)">
          <rect id="Rectangle-18" x="11" y="4" width="2" height="12" rx="1"></rect>
          <rect id="Rectangle-2" x="3" y="18" width="18" height="2" rx="1"></rect>
          <rect id="Rectangle-2" transform="translate(4.000000, 17.500000) rotate(90.000000) translate(-4.000000, -17.500000) " x="1.5" y="16.5" width="5" height="2" rx="1"></rect><rect id="Rectangle-2-Copy-3" transform="translate(20.000000, 17.500000) rotate(90.000000) translate(-20.000000, -17.500000) " x="17.5" y="16.5" width="5" height="2" rx="1"></rect>
          <path d="M9.48791171,8.26502656 L9.48791171,14.2650266 C9.48791171,14.8173113 9.04019646,15.2650266 8.48791171,15.2650266 C7.93562696,15.2650266 7.48791171,14.8173113 7.48791171,14.2650266 L7.48791171,7.26502656 C7.48791171,6.71274181 7.93562696,6.26502656 8.48791171,6.26502656 L15.4879117,6.26502656 C16.0401965,6.26502656 16.4879117,6.71274181 16.4879117,7.26502656 C16.4879117,7.81731131 16.0401965,8.26502656 15.4879117,8.26502656 L9.48791171,8.26502656 Z" id="Combined-Shape" transform="translate(11.987912, 10.765027) scale(1, -1) rotate(45.000000) translate(-11.987912, -10.765027) "></path>
        </g>
      </g>
    </g>
  </g>
</svg>
`,"image/svg+xml").firstChild}var wf=function(s){oe(r,s);var a=ae(r);function r(t){var e;return Y(this,r),e=a.call(this,t),A(w(e),"download",function(i){if(!e.isLock){e.emitUserAction(i,"download");var n=e.playerConfig.url,o="";v.typeOf(n)==="String"?o=n:v.typeOf(n)==="Array"&&n.length>0&&(o=n[0].src);var l=e.getAbsoluteURL(o);xf(l),e.isLock=!0,e.timer=window.setTimeout(function(){e.isLock=!1,window.clearTimeout(e.timer),e.timer=null},300)}}),e.timer=null,e.isLock=!1,e}return X(r,[{key:"afterCreate",value:function(){re(ne(r.prototype),"afterCreate",this).call(this),!this.config.disable&&(this.appendChild(".xgplayer-icon",this.icons.download),this._handler=this.hook("click",this.download,{pre:function(i){i.preventDefault(),i.stopPropagation()}}),this.bind(["click","touchend"],this._handler))}},{key:"registerIcons",value:function(){return{download:If}}},{key:"getAbsoluteURL",value:function(e){if(!e.match(/^https?:\/\//)){var i=document.createElement("div");i.innerHTML='<a href="'.concat(e,'">x</a>'),e=i.firstChild.href}return e}},{key:"destroy",value:function(){re(ne(r.prototype),"destroy",this).call(this),this.unbind(["click","touchend"],this.download),window.clearTimeout(this.timer),this.timer=null}},{key:"render",value:function(){if(!this.config.disable)return`<xg-icon class="xgplayer-download">
   <div class="xgplayer-icon">
   </div>
   `.concat(Nt(this,"DOWNLOAD_TIPS",this.playerConfig.isHideTips),`
    </xg-icon>`)}}],[{key:"pluginName",get:function(){return"download"}},{key:"defaultConfig",get:function(){return{position:Ce.CONTROLS_RIGHT,index:3,disable:!0}}}]),r}($t),Pf=function(s){oe(r,s);var a=ae(r);function r(){return Y(this,r),a.apply(this,arguments)}return X(r,[{key:"beforeCreate",value:function(e){typeof e.player.config.screenShot=="boolean"&&(e.config.disable=!e.player.config.screenShot)}},{key:"afterCreate",value:function(){re(ne(r.prototype),"afterCreate",this).call(this),this.appendChild(".xgplayer-icon",this.icons.screenshotIcon);var e=this.config;this.initSize=function(i){e.fitVideo&&(e.width=i.vWidth,e.height=i.vHeight)},this.once(Mt,this.initSize)}},{key:"onPluginsReady",value:function(){this.show(),this.onClickBtn=this.onClickBtn.bind(this),this.bind(["click","touchend"],this.onClickBtn)}},{key:"saveScreenShot",value:function(e,i){var n=document.createElement("a");n.href=e,n.download=i;var o=document.createEvent("MouseEvents");o.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),n.dispatchEvent(o)}},{key:"createCanvas",value:function(e,i){var n=document.createElement("canvas"),o=n.getContext("2d");this.canvasCtx=o,this.canvas=n,n.width=e||this.config.width,n.height=i||this.config.height,o.imageSmoothingEnabled=!0,o.imageSmoothingEnabled&&(o.imageSmoothingQuality="high")}},{key:"onClickBtn",value:function(e){var i=this;e.preventDefault(),e.stopPropagation(),this.emitUserAction(e,"shot"),this.shot().then(function(n){i.emit(Jo,n),i.saveScreenShot(n,i.config.name+i.config.format)})}},{key:"shot",value:function(e,i){var n=this,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{quality:.92,type:"image/png"},l=this.config,u=this.player,c=o.quality||l.quality,f=o.type||l.type;return new Promise(function(d,h){var g=null,p;if(u.media.canvas)g=u.media.canvas;else{n.canvas?(n.canvas.width=e||l.width,n.canvas.height=i||l.height):n.createCanvas(e,i),g=n.canvas,p=n.canvasCtx;var m=u.media.videoWidth/u.media.videoHeight,y=g.width/g.height,b=0,S=0,E=u.media.videoWidth,I=u.media.videoHeight,T,D,_,k;m>y?(_=g.width,k=g.width/m,T=0,D=Math.round((g.height-k)/2)):m===y?(_=g.width,k=g.height,T=0,D=0):m<y&&(_=g.height*m,k=g.height,T=Math.round((g.width-_)/2),D=0),p.drawImage(u.media,b,S,E,I,T,D,_,k)}var O=g.toDataURL(f,c).replace(f,"image/octet-stream");O=O.replace(/^data:image\/[^;]+/,"data:application/octet-stream"),d(O)})}},{key:"registerIcons",value:function(){return{screenshotIcon:null}}},{key:"destroy",value:function(){re(ne(r.prototype),"destroy",this).call(this),this.unbind(["click","touchend"],this.onClickBtn),this.off(Mt,this.initSize)}},{key:"render",value:function(){if(!this.config.disable){var e=this.icons.screenshotIcon?"xgplayer-icon":"xgplayer-icon btn-text",i="SCREENSHOT";return`
      <xg-icon class="xgplayer-shot">
      <div class="`.concat(e,`">
      `).concat(this.icons.screenshotIcon?"":'<span lang-key="'.concat(this.i18nKeys[i],'">').concat(this.i18n[i],"</span>"),`
      </div>
    </xg-icon>`)}}}],[{key:"pluginName",get:function(){return"screenShot"}},{key:"defaultConfig",get:function(){return{position:Ce.CONTROLS_RIGHT,index:5,quality:.92,type:"image/png",format:".png",width:600,height:337,fitVideo:!0,disable:!1,name:"screenshot"}}}]),r}($t),kf=function(){function s(a){Y(this,s),this.config=a.config,this.parent=a.root,this.root=v.createDom("ul","",{},"xg-options-list xg-list-slide-scroll ".concat(this.config.className)),a.root.appendChild(this.root);var r=this.config.maxHeight;r&&this.setStyle({maxHeight:r}),this.onItemClick=this.onItemClick.bind(this),this.renderItemList();var t=ce.device==="mobile"?"touchend":"click";this._delegates=be.delegate.call(this,this.root,"li",t,this.onItemClick)}return X(s,[{key:"renderItemList",value:function(r){var t=this,e=this.config,i=this.root;r?e.data=r:r=e.data,e.style&&Object.keys(e.style).map(function(n){i.style[n]=e[n]}),r.length>0&&(this.attrKeys=Object.keys(r[0])),this.root.innerHTML="",r.map(function(n,o){var l=n.selected?"option-item selected":"option-item";n["data-index"]=o,t.root.appendChild(v.createDom("li","<span>".concat(n.showText,"</span>"),n,l))})}},{key:"onItemClick",value:function(r){r.delegateTarget||(r.delegateTarget=r.target);var t=r.delegateTarget;if(t&&v.hasClass(t,"selected"))return!1;var e=typeof this.config.onItemClick=="function"?this.config.onItemClick:null,i=this.root.querySelector(".selected");v.addClass(t,"selected"),i&&v.removeClass(i,"selected"),e(r,{from:i?this.getAttrObj(i,this.attrKeys):null,to:this.getAttrObj(t,this.attrKeys)})}},{key:"getAttrObj",value:function(r,t){if(!r||!t)return{};var e={};t.map(function(n){e[n]=r.getAttribute(n)});var i=r.getAttribute("data-index");return i&&(e.index=Number(i)),e}},{key:"show",value:function(){v.removeClass(this.root,"hide"),v.addClass(this.root,"active")}},{key:"hide",value:function(){v.removeClass(this.root,"active"),v.addClass(this.root,"hide")}},{key:"setStyle",value:function(r){var t=this;Object.keys(r).forEach(function(e){t.root.style[e]=r[e]})}},{key:"destroy",value:function(){this._delegates&&(this._delegates.map(function(r){r.destroy&&r.destroy()}),this._delegates=null),this.root.innerHTML=null,this.parent.removeChild(this.root),this.root=null}}]),s}(),vt={SIDE:"side",MIDDLE:"middle"},tn={CLICK:"click",HOVER:"hover"};function Of(s,a){return s===vt.SIDE?a===Ce.CONTROLS_LEFT?"xg-side-list xg-left-side":"xg-side-list xg-right-side":""}var Xn=ce.device==="mobile",Si=function(s){oe(r,s);var a=ae(r);function r(t){var e;return Y(this,r),e=a.call(this,t),A(w(e),"onEnter",function(i){i.stopPropagation(),e.emit("icon_mouseenter",{pluginName:e.pluginName}),e.switchActiveState(i)}),A(w(e),"switchActiveState",function(i){i.stopPropagation();var n=e.config.toggleMode;n===tn.CLICK?e.toggle(!e.isActive):e.toggle(!0)}),A(w(e),"onLeave",function(i){i.stopPropagation(),e.emit("icon_mouseleave",{pluginName:e.pluginName}),e.config.listType!==vt.SIDE&&e.isActive&&e.toggle(!1)}),A(w(e),"onListEnter",function(i){e.enterType=2}),A(w(e),"onListLeave",function(i){e.enterType=0,e.isActive&&e.toggle(!1)}),e.isIcons=!1,e.isActive=!1,e.curValue=null,e.curIndex=0,e}return X(r,[{key:"updateLang",value:function(e){this.renderItemList(this.config.list,this.curIndex)}},{key:"afterCreate",value:function(){var e=this,i=this.config;this.initIcons(),Xn&&i.listType!==vt.MIDDLE&&(i.listType=vt.SIDE),i.hidePortrait&&v.addClass(this.root,"portrait"),this.on([Mt,St],function(){e._resizeList()}),this.once(Ct,function(){i.list&&i.list.length>0&&(e.renderItemList(i.list),e.show())}),Xn&&this.on(Tr,function(){e.isActive&&(e.optionsList&&e.optionsList.hide(),e.isActive=!1)}),Xn?(i.toggleMode=tn.CLICK,this.activeEvent="touchend"):this.activeEvent=i.toggleMode===tn.CLICK?"click":"mouseenter",i.toggleMode===tn.CLICK?this.bind(this.activeEvent,this.switchActiveState):(this.bind(this.activeEvent,this.onEnter),this.bind("mouseleave",this.onLeave)),this.isIcons&&this.bind("click",this.onIconClick)}},{key:"initIcons",value:function(){var e=this,i=this.icons,n=Object.keys(i),o=!1;n.length>0&&(n.forEach(function(l){e.appendChild(".xgplayer-icon",i[l]),!o&&(o=i[l])}),this.isIcons=o),!o&&(this.appendChild(".xgplayer-icon",v.createDom("span","",{},"icon-text")),v.addClass(this.find(".xgplayer-icon"),"btn-text"))}},{key:"show",value:function(){!this.config.list||this.config.list.length<2||v.addClass(this.root,"show")}},{key:"hide",value:function(){v.removeClass(this.root,"show")}},{key:"getTextByLang",value:function(e,i,n){if(e===void 0)return"";var o=this.config.list;!n&&(n=this.player.lang),i=!i||v.isUndefined(e[i])?"text":i,typeof e=="number"&&(e=o[e]);try{return $e(e[i])==="object"?e[i][n]||e[i].en:e[i]}catch(l){return console.warn(l),""}}},{key:"toggle",value:function(e){if(e!==this.isActive){var i=this.player.controls,n=this.config.listType;e?(n===vt.SIDE?i.blur():i.focus(),this.optionsList&&this.optionsList.show()):(n===vt.SIDE?i.focus():i.focusAwhile(),this.optionsList&&this.optionsList.hide()),this.isActive=e}}},{key:"onItemClick",value:function(e,i){e.stopPropagation();var n=this.config,o=n.listType,l=n.list;this.curIndex=i.to.index,this.curItem=l[this.curIndex],this.changeCurrentText();var u=this.config.isItemClickHide;(u||Xn||o===vt.SIDE)&&this.toggle(!1)}},{key:"onIconClick",value:function(e){}},{key:"changeCurrentText",value:function(){if(!this.isIcons){var e=this.config.list,i=this.curIndex<e.length?this.curIndex:0,n=e[i];n&&(this.find(".icon-text").innerHTML=this.getTextByLang(n,"iconText"))}}},{key:"renderItemList",value:function(e,i){var n=this,o=this.config,l=this.optionsList,u=this.player;if(typeof i=="number"&&(this.curIndex=i,this.curItem=o.list[i]),l){l.renderItemList(e),this.changeCurrentText();return}var c={config:{data:e||[],className:Of(o.listType,o.position),onItemClick:function(p,m){n.onItemClick(p,m)}},root:o.listType===vt.SIDE?u.innerContainer||u.root:this.root};if(this.config.isShowIcon){var f=this.player.root.getBoundingClientRect(),d=f.height,h=o.listType===vt.MIDDLE?d-50:d;h&&(c.config.maxHeight="".concat(h,"px")),this.optionsList=new kf(c),this.changeCurrentText(),this.show()}this._resizeList()}},{key:"_resizeList",value:function(){var e=this.player.root.getBoundingClientRect(),i=e.height,n=this.config.listType===vt.MIDDLE?i-50:i;this.optionsList&&this.optionsList.setStyle({maxHeight:"".concat(n,"px")})}},{key:"destroy",value:function(){var e=this.config;e.toggleMode===tn.CLICK?this.unbind(this.activeEvent,this.switchActiveState):(this.unbind(this.activeEvent,this.onEnter),this.unbind("mouseleave",this.onLeave)),this.isIcons&&this.unbind("click",this.onIconClick),this.optionsList&&(this.optionsList.destroy(),this.optionsList=null)}},{key:"render",value:function(){if(this.config.isShowIcon)return'<xg-icon class="xg-options-icon '.concat(this.config.className||"",`">
    <div class="xgplayer-icon">
    </div>
   </xg-icon>`)}}],[{key:"pluginName",get:function(){return"optionsIcon"}},{key:"defaultConfig",get:function(){return{position:Ce.CONTROLS_RIGHT,index:100,list:[],listType:"middle",listStyle:{},hidePortrait:!0,isShowIcon:!1,isItemClickHide:!0,toggleMode:tn.HOVER}}}]),r}(be),Af=function(s){oe(r,s);var a=ae(r);function r(t){var e;return Y(this,r),e=a.call(this,t),e.curTime=0,e.isPaused=!0,e}return X(r,[{key:"beforeCreate",value:function(e){var i=e.config.list;Array.isArray(i)&&i.length>0&&(e.config.list=i.map(function(n){return!n.text&&n.name&&(n.text=n.name),n.text||(n.text=n.definition),n}))}},{key:"afterCreate",value:function(){var e=this;re(ne(r.prototype),"afterCreate",this).call(this),this.on("resourceReady",function(i){e.changeDefinitionList(i)}),this.on(Pr,function(i){e.renderItemList(e.config.list,i.to)}),this.player.definitionList.length<2&&this.hide()}},{key:"show",value:function(){!this.config.list||this.config.list.length<2||v.addClass(this.root,"show")}},{key:"initDefinition",value:function(){var e=this.config,i=e.list,n=e.defaultDefinition;if(i.length>0){var o=null;i.map(function(l){l.definition===n&&(o=l)}),o||(o=i[0]),this.changeDefinition(o)}}},{key:"renderItemList",value:function(){var e=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.config.list||[],n=arguments.length>1?arguments[1]:void 0,o=n&&n.definition?n.definition:this.config.defaultDefinition;n&&i.forEach(function(c){c.selected=!1});var l=0,u=i.map(function(c,f){var d=Ne(Ne({},c),{},{showText:e.getTextByLang(c)||c.definition,selected:!1});return(c.selected||c.definition&&c.definition==o)&&(d.selected=!0,l=f),d});re(ne(r.prototype),"renderItemList",this).call(this,u,l)}},{key:"changeDefinitionList",value:function(e){Array.isArray(e)&&(this.config.list=e.map(function(i){return!i.text&&i.name&&(i.text=i.name),i.text||(i.text=i.definition),i}),this.renderItemList(),this.config.list.length<2?this.hide():this.show())}},{key:"changeDefinition",value:function(e,i){this.player.changeDefinition(e,i)}},{key:"onItemClick",value:function(e,i){var n=this.player.definitionList;re(ne(r.prototype),"onItemClick",this).apply(this,arguments),this.emitUserAction(e,"change_definition",{from:i.from,to:i.to});for(var o=0;o<n.length;o++)i.to&&n[o].definition===i.to.definition&&(i.to.url=n[o].url),i.from&&n[o].definition===i.from.definition&&(i.from.url=n[o].url);this.player.changeDefinition(i.to,i.from)}}],[{key:"pluginName",get:function(){return"definition"}},{key:"defaultConfig",get:function(){return Ne(Ne({},Si.defaultConfig),{},{position:Ce.CONTROLS_RIGHT,index:3,list:[],defaultDefinition:"",disable:!1,hidePortrait:!1,className:"xgplayer-definition",isShowIcon:!0})}}]),r}(Si),Df=function(s){oe(r,s);var a=ae(r);function r(t){var e;return Y(this,r),e=a.call(this,t),e.curRate=1,e}return X(r,[{key:"beforeCreate",value:function(e){var i=e.player.config.playbackRate,n=i?Array.isArray(i)?i:e.config.list:[];Array.isArray(n)&&(e.config.list=n.map(function(o){return typeof o=="number"?o={rate:o,text:"".concat(o,"x")}:!o.text&&o.rate&&(o.text="".concat(o.rate,"x")),o}))}},{key:"afterCreate",value:function(){var e=this;re(ne(r.prototype),"afterCreate",this).call(this),this.on(Ko,function(){e.curValue!==e.player.playbackRate&&e.renderItemList()}),this.renderItemList()}},{key:"show",value:function(){!this.config.list||this.config.list.length===0||re(ne(r.prototype),"show",this).call(this)}},{key:"onItemClick",value:function(e,i){re(ne(r.prototype),"onItemClick",this).apply(this,arguments);var n=e.delegateTarget,o=Number(n.getAttribute("rate"));if(!o||o===this.curValue)return!1;var l={playbackRate:{from:this.player.playbackRate,to:o}};this.emitUserAction(e,"change_rate",{props:l}),this.curValue=o,this.player.playbackRate=o}},{key:"renderItemList",value:function(){var e=this,i=this.player.playbackRate||1;this.curValue=i;var n=-1,o=this.config.list.map(function(l,u){var c={rate:l.rate};return c.rate===i&&(c.selected=!0,n=u),c.showText=e.getTextByLang(l),c});re(ne(r.prototype),"renderItemList",this).call(this,o,n)}},{key:"changeCurrentText",value:function(){if(!this.isIcons){var e=this.config.list,i=this.curIndex<e.length?this.curIndex:0,n=e[i],o="";!n||this.curIndex<0?o="".concat(this.player.playbackRate,"x"):o=this.getTextByLang(n,"iconText"),this.find(".icon-text").innerHTML=o}}},{key:"destroy",value:function(){re(ne(r.prototype),"destroy",this).call(this)}}],[{key:"pluginName",get:function(){return"playbackRate"}},{key:"defaultConfig",get:function(){return Ne(Ne({},Si.defaultConfig),{},{position:Ce.CONTROLS_RIGHT,index:4,list:[2,1.5,1,.75,.5],className:"xgplayer-playbackrate",isShowIcon:!0,hidePortrait:!1})}}]),r}(Si);function Lf(){return new DOMParser().parseFromString(`<svg xmlns="http://www.w3.org/2000/svg" width="31" height="40" viewBox="0 -5 31 40">
  <path fill="#fff" transform="scale(1.3, 1.3)" class='path_full' d="M9,10v1a.9.9,0,0,1-1,1,.9.9,0,0,1-1-1V9A.9.9,0,0,1,8,8h2a.9.9,0,0,1,1,1,.9.9,0,0,1-1,1Zm6,4V13a1,1,0,0,1,2,0v2a.9.9,0,0,1-1,1H14a1,1,0,0,1,0-2Zm3-7H6V17H18Zm2,0V17a2,2,0,0,1-2,2H6a2,2,0,0,1-2-2V7A2,2,0,0,1,6,5H18A2,2,0,0,1,20,7Z"></path>
</svg>
`,"image/svg+xml").firstChild}function Rf(){return new DOMParser().parseFromString(`<svg xmlns="http://www.w3.org/2000/svg" width="31" height="40" viewBox="0 -5 31 40">
  <path fill="#fff" transform="scale(1.3, 1.3)" d="M9,10V9a.9.9,0,0,1,1-1,.9.9,0,0,1,1,1v2a.9.9,0,0,1-1,1H8a.9.9,0,0,1-1-1,.9.9,0,0,1,1-1Zm6,4v1a1,1,0,0,1-2,0V13a.9.9,0,0,1,1-1h2a1,1,0,0,1,0,2Zm3-7H6V17H18Zm2,0V17a2,2,0,0,1-2,2H6a2,2,0,0,1-2-2V7A2,2,0,0,1,6,5H18A2,2,0,0,1,20,7Z"></path>
</svg>
`,"image/svg+xml").firstChild}var po=function(s){oe(r,s);var a=ae(r);function r(){return Y(this,r),a.apply(this,arguments)}return X(r,[{key:"beforeCreate",value:function(e){typeof e.player.config.cssFullscreen=="boolean"&&(e.config.disable=!e.player.config.cssFullscreen)}},{key:"afterCreate",value:function(){var e=this;re(ne(r.prototype),"afterCreate",this).call(this),!this.config.disable&&(this.config.target&&(this.playerConfig.fullscreenTarget=this.config.target),this.initIcons(),this.on(hi,function(i){e.animate(i)}),this.btnClick=this.btnClick.bind(this),this.handleCssFullscreen=this.hook("cssFullscreen_change",this.btnClick,{pre:function(n){n.preventDefault(),n.stopPropagation()}}),this.bind(["click","touchend"],this.handleCssFullscreen))}},{key:"initIcons",value:function(){var e=this.icons,i=this.find(".xgplayer-icon");i.appendChild(e.cssFullscreen),i.appendChild(e.exitCssFullscreen)}},{key:"btnClick",value:function(e){e.preventDefault(),e.stopPropagation();var i=this.player.isCssfullScreen;this.emitUserAction(e,"switch_cssfullscreen",{cssfullscreen:i}),i?this.player.exitCssFullscreen():this.player.getCssFullscreen()}},{key:"animate",value:function(e){this.root&&(e?this.setAttr("data-state","full"):this.setAttr("data-state","normal"),this.switchTips(e))}},{key:"switchTips",value:function(e){var i=this.i18nKeys,n=this.find(".xg-tips");n&&this.changeLangTextKey(n,e?i.EXITCSSFULLSCREEN_TIPS:i.CSSFULLSCREEN_TIPS)}},{key:"registerIcons",value:function(){return{cssFullscreen:{icon:Lf,class:"xg-get-cssfull"},exitCssFullscreen:{icon:Rf,class:"xg-exit-cssfull"}}}},{key:"destroy",value:function(){re(ne(r.prototype),"destroy",this).call(this),this.unbind(["click","touchend"],this.btnClick)}},{key:"render",value:function(){if(!this.config.disable)return`<xg-icon class='xgplayer-cssfullscreen'>
    <div class="xgplayer-icon">
    </div>
    `.concat(Nt(this,"CSSFULLSCREEN_TIPS",this.playerConfig.isHideTips),`
    </xg-icon>`)}}],[{key:"pluginName",get:function(){return"cssFullscreen"}},{key:"defaultConfig",get:function(){return{position:Ce.CONTROLS_RIGHT,index:1,disable:!1,target:null}}}]),r}($t),Mf=function(s){oe(r,s);var a=ae(r);function r(){return Y(this,r),a.apply(this,arguments)}return X(r,[{key:"afterCreate",value:function(){var e=this;this.clickHandler=this.hook("errorRetry",this.errorRetry,{pre:function(n){n.preventDefault(),n.stopPropagation()}}),this.onError=this.hook("showError",this.handleError),this.bind(".xgplayer-error-refresh","click",this.clickHandler),this.on(_n,function(i){e.onError(i)})}},{key:"errorRetry",value:function(e){this.emitUserAction(e,"error_retry",{}),this.player.retry()}},{key:"handleError",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=this.player,n=e.errorType,o=i.errorNote?this.i18n[i.errorNote]:"";if(!o)switch(n){case"decoder":o=this.i18n.MEDIA_ERR_DECODE;break;case"network":o=this.i18n.MEDIA_ERR_NETWORK;break;default:o=this.i18n.MEDIA_ERR_SRC_NOT_SUPPORTED}this.find(".xgplayer-error-text").innerHTML=o,this.find(".xgplayer-error-tips").innerHTML="".concat(this.i18n.REFRESH_TIPS,'<span class="xgplayer-error-refresh">').concat(this.i18n.REFRESH,"</span>")}},{key:"destroy",value:function(){this.unbind(".xgplayer-error-refresh","click",this.clickHandler)}},{key:"render",value:function(){return`<xg-error class="xgplayer-error">
      <div class="xgplayer-errornote">
       <span class="xgplayer-error-text"></span>
       <span class="xgplayer-error-tips"><em class="xgplayer-error-refresh"></em></span>
      </div>
    </xg-error>`}}],[{key:"pluginName",get:function(){return"error"}}]),r}(be),Nf=function(s){oe(r,s);var a=ae(r);function r(){return Y(this,r),a.apply(this,arguments)}return X(r,[{key:"afterCreate",value:function(){var e=this;this.intervalId=0,this.customConfig=null,this.bind(".highlight",["click","touchend"],function(i){(e.config.onClick||e.customOnClick)&&(i.preventDefault(),i.stopPropagation(),e.customOnClick?e.customOnClick(i):e.config.onClick(i))}),this.player.showPrompt=function(){e.show.apply(e,arguments)},this.player.hidePrompt=function(){e.hide()}}},{key:"setStyle",value:function(e){var i=this;Object.keys(e).map(function(n){i.root.style[n]=e[n]})}},{key:"show",value:function(e){var i=this,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){};if(e){this.customOnClick=o;var l=this.config.interval;this.intervalId&&(clearTimeout(this.intervalId),this.intervalId=null),v.addClass(this.root,"show"),n.mode==="arrow"&&v.addClass(this.root,"arrow"),typeof e=="string"?this.find(".xgplayer-prompt-detail").innerHTML=e:this.find(".xgplayer-prompt-detail").innerHTML="".concat(e.text||"")+"".concat(e.highlight?'<i class="highlight">'.concat(e.highlight,"</i>"):""),n.style&&this.setStyle(n.style);var u=typeof n.autoHide=="boolean"?n.autoHide:this.config.autoHide;if(u){var c=n.interval||l;this.intervalId=setTimeout(function(){i.hide()},c)}}}},{key:"hide",value:function(){v.removeClass(this.root,"show"),v.removeClass(this.root,"arrow"),this.root.removeAttribute("style"),this.customOnClick=null}},{key:"render",value:function(){return'<xg-prompt class="xgplayer-prompt '.concat(M.CONTROLS_FOLLOW,`">
    <span class="xgplayer-prompt-detail"></span>
    </xg-prompt>`)}}],[{key:"pluginName",get:function(){return"prompt"}},{key:"defaultConfig",get:function(){return{interval:3e3,style:{},mode:"arrow",autoHide:!0,detail:{text:"",highlight:""},onClick:function(){}}}}]),r}(be),mo={time:0,text:"",id:1,duration:1,color:"#fff",style:{},width:6,height:6};function ua(s){Object.keys(mo).map(function(a){s[a]===void 0&&(s[a]=mo[a])})}var yo={_updateDotDom:function(a,r){if(r){var t=this.calcuPosition(a.time,a.duration),e=a.style||{};e.left="".concat(t.left,"%"),e.width="".concat(t.width,"%"),r.setAttribute("data-text",a.text),r.setAttribute("data-time",a.time),t.isMini?v.addClass(r,"mini"):v.removeClass(r,"mini"),Object.keys(e).map(function(i){r.style[i]=e[i]})}},initDots:function(){var a=this;this._ispots.map(function(r){a.createDot(r,!1)}),this.ispotsInit=!0},createDot:function(a){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,t=this.player.plugins.progress;if(t&&(r&&(ua(a),this._ispots.push(a)),!(!this.ispotsInit&&r))){var e=this.calcuPosition(a.time,a.duration),i=a.style||{};i.left="".concat(e.left,"%"),i.width="".concat(e.width,"%");var n="xgspot_".concat(a.id," xgplayer-spot");e.isMini&&(n+=" mini");var o=a.template?'<div class="xgplayer-spot-pop">'.concat(a.template,"</div>"):"",l=v.createDom("xg-spot",o,{"data-text":a.text,"data-time":a.time,"data-id":a.id},n);Object.keys(i).map(function(u){l.style[u]=i[u]}),t.outer&&t.outer.appendChild(l),this.positionDot(l,a.id)}},findDot:function(a){if(this.player.plugins.progress){var r=this._ispots.filter(function(t,e){return t.id===a});return r.length>0?r[0]:null}},updateDot:function(a){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,t=this.player.plugins.progress;if(t){var e=this.findDot(a.id);if(e&&Object.keys(a).map(function(n){e[n]=a[n]}),!!this.ispotsInit){var i=t.find('xg-spot[data-id="'.concat(a.id,'"]'));i&&(this._updateDotDom(a,i),r&&this.showDot(a.id))}}},deleteDot:function(a){var r=this._ispots,t=this.player.plugins.progress;if(t){for(var e=[],i=0;i<r.length;i++)r[i].id===a&&e.push(i);for(var n=e.length,o=n-1;o>=0;o--)if(r.splice(e[o],1),this.ispotsInit){var l=t.find('xg-spot[data-id="'.concat(a,'"]'));l&&l.parentElement.removeChild(l)}}},deleteAllDots:function(){var a=this.player.plugins.progress;if(a){if(!this.ispotsInit){this._ispots=[];return}for(var r=a.root.getElementsByTagName("xg-spot"),t=r.length-1;t>=0;t--)a.outer.removeChild(r[t]);this._ispots=[]}},updateAllDots:function(){var a=this,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=this.player.plugins.progress;if(t){if(!this.ispotsInit){this._ispots=r;return}this._ispots=[];var e=t.root.getElementsByTagName("xg-spot"),i=e.length;if(i>r.length)for(var n=i-1;n>r.length-1;n--)t.outer.removeChild(e[n]);r.forEach(function(o,l){l<i?(e[l].setAttribute("data-id","".concat(o.id)),a._ispots.push(o),a.updateDot(o)):a.createDot(o)})}},positionDots:function(){var a=this,r=this._ispots,t=this.playerSize,e=this.player.sizeInfo,i=this.player.plugins.progress;!i||e.width===t.width||(t.width=e.width,t.left=e.left,r.forEach(function(n){var o=i.find('xg-spot[data-id="'.concat(n.id,'"]'));o&&a.positionDot(o,n.id)}))},positionDot:function(a,r){var t=v.findDom(a,".xgplayer-spot-pop");if(t){var e=this.playerSize,i=a.getBoundingClientRect(),n=t.getBoundingClientRect(),o=i.left-e.left,l=e.width-o-i.width/2;if(o<n.width/2||e.width<n.width){var u=n.width/2-o;t.style.left="".concat(u,"px")}else if(l<n.width/2){var c=l-n.width/2+i.width/2;t.style.left="".concat(c,"px")}else t.style.left="50%"}},updateDuration:function(){var a=this,r=this.player.plugins.progress;if(r){var t=this._ispots;t.forEach(function(e){var i=r.find('xg-spot[data-id="'.concat(e.id,'"]'));a._updateDotDom(e,i)})}},getAllDotsDom:function(){var a=this.player.plugins.progress;if(!a)return[];var r=a.root.getElementsByTagName("xg-spot");return r},getDotDom:function(a){var r=this.player.plugins.progress;if(r)return r.find('xg-spot[data-id="'.concat(a,'"]'))}};function Ff(s){var a=s.config,r=s.player;Object.keys(yo).map(function(e){s[e]=yo[e].bind(s)});var t=r.config.progressDot||a.ispots||[];s._ispots=t.map(function(e){return ua(e),e}),s.ispotsInit=!1,s.playerSize={left:r.sizeInfo.left,width:r.sizeInfo.width},s.on(zt,function(){s.ispotsInit?s.updateDuration():s.initDots()}),s.on(Mt,function(){s.positionDots()})}var nn={dragmove:"onProgressMove",dragstart:"onProgressDragStart",dragend:"onProgressDragEnd",click:"onProgressClick",mouseover:"onProgressMouseOver",mouseenter:"onProgressMove"},_f=function(s){oe(r,s);var a=ae(r);function r(t){var e;return Y(this,r),e=a.call(this,t),A(w(e),"onMousemove",function(i){if(!e.config.disable){if(v.hasClass(i.target,"xg-spot-content")&&e.config.isHideThumbnailHover){e.player.plugins.progress.onMouseLeave(i);return}(e._state.f||v.hasClass(i.target,"xg-spot-content"))&&(v.event(i),i.stopPropagation())}}),A(w(e),"onMousedown",function(i){e.config.disable||(e._state.f||v.hasClass(i.target,"xg-spot-content"))&&(v.event(i),i.stopPropagation())}),A(w(e),"onMouseup",function(i){if(e.isDrag){var n=e.player.plugins.progress;n&&n.pos&&(n.onMouseUp(i),!n.pos.isEnter&&n.onMouseLeave(i))}}),A(w(e),"onDotMouseLeave",function(i){if(!e.config.disable){e._curDot.removeEventListener("mouseleave",e.onDotMouseLeave),e.blurDot(i.target),e._curDot=null;var n=e.player.plugins.progress;n&&n.enableBlur(),e.show()}}),A(w(e),"onProgressMouseOver",function(i,n){if(!e.config.disable&&v.hasClass(n.target,"xgplayer-spot")&&!e._curDot){e._curDot=n.target,e.focusDot(n.target),e._curDot.children.length>0&&e.hide();var o=e.player.plugins.progress;o&&o.disableBlur(),e._curDot.addEventListener("mouseleave",e.onDotMouseLeave)}}),e._ispots=[],e.videoPreview=null,e.videothumbnail=null,e.thumbnail=null,e.timeStr="",e._state={now:0,f:!1},e}return X(r,[{key:"beforeCreate",value:function(e){var i=e.player.plugins.progress;i&&(e.root=i.root)}},{key:"afterCreate",value:function(){var e=this;this._curDot=null,this.handlerSpotClick=this.hook("spotClick",function(i,n){n.currentTime&&e.player.seek(n.currentTime)}),this.transformTimeHook=this.hook("transformTime",function(i){e.setTimeContent(v.format(i))}),Ff(this),this.on(zt,function(){e.show()}),this.config.disable&&this.disable(),this.extTextRoot=this.find(".xg-spot-ext-text")}},{key:"setConfig",value:function(e){var i=this;e&&Object.keys(e).map(function(n){i.config[n]=e[n]})}},{key:"onPluginsReady",value:function(){var e=this.player;e.plugins.progress&&(this.previewLine=this.find(".xg-spot-line"),this.timePoint=this.find(".xgplayer-progress-point"),this.timeText=this.find(".xg-spot-time"),this.tipText=this.find(".spot-inner-text"),this._hasThumnail=!1,this.registerThumbnail(),this.bindEvents())}},{key:"bindEvents",value:function(){var e=this,i=this.player.plugins.progress;if(i&&(Object.keys(nn).map(function(o){e[nn[o]]=e[nn[o]].bind(e),i.addCallBack(o,e[nn[o]])}),ce.device!=="mobile")){this.bind(".xg-spot-info","mousemove",this.onMousemove),this.bind(".xg-spot-info","mousedown",this.onMousedown),this.bind(".xg-spot-info","mouseup",this.onMouseup);var n=this.hook("previewClick",function(){});this.handlerPreviewClick=function(o){o.stopPropagation(),n(parseInt(e._state.now*1e3,10)/1e3,o)},this.bind(".xg-spot-content","mouseup",this.handlerPreviewClick)}}},{key:"onProgressMove",value:function(e,i){this.config.disable||!this.player.duration||this.updatePosition(e.offset,e.width,e.currentTime,e.e)}},{key:"onProgressDragStart",value:function(e){this.config.disable||!this.player.duration||(this.isDrag=!0,this.videoPreview&&v.addClass(this.videoPreview,"show"))}},{key:"onProgressDragEnd",value:function(e){this.config.disable||!this.player.duration||(this.isDrag=!1,this.videoPreview&&v.removeClass(this.videoPreview,"show"))}},{key:"onProgressClick",value:function(e,i){this.config.disable||v.hasClass(i.target,"xgplayer-spot")&&(i.stopPropagation(),i.preventDefault(),["time","id","text"].map(function(n){e[n]=i.target.getAttribute("data-".concat(n))}),e.time&&(e.time=Number(e.time)),this.handlerSpotClick(i,e))}},{key:"updateLinePos",value:function(e,i){var n=this.root,o=this.previewLine,l=this.player,u=this.config,c=l.controls.mode,f=c==="flex",d=n.getBoundingClientRect().width;if(d){d=this._hasThumnail&&d<u.width?u.width:d;var h=e-d/2,g;h<0&&!f?(h=0,g=e-d/2):h>i-d&&!f?(g=h-(i-d),h=i-d):g=0,g!==void 0&&(o.style.transform="translateX(".concat(g.toFixed(2),"px)")),n.style.transform="translateX(".concat(h.toFixed(2),"px) translateZ(0)")}}},{key:"updateTimeText",value:function(e){var i=this.timeText,n=this.timePoint;i.innerHTML=e,!this.thumbnail&&(n.innerHTML=e)}},{key:"updatePosition",value:function(e,i,n,o){var l=this.root,u=this.config,c=this._state;if(l){c.now=n,this.transformTimeHook(n);var f=this.timeStr;o&&o.target&&v.hasClass(o.target,"xgplayer-spot")?(this.showTips(o.target.getAttribute("data-text"),!1,f),this.focusDot(o.target),c.f=!0,u.isFocusDots&&c.f&&(c.now=parseInt(o.target.getAttribute("data-time"),10))):u.defaultText?(c.f=!1,this.showTips(u.defaultText,!0,f)):(c.f=!1,this.hideTips("")),this.updateTimeText(f),this.updateThumbnails(c.now),this.updateLinePos(e,i)}}},{key:"setTimeContent",value:function(e){this.timeStr=e}},{key:"updateThumbnails",value:function(e){var i=this.player,n=this.videoPreview,o=this.config,l=i.plugins.thumbnail;if(l&&l.usable){this.thumbnail&&l.update(this.thumbnail,e,o.width,o.height);var u=n&&n.getBoundingClientRect();this.videothumbnail&&l.update(this.videothumbnail,e,u.width,u.height)}}},{key:"registerThumbnail",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(ce.device!=="mobile"){var i=this.player,n=this.config,o=i.getPlugin("thumbnail");if(o&&o.setConfig(e),!o||!o.usable||!n.isShowThumbnail){v.addClass(this.root,"short-line no-thumbnail");return}else v.removeClass(this.root,"short-line no-thumbnail");n.mode==="short"&&v.addClass(this.root,"short-line"),this._hasThumnail=!0;var l=this.find(".xg-spot-thumbnail");this.thumbnail=o.createThumbnail(l,"progress-thumbnail"),n.isShowCoverPreview&&(this.videoPreview=v.createDom("xg-video-preview","",{},"xgvideo-preview"),i.root.appendChild(this.videoPreview),this.videothumbnail=o.createThumbnail(this.videoPreview,"xgvideo-thumbnail")),this.updateThumbnails(0)}}},{key:"calcuPosition",value:function(e,i){var n=this.player.plugins.progress,o=this.player,l=n.root.getBoundingClientRect().width,u=o.duration/l*6;return e+i>o.duration&&(i=o.duration-e),e/o.duration*100,i/o.duration,{left:e/o.duration*100,width:i/o.duration*100,isMini:i<u}}},{key:"showDot",value:function(e){var i=this.findDot(e);if(i){var n=this.root.getBoundingClientRect(),o=n.width,l=i.time/this.player.duration*o;this.updatePosition(l,o,i.time)}}},{key:"focusDot",value:function(e,i){e&&(i||(i=e.getAttribute("data-id")),v.addClass(e,"active"),this._activeDotId=i)}},{key:"blurDot",value:function(e){if(!e){var i=this._activeDotId;e=this.getDotDom(i)}e&&(v.removeClass(e,"active"),this._activeDotId=null)}},{key:"showTips",value:function(e,i){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";v.addClass(this.root,"no-timepoint"),e&&(v.addClass(this.find(".xg-spot-content"),"show-text"),i&&this.config.mode==="production"?(v.addClass(this.root,"product"),this.tipText.textContent=e):(v.removeClass(this.root,"product"),this.tipText.textContent=this._hasThumnail?e:"".concat(n," ").concat(e)))}},{key:"hideTips",value:function(){v.removeClass(this.root,"no-timepoint"),this.tipText.textContent="",v.removeClass(this.find(".xg-spot-content"),"show-text"),v.removeClass(this.root,"product")}},{key:"hide",value:function(){v.addClass(this.root,"hide")}},{key:"show",value:function(){v.removeClass(this.root,"hide")}},{key:"enable",value:function(){var e=this.config,i=this.playerConfig;this.config.disable=!1,this.show(),!this.thumbnail&&e.isShowThumbnail&&this.registerThumbnail(i.thumbnail||{})}},{key:"disable",value:function(){this.config.disable=!0,this.hide()}},{key:"destroy",value:function(){var e=this,i=this.player.plugins.progress;i&&Object.keys(nn).map(function(n){i.removeCallBack(n,e[nn[n]])}),this.videothumbnail=null,this.thumbnail=null,this.videoPreview&&this.player.root.removeChild(this.videoPreview),this.unbind(".xg-spot-info","mousemove",this.onMousemove),this.unbind(".xg-spot-info","mousedown",this.onMousedown),this.unbind(".xg-spot-info","mouseup",this.onMouseup),this.unbind(".xg-spot-content","mouseup",this.handlerPreviewClick)}},{key:"render",value:function(){return ce.device==="mobile"||this.playerConfig.isMobileSimulateMode==="mobile"?"":'<div class="xg-spot-info hide '.concat(this.config.mode==="short"?"short-line":"",`">
      <div class="xg-spot-content">
        <div class="xg-spot-thumbnail">
          <span class="xg-spot-time"></span>
        </div>
        <div class="xg-spot-text"><span class="spot-inner-text"></span></div>
      </div>
      <div class="xgplayer-progress-point">00:00</div>
      <div class="xg-spot-ext-text"></div>
      <div class="xg-spot-line"></div>
    </div>`)}}],[{key:"pluginName",get:function(){return"progresspreview"}},{key:"defaultConfig",get:function(){return{index:1,miniWidth:6,ispots:[],defaultText:"",isFocusDots:!0,isHideThumbnailHover:!0,isShowThumbnail:!0,isShowCoverPreview:!1,mode:"",disable:!1,width:160,height:90}}}]),r}(be),Bf=function(s){oe(r,s);var a=ae(r);function r(t){var e;return Y(this,r),e=a.call(this,t),e.ratio=1,e.interval=null,e._preloadMark={},e}return X(r,[{key:"afterCreate",value:function(){var e=this;this.usable&&this.initThumbnail(),this.on([zt],function(){var i=e.config,n=i.pic_num,o=i.interval;e.usable&&(e.interval=o>0?o:Math.round(e.player.duration*1e3/n)/1e3)})}},{key:"setConfig",value:function(e){var i=this;if(e){var n=Object.keys(e);n.length<1||(n.forEach(function(o){i.config[o]=e[o]}),this.usable&&this.initThumbnail())}}},{key:"usable",get:function(){var e=this.config,i=e.urls,n=e.pic_num;return i&&i.length>0&&n>0}},{key:"initThumbnail",value:function(){var e=this.config,i=e.width,n=e.height,o=e.pic_num,l=e.interval;this.ratio=i/n*100,this.interval=l||Math.round(this.player.duration/o),this._preloadMark={}}},{key:"getUrlByIndex",value:function(e){return e>=0&&e<this.config.urls.length?this.config.urls[e]:""}},{key:"preload",value:function(e){var i=this;if(!this._preloadMark[e]){var n=this.config.urls,o=n.length,l=[];e>0&&l.push(e-1),l.push(e),e>0&&e<o-1&&l.push(e+1),l.map(function(u){!i._preloadMark[u]&&u>=0&&u<o&&(i._preloadMark[u]=1,v.preloadImg(n[u],function(){i._preloadMark[u]=2}))})}}},{key:"getPosition",value:function(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,o=this.config,l=o.pic_num,u=o.row,c=o.col,f=o.width,d=o.height;this.interval=Math.round(this.player.duration/l);var h=Math.ceil(e/this.interval);h=h>l?l:h;var g=h<u*c?0:Math.ceil(h/(u*c))-1,p=h-g*(c*u),m=p>0?Math.ceil(p/c)-1:0,y=p>0?p-m*c-1:0,b=0,S=0;if(i&&n){var E=i/n;E<f/d?(S=n,b=S*(f/d)):(b=i,S=b/(f/d))}else n?i||(S=n||d,b=S*(f/d)):(b=i||f,S=b/(f/d));var I=this.getUrlByIndex(g);return{urlIndex:g,rowIndex:m,colIndex:y,url:I,height:S,width:b,style:{backgroundImage:"url(".concat(I,")"),backgroundSize:"".concat(b*c,"px auto"),backgroundPosition:"-".concat(y*b,"px -").concat(m*S,"px"),width:"".concat(b,"px"),height:"".concat(S,"px")}}}},{key:"update",value:function(e,i){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,l=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"",u=this.config,c=u.pic_num,f=u.urls;if(!(c<=0||!f||f.length===0)){var d=this.getPosition(i,n,o);this.preload(d.urlIndex),Object.keys(d.style).map(function(h){e.style[h]=d.style[h]}),Object.keys(l).map(function(h){e.style[h]=l[h]})}}},{key:"changeConfig",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.setConfig(e)}},{key:"createThumbnail",value:function(e,i){var n=v.createDom("xg-thumbnail","",{},"thumbnail ".concat(i));return e&&e.appendChild(n),n}}],[{key:"pluginName",get:function(){return"thumbnail"}},{key:"defaultConfig",get:function(){return{isShow:!1,urls:[],pic_num:0,col:0,row:0,height:90,width:160,scale:1,className:"",hidePortrait:!1}}}]),r}(be),Hf=function(s){oe(r,s);var a=ae(r);function r(){return Y(this,r),a.apply(this,arguments)}return X(r,[{key:"afterCreate",value:function(){}},{key:"update",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{cached:0,played:0},i=arguments.length>1?arguments[1]:void 0;!i||!this.root||(e.cached&&(this.find("xg-mini-progress-cache").style.width="".concat(e.cached/i*100,"%")),e.played&&(this.find("xg-mini-progress-played").style.width="".concat(e.played/i*100,"%")))}},{key:"render",value:function(){if(!(!this.playerConfig.progress||!this.playerConfig.miniprogress))return`<xg-mini-progress class="xg-mini-progress">
    <xg-mini-progress-cache class="xg-mini-progress-cache"></xg-mini-progress-cache>
    <xg-mini-progress-played class="xg-mini-progress-played"></xg-mini-progress-played>
    </xg-mini-progress>`}}],[{key:"pluginName",get:function(){return"MiniProgress"}},{key:"defaultConfig",get:function(){return{}}}]),r}(be),En={REAL_TIME:"realtime",FIRST_FRAME:"firstframe",FRAME_RATE:"framerate",POSTER:"poster"};function Uf(){try{return parseInt(window.performance.now(),10)}catch{return new Date().getTime()}}function jf(){try{var s=document.createElement("canvas").getContext;return!!s}catch{return!1}}var Jn=null,Gf=function(s){oe(r,s);var a=ae(r);function r(){var t;Y(this,r);for(var e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];return t=a.call.apply(a,[this].concat(i)),A(w(t),"onLoadedData",function(o){t.player&&(t._frameCount=t.config.startFrameCount,t.renderOnTimeupdate(o),t.off(dt,t.renderOnTimeupdate),t.on(dt,t.renderOnTimeupdate))}),A(w(t),"renderOnTimeupdate",function(o){t._frameCount>0?(t.renderOnce(),t._frameCount--):(t._isLoaded=!0,t.off(dt,t.renderOnTimeupdate),!t.player.paused&&t._checkIfCanStart()&&t.start())}),A(w(t),"start",function(){var o=t.player.media,l=Uf(),u=t.checkVideoIsSupport(o);!u||!t.canvasCtx||(t.stop(),o.videoWidth&&o.videoHeight&&(t.videoPI=o.videoHeight>0?parseInt(o.videoWidth/o.videoHeight*100,10):0,(t.config.mode===En.REAL_TIME||l-t.preTime>=t.interval)&&(o&&o.videoWidth&&t.update(u,t.videoPI),t.preTime=l)),t.frameId=v.requestAnimationFrame(t.start))}),A(w(t),"stop",function(){t.frameId&&(v.cancelAnimationFrame(t.frameId),t.frameId=null)}),t}return X(r,[{key:"afterCreate",value:function(){var e=this;this.playerConfig.dynamicBg===!0&&(this.config.disable=!1),r.isSupport||(this.config.disable=!0);var i=this.config,n=i.disable,o=i.mode,l=i.frameRate;n||(this._pos={width:0,height:0,rwidth:0,rheight:0,x:0,y:0,pi:0},this.isStart=!1,this._isLoaded=!1,this.videoPI=0,this.preTime=0,this.interval=parseInt(1e3/l,10),this.canvas=null,this.canvasCtx=null,this._frameCount=0,this.once(Ii,function(){e.player&&(e.init(),e.player.paused||e.start())}),o!==En.POSTER&&(o!==En.FIRST_FRAME&&(this.on(fn,function(){e.stop()}),this.on(st,function(){e._checkIfCanStart()&&e.start()}),this.on(cn,function(){e.stop()})),this.on(Rt,this.onLoadedData),this.on(Cr,function(){e._isLoaded=!1,e.stop()})))}},{key:"init",value:function(){var e=this.player,i=this.config;this.canvasFilter=r.supportCanvasFilter();try{var n=this.config.isInnerRender&&e.innerContainer||e.root;n.insertAdjacentHTML("afterbegin",'<div class="xgplayer-dynamic-bg" data-index="'.concat(i.index,`"><canvas>
        </canvas><xgmask></xgmask></div>`)),this.root=n.children[0],this.canvas=this.find("canvas"),this.canvasFilter||(this.canvas.style.filter=i.filter,this.canvas.style.webkitFilter=i.filter),this.mask=this.find("xgmask"),i.addMask&&(this.mask.style.background=i.maskBg),this.canvasCtx=this.canvas.getContext("2d"),this.renderByPoster()}catch(o){ge.logError("plugin:DynamicBg",o)}}},{key:"checkVideoIsSupport",value:function(e){if(!e)return null;var i=e&&e instanceof window.HTMLVideoElement?e:e.canvas?e.canvas:e.flyVideo?e.flyVideo:null;if(i&&!(ce.browser==="safari"&&(/^blob/.test(i.currentSrc)||/^blob/.test(i.src))))return i;var n=i?i.tagName.toLowerCase():"";return n==="canvas"||n==="img"?i:null}},{key:"renderByPoster",value:function(){var e=this.playerConfig.poster;if(e){var i=v.typeOf(e)==="String"?e:v.typeOf(e.poster)==="String"?e.poster:null;this.updateImg(i)}}},{key:"_checkIfCanStart",value:function(){var e=this.config.mode;return this._isLoaded&&e!==En.FIRST_FRAME&&e!==En.POSTER}},{key:"renderOnce",value:function(){var e=this.player.media;if(!(!e.videoWidth||!e.videoHeight)){this.videoPI=parseInt(e.videoWidth/e.videoHeight*100,10);var i=this.checkVideoIsSupport(e);i&&e.videoWidth&&this.update(i,this.videoPI)}}},{key:"updateImg",value:function(e){var i=this;if(e){var n=this.canvas.getBoundingClientRect(),o=n.width,l=n.height,u=new window.Image;u.onload=function(){if(!(!i.canvas||i.frameId||i.isStart)){i.canvas.height=l,i.canvas.width=o;var c=parseInt(o/l*100,10);i.update(u,c),u=null}},u.src=e}}},{key:"update",value:function(e,i){if(!(!this.canvas||!this.canvasCtx||!i))try{var n=this._pos,o=this.config,l=this.canvas.getBoundingClientRect(),u=l.width,c=l.height;if(u!==n.width||c!==n.height||n.pi!==i){var f=parseInt(u/c*100,10);n.pi=i,n.width=this.canvas.width=u,n.height=this.canvas.height=c;var d=c,h=u;f<i?h=parseInt(c*i/100,10):f>i&&(d=parseInt(u*100/i,10)),n.rwidth=h*o.multiple,n.rheight=d*o.multiple,n.x=(u-n.rwidth)/2,n.y=(c-n.rheight)/2}this.canvasFilter&&(this.canvasCtx.filter=o.filter),this.canvasCtx.drawImage(e,n.x,n.y,n.rwidth,n.rheight)}catch(g){ge.logError("plugin:DynamicBg",g)}}},{key:"destroy",value:function(){this.stop(),this.canvasCtx=null,this.canvas=null}},{key:"render",value:function(){return""}}],[{key:"pluginName",get:function(){return"dynamicBg"}},{key:"defaultConfig",get:function(){return{isInnerRender:!1,disable:!0,index:-1,mode:"framerate",frameRate:10,filter:"blur(50px)",startFrameCount:2,addMask:!0,multiple:1.2,maskBg:"rgba(0,0,0,0.7)"}}},{key:"isSupport",get:function(){return typeof Jn=="boolean"||(Jn=jf()),Jn}},{key:"supportCanvasFilter",value:function(){return!(ce.browser==="safari"||ce.browser==="firefox")}}]),r}(be),Vf={LANG:"zh-cn",TEXT:{ERROR_TYPES:{network:{code:1,msg:"视频下载错误"},mse:{code:2,msg:"流追加错误"},parse:{code:3,msg:"解析错误"},format:{code:4,msg:"格式错误"},decoder:{code:5,msg:"解码错误"},runtime:{code:6,msg:"语法错误"},timeout:{code:7,msg:"播放超时"},other:{code:8,msg:"其他错误"}},HAVE_NOTHING:"没有关于音频/视频是否就绪的信息",HAVE_METADATA:"音频/视频的元数据已就绪",HAVE_CURRENT_DATA:"关于当前播放位置的数据是可用的，但没有足够的数据来播放下一帧/毫秒",HAVE_FUTURE_DATA:"当前及至少下一帧的数据是可用的",HAVE_ENOUGH_DATA:"可用数据足以开始播放",NETWORK_EMPTY:"音频/视频尚未初始化",NETWORK_IDLE:"音频/视频是活动的且已选取资源，但并未使用网络",NETWORK_LOADING:"浏览器正在下载数据",NETWORK_NO_SOURCE:"未找到音频/视频来源",MEDIA_ERR_ABORTED:"取回过程被用户中止",MEDIA_ERR_NETWORK:"网络错误",MEDIA_ERR_DECODE:"解码错误",MEDIA_ERR_SRC_NOT_SUPPORTED:"不支持的音频/视频格式",REPLAY:"重播",ERROR:"网络连接似乎出现了问题",PLAY_TIPS:"播放",PAUSE_TIPS:"暂停",PLAYNEXT_TIPS:"下一集",DOWNLOAD_TIPS:"下载",ROTATE_TIPS:"旋转",RELOAD_TIPS:"重新载入",FULLSCREEN_TIPS:"进入全屏",EXITFULLSCREEN_TIPS:"退出全屏",CSSFULLSCREEN_TIPS:"进入样式全屏",EXITCSSFULLSCREEN_TIPS:"退出样式全屏",TEXTTRACK:"字幕",PIP:"画中画",SCREENSHOT:"截图",LIVE:"正在直播",OFF:"关闭",OPEN:"开启",MINI_DRAG:"点击按住可拖动视频",MINISCREEN:"小屏幕",REFRESH_TIPS:"请试试",REFRESH:"刷新",FORWARD:"快进中",LIVE_TIP:"直播"}},Cn="info",Zi=na,Wf=function(s){oe(r,s);var a=ae(r);function r(){var t;Y(this,r);for(var e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];return t=a.call.apply(a,[this].concat(i)),A(w(t),"_recordUserActions",function(o){var l=t._getTime(),u=Object.assign({},o,{msg:o.msg||o.action});t._stats[Cn].push(Ne(Ne({type:"userAction"},l),{},{payload:u}))}),A(w(t),"_onReset",function(){t.reset()}),A(w(t),"_recordInfo",function(o){t.info(o)}),A(w(t),"_downloadStats",function(){var o=t.getStats(),l=new Blob([JSON.stringify(o)],{type:"application/json"}),u=window.URL.createObjectURL(l),c=document.createElement("a");c.style.display="none",c.href=u,c.download="player.txt",c.disabled=!1,c.click()}),t}return X(r,[{key:"_getTime",value:function(){return{timestamp:Date.now(),timeFormat:new Date().toISOString()}}},{key:"afterCreate",value:function(){this.reset(),this.on(pi,this._recordUserActions),this.on(Zi.STATS_INFO,this._recordInfo),this.on(Zi.STATS_DOWNLOAD,this._downloadStats),this.on(Zi.STATS_RESET,this._onReset)}},{key:"destroy",value:function(){this.offAll()}},{key:"downloadStats",value:function(){this._downloadStats()}},{key:"info",value:function(e){e.profile?this._infoProfile(e):this._info(e)}},{key:"_info",value:function(e){var i=this._getTime();this._stats[Cn].push(Ne(Ne({},i),{},{payload:e}))}},{key:"_infoProfile",value:function(e){if(e&&e.startMs){var i=Date.now(),n=i-e.startMs,o=Ne({cat:"function",dur:n,name:e.name||e.msg,ph:"X",pid:0,tid:0,ts:e.startMs,profile:!0},e);this._info(o)}else console.warn("infoProfile need object data, include startMs")}},{key:"reset",value:function(){var e;this._stats=(e={},A(e,Cn,[]),A(e,"media",{}),e)}},{key:"getStats",value:function(){for(var e=this.player,i=e.media,n=[],o=0;o<i.buffered.length;o++)n.push({start:i.buffered.start(o),end:i.buffered.end(o)});var l={currentTime:i.currentTime,readyState:i.readyState,buffered:n,paused:i.paused,ended:i.ended};return this._stats.media=l,{raw:this._stats,timestat:this._getTimeStats(),profile:this._getProfile()}}},{key:"_getTimeStats",value:function(){var e=this._stats[Cn],i=e.map(function(n){var o=n.payload.data,l="";try{o instanceof Error?l=o.msg:o!==void 0&&(l=JSON.stringify(o))}catch(u){console.log("err",u)}return"[".concat(n.timeFormat,"] : ").concat(n.payload.msg," ").concat(l," ")});return i}},{key:"_getProfile",value:function(){var e={traceEvents:[]},i=this._stats[Cn];return i.forEach(function(n){n.payload.profile&&e.traceEvents.push(n.payload)}),e}}],[{key:"pluginName",get:function(){return"stats"}},{key:"defaultConfig",get:function(){return{}}}]),r}(Wt),ca=function(s){oe(r,s);var a=ae(r);function r(){var t;Y(this,r);for(var e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];return t=a.call.apply(a,[this].concat(i)),A(w(t),"onGapJump",function(){var o=w(t),l=o.player,u=o.config;if(l.media.readyState!==HTMLMediaElement.HAVE_NOTHING){if(l.media.seeking){if(!t.seekingEventReceived)return}else t.seekingEventReceived=!1;if(!(l.media.paused&&l.media.currentTime!==0&&t.hasPlayed)){var c=l.media.buffered,f=u.smallGapLimit||.5,d=u.gapDetectionThreshold||.3,h=l.media.currentTime,g=t._getIndex(c,h,d);if(!(g===null||g===0)){console.log("GapJump  bufferRange ",c.start(g),c.end(g));var p=c.start(g)+.1,m=l.media.duration;if(!(p>m)){var y=p-h,b=y<=f;y<r.BROWSER_GAP_TOLERANCE||b&&(u.useGapJump!==!1&&(l.media.currentTime=t.isSafari?p+.1:p),t.player&&t.player.emit("detectGap"),console.log("gapJump gapIndex",g," isGapSamll:",b," currentTime:",l.media.currentTime," jumpSize:",h-l.media.currentTime),p!==.08&&l&&l.emit("log",{type:"oneevent",end_type:"gap",vid:l.config.vid,ext:{video_postion:Math.floor(p*1e3)}}))}}}}}),t}return X(r,[{key:"afterCreate",value:function(){var e=this,i=this.config.useGapJump;i!==!1&&(this.hasPlayed=!1,this.seekingEventReceived=!1,this.isSafari=/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),this.on(Bn,this.onGapJump),this.on(st,function(){e.hasPlayed=!0}),this.on(Er,function(){e.seekingEventReceived=!0}))}},{key:"_getIndex",value:function(e,i,n){if(!e||!e.length||e.length===1&&e.end(0)-e.start(0)<1e-6)return null;for(var o=this._getBuffered(e),l=null,u=0;u<o.length;u++){var c=o[u];if(c.start>i&&(u===0||o[u-1].end-i<=n)){l=u;break}}return l}},{key:"_getBuffered",value:function(e){if(!e)return[];for(var i=[],n=0;n<e.length;n++)i.push({start:e.start(n),end:e.end(n)});return i}}],[{key:"pluginName",get:function(){return"gapJump"}},{key:"defaultConfig",get:function(){return{useGapJump:!1,smallGapLimit:.5,gapDetectionThreshold:.3}}}]),r}(be);ca.BROWSER_GAP_TOLERANCE=.001;var Kf=function(s){oe(r,s);var a=ae(r);function r(){var t;Y(this,r);for(var e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];return t=a.call.apply(a,[this].concat(i)),A(w(t),"onWaiting",function(){var o=w(t),l=o.config;t.jumpCnt>l.jumpCntMax||t.timer||l.useWaitingTimeoutJump===!1||(t.timer=setTimeout(t.onJump,l.waitingTime*1e3))}),A(w(t),"onJump",function(){var o=w(t),l=o.player,u=o.config;if(clearTimeout(t.timer),t.timer=null,!(t.jumpCnt>u.jumpCntMax||u.useWaitingTimeoutJump===!1)&&!(l.media.paused&&l.media.currentTime!==0&&t.hasPlayed)){t.jumpSize=u.jumpSize*(t.jumpCnt+1),t.jumpCnt===u.jumpSize&&t.jumpSize<6&&(t.jumpSize=6);var c=l.currentTime+t.jumpSize,f=l.media.duration;c>f||(console.log("waitintTimeout, currentTime:",l.currentTime,", jumpTo:",c),t.jumpCnt++,l.currentTime=c)}}),t}return X(r,[{key:"afterCreate",value:function(){var e=this,i=this.config,n=i.useWaitingTimeoutJump,o=i.jumpSize;n!==!1&&(this.hasPlayed=!1,this.jumpCnt=0,this.timer=null,this.jumpSize=o,this.on(Bn,this.onWaiting),this.on([Sr,Ct],function(){clearTimeout(e.timer),e.timer=null,e.jumpSize=e.config.jumpSize}),this.on(st,function(){e.hasPlayed=!0}))}}],[{key:"pluginName",get:function(){return"waitingTimeoutJump"}},{key:"defaultConfig",get:function(){return{useWaitingTimeoutJump:!1,waitingTime:15,jumpSize:2,jumpCntMax:4}}}]),r}(be),rn="cdn",Zn=["cdn"],zf=function(s){oe(r,s);var a=ae(r);function r(){var t;Y(this,r);for(var e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];return t=a.call.apply(a,[this].concat(i)),A(w(t),"getSpeed",function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:rn;if(!t.speedListCache||!t.speedListCache[o]||t.speedListCache[o].length<=0)return 0;var l=0;return t.speedListCache[o].map(function(u){l+=u}),Math.floor(l/t.speedListCache[o].length)}),A(w(t),"startTimer",function(){v.isMSE(t.player.video)||(t.initSpeedList(),t.cnt=0,t.timer=setTimeout(t.testSpeed,t.config.testTimeStep))}),A(w(t),"initSpeedList",function(){t.speedListCache={},Zn.forEach(function(o){t.speedListCache[o]=[]})}),A(w(t),"_onRealSpeedChange",function(o){o.speed&&t.appendList(o.speed,o.type||rn)}),A(w(t),"testSpeed",function(){if(clearTimeout(t.timer),t.timer=null,!(!t.player||!t.config.openSpeed)){var o=t.config,l=o.url,u=o.loadSize,c=o.testCnt,f=o.testTimeStep,d=l+(l.indexOf("?")<0?"?testst=":"&testst=")+Date.now();if(!(t.cnt>=c)){t.cnt++;try{var h=new Date().getTime(),g=null,p=new XMLHttpRequest;t.xhr=p,p.open("GET",d);var m={},y=Math.floor(Math.random()*10);m.Range="bytes="+y+"-"+(u+y),m&&Object.keys(m).forEach(function(b){p.setRequestHeader(b,m[b])}),p.onreadystatechange=function(){if(p.readyState===4){t.xhr=null,g=new Date().getTime();var b=p.getResponseHeader("Content-Length")/1024*8,S=Math.round(b*1e3/(g-h));t.appendList(S),t.timer=setTimeout(t.testSpeed,f)}},p.send()}catch(b){console.error(b)}}}}),A(w(t),"appendList",function(o){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:rn;if(!(!t.speedListCache||!t.speedListCache[l])){var u=t.config.saveSpeedMax;t.speedListCache[l].length>=u&&t.speedListCache[l].shift(),t.speedListCache[l].push(o);var c=w(t),f=c.player;f&&(l===rn?f.realTimeSpeed=o:f[t.getSpeedName("realTime",l)]=o),t.updateSpeed(l)}}),A(w(t),"updateSpeed",function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:rn,l=t.getSpeed(o),u=w(t),c=u.player;if(c)if(o===rn)(!c.avgSpeed||l!==c.avgSpeed)&&(c.avgSpeed=l,c.emit(ur,{speed:l,realTimeSpeed:c.realTimeSpeed}));else{var f=t.getSpeedName("avg",o);(!c[f]||l!==c[f])&&(c[f]=l,c.emit(ur,{speed:l,realTimeSpeed:c.realTimeSpeed}))}}),t}return X(r,[{key:"afterCreate",value:function(){var e=this.config,i=e.openSpeed,n=e.addSpeedTypeList;(n==null?void 0:n.length)>0&&Zn.push.apply(Zn,xt(n)),this.initSpeedList(),this.on("real_time_speed",this._onRealSpeedChange),this.timer=null,this.cnt=0,this.xhr=null,i&&this.on([Rt,di],this.startTimer)}},{key:"getSpeedName",value:function(e,i){return e+"Speed"+i.toUpperCase()}},{key:"openSpeed",get:function(){return this.config.openSpeed},set:function(e){if(this.config.openSpeed=e,!e&&this.timer){clearTimeout(this.timer),this.timer=null;return}if(this.config.openSpeed){if(this.timer)return;this.timer=setTimeout(this.testSpeed,this.config.testTimeStep)}}},{key:"destroy",value:function(){var e=this;this.off("real_time_speed",this._onRealSpeedChange),this.off([Rt,di],this.startTimer),Zn.forEach(function(i){e.speedListCache&&e.speedListCache[i]&&(e.speedListCache[i]=[])}),this.speedListCache&&(this.speedListCache={}),clearTimeout(this.timer),this.timer=null,this.xhr&&this.xhr.readyState!==4&&(this.xhr.cancel&&this.xhr.cancel(),this.xhr=null)}}],[{key:"pluginName",get:function(){return"testspeed"}},{key:"defaultConfig",get:function(){return{openSpeed:!1,testCnt:3,loadSize:200*1024,testTimeStep:3e3,url:"",saveSpeedMax:5,addSpeedTypeList:[]}}}]),r}(be),$f=function(s){oe(r,s);var a=ae(r);function r(){return Y(this,r),a.apply(this,arguments)}return X(r,[{key:"afterCreate",value:function(){var e=this,i=this.player,n=this.config;if(this.timer=null,this._lastDecodedFrames=0,this._currentStuckCount=0,this._lastCheckPoint=null,this._payload=[],!n.disabled){var o=i.media.getVideoPlaybackQuality;o&&(this.on(st,function(){e._startTick()}),this.on(cn,function(){e._stopTick()}),this.on(Kt,function(){e._stopTick()}),this.on(fn,function(){e._stopTick()}))}}},{key:"_startTick",value:function(){var e=this;this._stopTick(),this._timer=setTimeout(function(){e._checkDecodeFPS(),e._startTick()},this.config.tick)}},{key:"_stopTick",value:function(){clearTimeout(this._timer),this._timer=null}},{key:"_checkStuck",value:function(e,i,n,o){var l=this.player.media,u=document.hidden,c=l.paused;if(typeof u=="boolean"&&!u&&!c){for(var f=l.currentTime,d=l.buffered,h=!1,g=[],p=0;p<d.length;p++){var m=d.start(p),y=d.end(p);if(g.push({start:m,end:y}),m<=f&&f<=y-1){h=!0;break}}l.readyState===4&&h&&(this._currentStuckCount>this.config.stuckCount?(this.emit(ia,this._payload),this._reset()):e<=this.config.reportFrame?(this._currentStuckCount++,this._payload.push({bufs:g,currentTime:l.currentTime,curDecodedFrames:e,totalVideoFrames:i,droppedVideoFrames:n,checkInterval:o})):this._reset())}}},{key:"_reset",value:function(){this._payload=[],this._currentStuckCount=0}},{key:"_checkDecodeFPS",value:function(){if(this.player.media){var e=this.player.media.getVideoPlaybackQuality(),i=e.totalVideoFrames,n=e.droppedVideoFrames,o=performance.now();if(i&&this._lastCheckPoint){var l=i-this._lastDecodedFrames,u=o-this._lastCheckPoint;this._checkStuck(l,i,n,u)}this._lastDecodedFrames=i,this._lastCheckPoint=o}}},{key:"destroy",value:function(){this._stopTick()}}],[{key:"pluginName",get:function(){return"FpsDetect"}},{key:"defaultConfig",get:function(){return{disabled:!1,tick:1e3,stuckCount:3,reportFrame:0}}}]),r}(be);ln.use(Vf);var Yf=X(function s(a,r){var t,e,i;Y(this,s);var n=r&&r.isMobileSimulateMode==="mobile",o=r.isLive,l=o?[]:[rf,Hf,_f,ff],u=[].concat(l,[of,cf,mf,Cf,Af,Df,wf,Pf,vf,Sf]),c=[Fc,_c,Hc,ef,Uc,Mf,Nf,Bf,Wc];this.plugins=[Wf,Mc].concat(xt(u),c,[ca,Kf]);var f=n?"mobile":ce.device;switch(f){case"pc":(t=this.plugins).push.apply(t,[go,Xi,po,zf,$f]);break;case"mobile":(e=this.plugins).push.apply(e,[Jc]);break;default:(i=this.plugins).push.apply(i,[go,Xi,po])}(ce.os.isIpad||f==="pc")&&this.plugins.push(Gf),ce.os.isIpad&&this.plugins.push(Xi),this.ignores=[],this.i18n=[]}),bt=function(s){oe(r,s);var a=ae(r);function r(){return Y(this,r),a.apply(this,arguments)}return X(r)}(Or);A(bt,"defaultPreset",Yf);A(bt,"Util",v);A(bt,"Sniffer",ce);A(bt,"Errors",fi);A(bt,"Events",uc);A(bt,"Plugin",be);A(bt,"BasePlugin",Wt);A(bt,"I18N",ln);A(bt,"STATE_CLASS",M);const Xf={class:"page"},Jf={class:"player"},Zf={class:"left right"},Qf=["src"],qf="/web/viewer.html?file=",ed=Ei({__name:"index",setup(s){const a=Ge([]);let r;const t=Ci(hr()),e=c=>{const f=document.querySelector(".player");r=new bt({id:"mse",url:c,videoInit:!0,closeInactive:!1,autoplay:!0,loop:!1,fluid:!0,ignores:["cssfullscreen"],fullscreenTarget:f,width:"100%px",videoFillMode:"cover",playbackRate:[],controls:!1,closeVideoClick:!0,closeVideoDblclick:!0}),t.player.value=r,r.currentTime=t.lastPlayedTime.value,r.on("ended",()=>{var h;if((h=t.currentPlayingItem.value)!=null&&h.pointId&&(console.log("播放结束,但看点未结束"),i.value=a.value.filter(p=>p.videoId===t.currentVideoId.value)[a.value.filter(p=>p.videoId===t.currentVideoId.value).length-1],t.currentPlayingItem.value.timestamps.duration-(r.currentTime-t.currentPlayingItem.value.timestamps.start)>0)){t.updateCurrBlank.value(!1);const p=`	https://dev-1310338158.cos.ap-nanjing.myqcloud.com/${t.currentPlayingItem.value.videoId+1}.mp4`;r.src=p,t.updateCurrentVideoUrl.value(p),t.updateCurrentVideoId.value(t.currentPlayingItem.value.videoId+1)}}),n(),r.on("urlchange",()=>{console.log("视频原切换",a.value.filter(h=>h.videoId===t.currentVideoId.value)),setTimeout(()=>{i.value=a.value.filter(h=>h.videoId===t.currentVideoId.value-1)[a.value.filter(h=>h.videoId===t.currentVideoId.value-1).length-1]},0)}),r.root.addEventListener("dblclick",function(h){r.paused?r.play():r.pause()}),document.getElementById("myElement");var d=0;r.root.addEventListener("touchend",function(h){var g=new Date().getTime(),p=g-d;d=g,p<300&&(h.preventDefault(),r.paused?r.play():r.pause())})},i=Ge();Rn(async()=>{const c={status:"success",title:"看点列表",videoBaseUrl:"	https://dev-1310338158.cos.ap-nanjing.myqcloud.com",fileList:[{videoId:1001,dur:55},{videoId:1002,dur:127},{videoId:1003,dur:620}],keypoints:[{videoId:1001,pointId:1,type:"video",description:"1 长征五号运载火箭成功发射",timestamps:{start:2,duration:5}},{videoId:1001,pointId:2,type:"video",description:"2 疫情影响下，全球旅游业遭受重创，各国积极寻求复苏之路。",timestamps:{start:11,duration:5}},{videoId:1001,pointId:3,type:"video",description:"3 联合国气候变化大会。",timestamps:{start:20,duration:5}},{videoId:1001,pointId:4,type:"video",description:"4 我国成功研制出抗新冠病毒疫苗，进入临床试验阶段。",timestamps:{start:30,duration:5}},{videoId:1001,pointId:5,type:"video",description:"5 世卫生组织宣布全球大流行。",timestamps:{start:40,duration:5}},{videoId:1001,pointId:6,type:"video",description:"6 我国加大对新能源汽车产业的政策支持力度。",timestamps:{start:52,duration:30}},{videoId:1002,pointId:7,type:"video",description:"7 人工智能在医疗领域广泛应用。",timestamps:{start:35,duration:6}},{videoId:1002,pointId:8,type:"video",description:"8 香港特别行政区选",timestamps:{start:50,duration:5}},{videoId:1002,pointId:9,type:"video",description:"9 美国总统选举结果揭晓，拜登当选第46任总统。",timestamps:{start:57,duration:3}},{videoId:1002,pointId:10,type:"video",description:"10 日本福岛核电站事故十周年，核废水处理问题引发争议。",timestamps:{start:62,duration:5}},{videoId:1002,pointId:11,type:"video",description:"11 2022年北京冬奥会筹备工作有序推进。",timestamps:{start:89,duration:10}},{videoId:1002,pointId:12,type:"video",description:"12 我国科学家在量子计算领域取得重要突破。",timestamps:{start:118,duration:2}}]};if(a.value=c.keypoints,t.fileList.value=c.fileList,a.value.length>0){const f=a.value[0],d=t.currentVideoUrl.value||c.videoBaseUrl+"/"+f.videoId+".mp4";e(d)}});const n=()=>{r.on("timeupdate",()=>{t.updateLastPlayedTime.value(r.currentTime);const c=t.currentVideoId.value,f=r.currentTime,d=a.value.findIndex(h=>h.timestamps&&h.videoId===c&&f>=h.timestamps.start&&f<=h.timestamps.start+h.timestamps.duration);if(console.log(d),d!==-1)t.updatePlayingIndex.value(d),t.updateCurrBlank.value(!1);else if(t.pureSwitch.value&&t.currBlank.value&&t.playingIndex.value<a.value.length-1||t.pureSwitch.value&&t.currentVideoId.value===1001&&t.playingIndex.value===-1)console.log("出发纯享"),t.updatePlayingIndex.value(t.playingIndex.value+1),t.updateCurrBlank.value(!1),o();else{const h=a.value.reduce((g,p,m)=>p.timestamps&&p.videoId===c&&f>=p.timestamps.start&&f>=p.timestamps.start+p.timestamps.duration&&(g===-1||p.timestamps.start+p.timestamps.duration>a.value[g].timestamps.start+a.value[g].timestamps.duration)?m:g,-1);h!==-1?(t.updatePlayingIndex.value(h),t.updateCurrBlank.value(!0)):c===1001?(t.updatePlayingIndex.value(-1),t.updateCurrBlank.value(!1)):(t.updatePlayingIndex.value(-1),t.updateCurrBlank.value(!0))}t.currentVideoId.value!==1001&&r.currentTime<i.value.timestamps.duration-(t.fileList.value.find(h=>h.videoId===t.currentVideoId.value-1).dur-i.value.timestamps.start)?(t.updatePlayingIndex.value(a.value.findIndex(h=>{var g;return h.pointId===((g=i.value)==null?void 0:g.pointId)})),t.updateCurrBlank.value(!1),t.currInRemain.value=!0):t.currInRemain.value=!1})},o=()=>{const c=a.value.find(d=>d.pointId===(t.playingIndex.value===0?a.value.filter(h=>h.videoId===t.currentVideoId.value)[0].pointId:t.playingIndex.value+1));console.log(c);const f=document.querySelector("video");if(c.videoId!==t.currentVideoId.value-1&&f){const d=`	https://dev-1310338158.cos.ap-nanjing.myqcloud.com/${c.videoId}.mp4`;t.updateCurrentVideoId.value(c.videoId),t.updateCurrentVideoUrl.value(d),r.src=d}console.log(a.value.findIndex(d=>d.pointId===c.pointId)),t.updatePlayingIndex.value(a.value.findIndex(d=>d.pointId===c.pointId)),f&&c.timestamps&&(f.currentTime=c.timestamps.start)},l=Ge(!1);oi(()=>l.value?"退出全屏":"进入全屏");const u=Ge("");return Rn(()=>{u.value=qf+encodeURIComponent("/text.pdf")}),(c,f)=>(tt(),ot("div",Xf,[it("div",Jf,[it("div",Zf,[it("iframe",{src:u.value,width:"100%",height:"100%"},null,8,Qf)]),a.value.length?(tt(),bo(Nu,{key:0,"point-list":a.value},null,8,["point-list"])):jt("",!0)])]))}});const nd=gr(ed,[["__scopeId","data-v-5943759d"]]);export{nd as default};
